{"ast":null,"code":"import _styled2 from \"styled-components\";\nimport { css as _css } from \"styled-components\";\nimport { createGlobalStyle as _createGlobalStyle } from \"styled-components\";\nimport _styled from \"styled-components\";\nvar _jsxFileName = \"/home/anasbouzid/code-projects/streamlit/custom-components/CodeEditor/code_editor/frontend/src/CodeEditor.tsx\",\n  _s = $RefreshSig$();\nimport { Streamlit, withStreamlitConnection } from \"streamlit-component-lib\";\nimport React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport ace from \"ace-builds\";\nimport { Editor } from './editor';\nimport { Menu as ButtonMenu, Set as ButtonSet, Info as InfoBar } from \"./button-menu\";\nimport \"ace-builds/webpack-resolver\";\nimport \"ace-builds/src-noconflict/mode-python\";\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/ext-searchbox\";\nimport \"ace-builds/src-noconflict/ext-prompt\";\nimport \"ace-builds/src-noconflict/ext-modelist\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultOptions = {\n  maxLines: 20,\n  minLines: 20,\n  fontFamily: '\"Source Code Pro\", monospace',\n  cursorStyle: \"smooth\",\n  displayIndentGuides: false,\n  wrap: true,\n  highlightActiveLine: true,\n  showPrintMargin: false,\n  showLineNumbers: false,\n  foldStyle: \"markbegin\",\n  autoScrollEditorIntoView: false,\n  animatedScroll: true,\n  fadeFoldWidgets: true\n};\nconst defaultEditorProps = {\n  editorProps: {\n    $blockScrolling: true\n  }\n};\nconst defaultProps = {\n  cursorStart: 1,\n  enableBasicAutocompletion: false,\n  enableLiveAutocompletion: true,\n  enableSnippets: true,\n  focus: false,\n  fontSize: 16,\n  highlightActiveLine: true,\n  navigateToFileEnd: true,\n  placeholder: null,\n  readOnly: false,\n  scrollMargin: [15, 15, 0, 0],\n  setOptions: defaultOptions,\n  showGutter: true,\n  showPrintMargin: false,\n  style: {},\n  tabSize: 4,\n  width: \"auto\",\n  debounceChangePeriod: 250\n};\nconst GlobalCSS = _createGlobalStyle`\n  body {\n    margin: 0;\n    padding: 0;\n    opacity: ${props => props.isDisabled ? \"0.5\" : \"1\"};\n    pointer-events: ${props => props.isDisabled ? \"none\" : \"auto\"};\n  }\n  ${props => props.inject}\n`;\n_c = GlobalCSS;\nconst StyledCodeEditor = _styled.div.withConfig({\n  displayName: \"CodeEditor__StyledCodeEditor\",\n  componentId: \"sc-wmif04-0\"\n})([\"width:100%;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;:hover button{opacity:1;transform:scale(1);}button.always-on{opacity:1;transform:scale(1);transition:none;}:hover button svg{opacity:1;transform:scale(1);}:hover button.with-icon span{opacity:1;transform:scale(1);}button.always-on > span{opacity:1;transform:scale(1);transition:none;}button.always-on > svg{opacity:1;transform:scale(1);transition:none;}\"]);\nvar _StyledStyledCodeEditor = _styled(StyledCodeEditor).withConfig({\n  displayName: \"CodeEditor___StyledStyledCodeEditor\",\n  componentId: \"sc-wmif04-1\"\n})([\"\", \"\"], p => p.$_css2);\nconst CodeEditor = _ref => {\n  _s();\n  var _ref3;\n  let {\n    args,\n    width,\n    disabled,\n    theme\n  } = _ref;\n  //sets code to the initial value every time the component is rendered\n  //to set the initial value once, use a function instead of a value.\n  const [code, setCode] = useState(args['code']);\n  // const [keybindingAddRemove, setKeybindingAddRemove] = useState([\"\",\"\"]);\n\n  const aceEditor = useRef(null);\n  const infoTextRef = useRef(null);\n  const baseSession = useRef(null);\n  const keepFocus = useRef(false);\n  var timeoutId;\n\n  /**\n    * This function takes as input either a snippetText string that is expected\n    * to be already formatted like the text in a SnippetFile or a dictionary or \n    * and array of dictionaries. For the first case, it just returns the input.\n    * For the second and third case, a (SnippetFile format) string is constructed\n    * from the dict(s) and returned. Learn more about snippets {@link  here}\n    * @param snippetRaw snippets to be converted to a single snippetText string\n    * @returns {string} snippetText\n    */\n  const createSnippets = snippetRaw => {\n    return typeof snippetRaw === \"string\" ? snippetRaw : (Array.isArray(snippetRaw) ? snippetRaw : [snippetRaw]).map(_ref2 => {\n      let {\n        name,\n        code\n      } = _ref2;\n      return ['snippet ' + name, code.split('\\n').map(c => '\\t' + c).join('\\n')].join('\\n');\n    }).join('\\n');\n  };\n  const [snippetAddRemove, setSnippetAddRemove] = useState({\n    [args['lang']]: [createSnippets(args[\"snippets\"][0]), createSnippets(args[\"snippets\"][1])]\n  });\n  const [keybindingAddRemove, setKeybindingAddRemove] = useState(args['keybindings']);\n  useEffect(() => {\n    console.log(\"CodeEditor Mounted>>>>>>>>>>>>>>>>\");\n    return () => {\n      console.log(\"CodeEditor Unmounted<<<<<<<<<<<<<<<<\");\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (aceEditor.current && keepFocus.current) {\n      aceEditor.current.editor.focus();\n      keepFocus.current = false;\n    }\n  }, [keepFocus.current]);\n\n  // To reasons for the useEffect here: \n  //   1. to set the focus on the editor only when the focus argument has changed to true.\n  //   2. to set the focus on the editor after rendering the component at which point, the \n  //      editor should be ready.\n  useEffect(() => {\n    if (aceEditor.current && args['focus']) {\n      aceEditor.current.editor.focus();\n    }\n  }, [args['focus']]);\n  const onChangeHandler = newCode => {\n    setCode(newCode);\n  };\n\n  // commands is array containing functions that the editor calls when the bind key is pressed.\n  const commands = {\n    commands: [{\n      name: 'submit',\n      //name for the key binding.\n      description: \"Send 'submit' response\",\n      //description of the command\n      bindKey: {\n        win: 'Ctrl-Enter',\n        mac: 'Command-Enter'\n      },\n      //key combination used for the command.\n      exec: editor => {\n        console.log(\"submit keys pressed\");\n        Streamlit.setComponentValue({\n          type: \"submit\",\n          code: editor.getValue()\n        });\n      }\n    }, {\n      name: 'save-state',\n      description: \"Save state\",\n      bindKey: {\n        win: 'Ctrl-Alt-S',\n        mac: 'Command-Alt-S'\n      },\n      exec: editor => {\n        console.log(\"save state keys pressed\");\n        setCode(editor.getValue());\n      }\n    }, {\n      name: 'copyAll',\n      description: \"Copy all text to clipboard\",\n      exec: editor => {\n        unsecureCopyTextToClipboard(editor.getValue());\n      }\n    }, {\n      name: 'reset',\n      exec: () => {\n        resetEditor();\n      }\n    }, {\n      name: 'toggleKeyboardShortcuts',\n      exec: editor => {\n        if (!document.getElementById('kbshortcutmenu')) {\n          editor.execCommand('showKeyboardShortcuts');\n        } else {\n          editor.execCommand('simulateKeyPress', {\n            type: \"keydown\",\n            keyCode: 27\n          });\n        }\n      }\n    }, {\n      name: 'simulateKeyPress',\n      exec: (editor, args) => {\n        console.log(\"simulateKeyPress called\", args);\n        if (args.key) {\n          document.dispatchEvent(new KeyboardEvent(args.type, {\n            'key': args.key\n          }));\n        } else if (args.keyCode) {\n          document.dispatchEvent(new KeyboardEvent(args.type, {\n            'keyCode': args.keyCode\n          }));\n        }\n      }\n    }, {\n      name: 'infoMessage',\n      description: \"Display message in info bar\",\n      exec: (editor, args) => {\n        if (infoTextRef.current) {\n          infoTextRef.current.innerText = args.text;\n          infoTextRef.current.classList.add(args.classToggle || \"\");\n          if (args.timeout) {\n            console.log(\"calling set timeout\");\n            timeoutId = setTimeout(() => {\n              var _infoTextRef$current;\n              console.log(\"settimeout called\");\n              (_infoTextRef$current = infoTextRef.current) === null || _infoTextRef$current === void 0 ? void 0 : _infoTextRef$current.classList.remove(args.classToggle || \"\");\n            }, args.timeout);\n          }\n        }\n      }\n    }, {\n      name: 'response',\n      //name for the key binding.\n      description: \"Send custom response\",\n      //description of the command\n      exec: function (editor) {\n        let responseType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n        console.log(\"respond called:\" + responseType);\n        Streamlit.setComponentValue({\n          type: responseType,\n          code: code\n        });\n      }\n    }, {\n      name: 'editSnippets',\n      description: \"Edit snippets\",\n      bindKey: {\n        win: 'Ctrl-Alt-M',\n        mac: 'Command-Alt-M'\n      },\n      exec: editor => {\n        const snippetManager = ace.require('ace/snippets').snippetManager;\n        console.log(snippetManager);\n        if (baseSession.current) {\n          const outgoingMode = editor.getSession().$modeId.split(\"/\").pop();\n          if (outgoingMode === \"snippets\") {\n            const snippetText = editor.getSession().getValue();\n            editor.setSession(baseSession.current);\n            baseSession.current = null;\n            setCode(editor.getSession().getValue());\n            if (outgoingMode === \"snippets\") {}\n            try {\n              console.log(\"parsing snippet file\");\n              const snippetsPlusMinus = snippetText.split(\"###~~~\")[1];\n              const [snippetsPlus, snippetsMinus] = snippetsPlusMinus.split(\"###---\");\n              const snippetsToAdd = snippetsPlus.split(\"###+++\")[1];\n              const snippetsToRemove = snippetsMinus;\n              const langMode = editor.getSession().$modeId.split(\"/\").pop();\n              setSnippetAddRemove({\n                [langMode]: [snippetAddRemove[langMode][0] + snippetsToAdd, snippetAddRemove[langMode][1] + snippetsToRemove]\n              });\n            } catch (error) {\n              editor.execCommand(\"infoMessage\", {\n                text: \"error parsing file, restoring original file\",\n                timeout: 2000,\n                classToggle: \"show\"\n              });\n            }\n          }\n        } else {\n          const langMode = editor.getSession().$modeId.split(\"/\").pop();\n          const snippetConcatText = `\\n###~~~#(DO NOT EDIT THIS LINE)\n# Commented out above are all the snippets that are currently\n# registered for ${args['lang']} mode.\n\\n\\n###+++#(DO NOT EDIT THIS LINE) \\n# Put the snippets you want to add below this line.\\n\\n\\n\\n\n\\n\\n\\n###---#(DO NOT EDIT THIS LINE) \\n# Put the snippets you want to remove below this line.\\n\\n\\n\\n\\n\\n\\n`;\n          const snippetText = \"#\" + createSnippets(snippetManager.snippetMap[langMode].map(snip => ({\n            name: snip.name,\n            code: snip.content\n          }))).replace(/\\n/g, \"\\n#\") + snippetConcatText;\n          // snippetManager.files[editor.getSession().$modeId].snippetText\n          const lineCount = (snippetText.match(/\\n/g) || []).length;\n          baseSession.current = editor.getSession();\n          const snippetsSession = ace.createEditSession(snippetText, \"ace/mode/snippets\");\n          editor.setSession(snippetsSession);\n          const cursorPos = {\n            row: lineCount - 15 > 0 ? lineCount - 15 : 0,\n            column: 0\n          };\n          editor.moveCursorTo(cursorPos.row, cursorPos.column);\n          editor.renderer.scrollCursorIntoView(cursorPos, 0.5);\n        }\n      }\n    }, {\n      name: 'editKeyBindings',\n      description: \"Edit keybindings\",\n      bindKey: {\n        win: 'Ctrl-Alt-B',\n        mac: 'Command-Alt-B'\n      },\n      exec: editor => {\n        const Autocomplete = ace.require('ace/autocomplete').Autocomplete.for(editor);\n        if (baseSession.current) {\n          const outgoingMode = editor.getSession().$modeId.split(\"/\").pop();\n          if (outgoingMode === \"json\") {\n            const keybindingsJSON = editor.getSession().getValue();\n            editor.setSession(baseSession.current);\n            baseSession.current = null;\n            setCode(editor.getSession().getValue());\n            try {\n              console.log(\"parsing keybindings file\");\n              console.log(keybindingsJSON);\n              setKeybindingAddRemove(JSON.parse(keybindingsJSON));\n            } catch (error) {\n              editor.execCommand(\"infoMessage\", {\n                text: \"error parsing file, restoring original file\",\n                timeout: 2000,\n                classToggle: \"show\"\n              });\n            }\n          }\n        } else {\n          const keybindings = {\n            commands: {},\n            completer: {}\n          };\n          console.log(typeof editor.completer.keyboardHandler.commands);\n          if (editor.completer && editor.completer.keyboardHandler.commands) {\n            keybindings.completer = Object.keys(editor.completer.keyboardHandler.commands).map(key => {\n              var _editor$completer$key;\n              return {\n                bindkey: (_editor$completer$key = editor.completer.keyboardHandler.commands[key].bindKey) !== null && _editor$completer$key !== void 0 ? _editor$completer$key : \"\",\n                name: editor.completer.keyboardHandler.commands[key].name\n              };\n            });\n          }\n          if (editor.commands.commands) {\n            keybindings.commands = Object.keys(editor.commands.commands).map(key => {\n              var _editor$commands$comm;\n              return {\n                bindkey: (_editor$commands$comm = editor.commands.commands[key].bindKey) !== null && _editor$commands$comm !== void 0 ? _editor$commands$comm : \"\",\n                name: editor.commands.commands[key].name\n              };\n            });\n          }\n          const keybindingsJSON = JSON.stringify(keybindings, undefined, 2);\n          baseSession.current = editor.getSession();\n          const keybindingsSession = ace.createEditSession(keybindingsJSON, \"ace/mode/json\");\n          editor.setSession(keybindingsSession);\n        }\n      }\n    }, {\n      name: 'exitSession',\n      //name for the key binding.\n      bindKey: {\n        win: 'Esc',\n        mac: 'Esc'\n      },\n      description: \"Return to main session (keep changes)\",\n      //description of the command\n      exec: editor => {\n        if (baseSession.current) {\n          const mode = editor.getSession().$modeId.split(\"/\").pop();\n          if (mode === \"snippets\") {\n            editor.execCommand(\"editSnippets\");\n          } else if (mode === \"json\") {\n            editor.execCommand(\"editKeyBindings\");\n          }\n        }\n      }\n    }, {\n      name: 'abandonSession',\n      //name for the key binding.\n      bindKey: {\n        win: 'Ctrl-Alt-Esc',\n        mac: 'Command-Alt-Esc'\n      },\n      description: \"Return to main session (discard changes)\",\n      //description of the command\n      exec: editor => {\n        if (baseSession.current) {\n          editor.setSession(baseSession.current);\n          baseSession.current = null;\n          setCode(editor.getSession().getValue());\n        }\n      }\n    }, {\n      name: 'classART',\n      //name for the key binding.\n      description: \"Add/Remove/Toggle class for element\",\n      //description of the command\n      exec: (editor, args) => {\n        var _document$querySelect, _document$querySelect2, _document$querySelect3;\n        if (args.targetQueryString && args.type && args.class) {\n          switch (args.type) {\n            case \"add\":\n              (_document$querySelect = document.querySelectorAll(args.targetQueryString)) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.forEach(el => el.classList.add(args.class));\n              break;\n            case \"remove\":\n              (_document$querySelect2 = document.querySelectorAll(args.targetQueryString)) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.forEach(el => el.classList.remove(args.class));\n              break;\n            case \"toggle\":\n              (_document$querySelect3 = document.querySelectorAll(args.targetQueryString)) === null || _document$querySelect3 === void 0 ? void 0 : _document$querySelect3.forEach(el => el.classList.toggle(args.class));\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    }, {\n      name: 'conditionalExecute',\n      //name for the key binding.\n      description: \"Execute command if element exists\",\n      //description of the command\n      exec: (editor, args) => {\n        console.log(\"conditionalExecute called\");\n        if (args.targetQueryString && args.command && Array.isArray(args.command)) {\n          var _args$condition;\n          console.log(\"kbshortcut node: \", document.querySelector(args.targetQueryString));\n          if (!((_args$condition = args.condition) !== null && _args$condition !== void 0 ? _args$condition : true) == !document.querySelector(args.targetQueryString)) {\n            typeof args.command[0] === \"string\" ? execute(args.command[0], args.command[1]) : console.warn(\"improper command format!\");\n          }\n        }\n      }\n    }]\n  };\n  const execute = function (command) {\n    var _aceEditor$current;\n    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    const editor = (_aceEditor$current = aceEditor.current) === null || _aceEditor$current === void 0 ? void 0 : _aceEditor$current.editor;\n    if (editor) {\n      if (!args) {\n        editor.execCommand(command);\n      } else if (typeof args === \"number\" || typeof args === \"string\") {\n        console.log(command);\n        console.log(args);\n        editor.execCommand(command, args);\n      } else if (typeof args === \"object\" && !Array.isArray(args)) {\n        var containsNumsStr = true;\n        Object.keys(args).forEach(key => {\n          containsNumsStr = typeof args[key] === \"string\" || typeof args[key] === \"number\" || Array.isArray(args[key]);\n        });\n        if (Object.keys(args).length < 4 && containsNumsStr) {\n          editor.execCommand(command, args);\n        }\n      } else {\n        console.warn(`failed to execute \"${command}\" command!`);\n      }\n    }\n  };\n  const executeAll = commands => {\n    commands.forEach(singleCommand => {\n      if (Array.isArray(singleCommand)) {\n        console.log(\"here\", singleCommand);\n        typeof singleCommand[0] === \"string\" ? execute(singleCommand[0], singleCommand[1]) : console.warn(\"improper command format!\");\n      } else if (typeof singleCommand === \"string\") {\n        execute(singleCommand);\n      } else {\n        console.warn(\"failed to execute command(s)!\");\n      }\n    });\n  };\n  const resetEditor = () => {\n    setCode(args['code']);\n  };\n\n  /**\n  * This method for copying to clipboard uses the \n  * {@link https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API Clipboard API}\n  * which makes use of the asynchronous clipboard read and write methods \n  * and requires that the user grant the web site or app permission to\n  * access the clipboard. The latter can be an issue for streamlit because\n  * it uses http instead of https. \n  * */\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(code);\n      console.log(code);\n    } catch (err) {\n      console.warn('Failed to copy securely -> reverting to unsecure copy');\n      unsecureCopyToClipboard();\n    }\n  };\n\n  /**\n  * This method for copying to clipboard uses .execCommand method\n  * which is depreciated but still supported by most browsers. This\n  * is the same approach for copying that Streamlit's built in CodeBlock\n  * component uses.\n  **/\n  const unsecureCopyToClipboard = () => {\n    const textField = document.createElement('textarea');\n    textField.value = aceEditor.current ? aceEditor.current.editor.getValue() : code;\n    document.body.appendChild(textField);\n    textField.select();\n    document.execCommand('copy');\n    textField.remove();\n  };\n  const unsecureCopyTextToClipboard = text => {\n    const textField = document.createElement('textarea');\n    textField.value = text;\n    document.body.appendChild(textField);\n    textField.select();\n    document.execCommand('copy');\n    textField.remove();\n  };\n  const resizeObserver = new ResizeObserver(entries => {\n    var _entries$0$contentBox;\n    // If we know that the body will always fully contain our component (without cutting it off)\n    // then we can use docuemnt.body height instead\n    Streamlit.setFrameHeight((_entries$0$contentBox = entries[0].contentBoxSize.blockSize) !== null && _entries$0$contentBox !== void 0 ? _entries$0$contentBox : entries[0].contentRect.height);\n  });\n  const observe = divElem => {\n    divElem ? resizeObserver.observe(divElem) : resizeObserver.disconnect();\n  };\n\n  /**\n   * This could also be memoized but I don't think it would be necessary because its not expensive.\n   * @returns {string} themeProp\n   */\n  const themeChoice = () => {\n    const isDarkTheme = theme ? theme.base === \"dark\" : true;\n    switch (args['theme']) {\n      case \"contrast\":\n        return isDarkTheme ? \"streamlit_light\" : \"streamlit_dark\";\n      case \"light\":\n        return \"streamlit_light\";\n      case \"dark\":\n        return \"streamlit_dark\";\n      case \"default\":\n        return isDarkTheme ? \"streamlit_dark\" : \"streamlit_light\";\n      default:\n        return isDarkTheme ? \"streamlit_dark\" : \"streamlit_light\";\n    }\n  };\n  const themeProp = themeChoice();\n  const componentContainerProps = args[\"component_props\"];\n  const {\n    info: infoArg,\n    menu: menuArg,\n    focus: focusArg,\n    ...rest\n  } = args;\n  const editorArgsString = JSON.stringify(rest);\n  const menuArgsString = JSON.stringify(menuArg);\n  const infoArgsString = JSON.stringify(infoArg);\n  const buttonArgsString = JSON.stringify(args['buttons']);\n  const themeString = JSON.stringify(theme);\n  const snippets = JSON.stringify(snippetAddRemove);\n\n  /**\n   * This is the editor component that is rendered. It is memoized so that it is only re-rendered when\n   * the args change. This is important because we should account for the possibility that the editor \n   * is being changed at any given moment. Forced re-renders due to the parent component re-rendering\n   * can impact user experience and responsiveness.\n   */\n  const editor = useMemo(() => {\n    console.log(\"EDITOR RENDERED\");\n    const keybindings = JSON.stringify(keybindingAddRemove);\n    const revertedArgs = JSON.parse(editorArgsString);\n    if (revertedArgs['buttons'].length > 0) {\n      revertedArgs['buttons'].forEach(button => {\n        commands.commands = [...commands.commands, {\n          name: button.name.trim().replace(/\\s+/g, '_') + '_button',\n          description: \"Execute '\" + button.name + \"' button command(s)\",\n          exec: () => {\n            executeAll(button.commands);\n          }\n        }];\n      });\n    }\n    const aceEditorProps = {\n      ...defaultEditorProps,\n      ...revertedArgs['editorProps']\n    };\n    const aceOptions = {\n      ...defaultOptions,\n      ...revertedArgs['options']\n    };\n    const partProps = {\n      setOptions: aceOptions,\n      editorProps: aceEditorProps\n    };\n    const aceProps = {\n      ...defaultProps,\n      ...partProps,\n      ...revertedArgs['props']\n    };\n\n    // if(baseSession.current && aceEditor.current){\n    //   aceEditor.current.editor.setSession(baseSession.current);\n    //   console.log(aceEditor.current.editor.getSession().getValue());\n    // }\n\n    /**\n     * TODO: Remove props from aceProps that we don't want to allow user access to.\n     */\n    return /*#__PURE__*/_jsxDEV(Editor, {\n      editorRef: aceEditor,\n      code: code,\n      lang: revertedArgs['lang'],\n      theme: themeProp,\n      shortcuts: revertedArgs['shortcuts'],\n      snippetString: snippets,\n      commands: commands.commands,\n      keybindingString: keybindings,\n      props: aceProps,\n      onChange: value => onChangeHandler(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 9\n    }, this);\n  }, [editorArgsString, themeProp, snippets, keybindingAddRemove]);\n  const buttons = useMemo(() => {\n    console.log(\"BUTTONS RENDERED\");\n    const revertedButtons = JSON.parse(buttonArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const customButtonTheme = revertedTheme !== null && revertedTheme !== void 0 ? revertedTheme : {};\n    const customButtons = {\n      buttons: revertedButtons !== null && revertedButtons !== void 0 ? revertedButtons : [],\n      name: \"customButtons\"\n    };\n    return /*#__PURE__*/_jsxDEV(ButtonSet, {\n      buttonGroup: customButtons,\n      theme: customButtonTheme,\n      themeProp: themeProp,\n      executeAll: commands => executeAll(commands)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this);\n  }, [buttonArgsString, themeString, themeProp]);\n  const menu = useMemo(() => {\n    console.log(\"MENU RENDERED\");\n    const revertedMenu = JSON.parse(menuArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const menuTheme = revertedTheme !== null && revertedTheme !== void 0 ? revertedTheme : {};\n    return /*#__PURE__*/_jsxDEV(ButtonMenu, {\n      menu: revertedMenu,\n      theme: menuTheme,\n      themeProp: themeProp,\n      executeAll: commands => executeAll(commands)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 7\n    }, this);\n  }, [menuArgsString, themeString, themeProp]);\n  const info = useMemo(() => {\n    console.log(\"INFO RENDERED\");\n    const revertedInfo = JSON.parse(infoArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const infoTheme = revertedTheme !== null && revertedTheme !== void 0 ? revertedTheme : {};\n    return /*#__PURE__*/_jsxDEV(InfoBar, {\n      infoRef: infoTextRef,\n      info: revertedInfo,\n      theme: infoTheme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 7\n    }, this);\n  }, [infoArgsString, themeString]);\n  const globalCSS = useMemo(() => {\n    console.log(\"GLOBAL CSS RENDERED\");\n    return /*#__PURE__*/_jsxDEV(GlobalCSS, {\n      isDisabled: disabled,\n      inject: componentContainerProps.globalCSS\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 7\n    }, this);\n  }, [componentContainerProps.globalCSS]);\n  return /*#__PURE__*/_jsxDEV(_StyledStyledCodeEditor, {\n    ref: observe,\n    style: componentContainerProps.style,\n    className: (_ref3 = \"streamlit_code-editor \" + (theme === null || theme === void 0 ? void 0 : theme.base)) !== null && _ref3 !== void 0 ? _ref3 : \"\",\n    $_css2: componentContainerProps.css,\n    children: [globalCSS, editor, buttons, menu, info]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 636,\n    columnNumber: 5\n  }, this);\n};\n_s(CodeEditor, \"plvIV8XxrV9oWGNTiRAUlAFrJwE=\");\n_c2 = CodeEditor;\nexport default _c3 = withStreamlitConnection(CodeEditor);\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"GlobalCSS\");\n$RefreshReg$(_c2, \"CodeEditor\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"names":["Streamlit","withStreamlitConnection","React","useState","useRef","useEffect","useMemo","ace","Editor","Menu","ButtonMenu","Set","ButtonSet","Info","InfoBar","defaultOptions","maxLines","minLines","fontFamily","cursorStyle","displayIndentGuides","wrap","highlightActiveLine","showPrintMargin","showLineNumbers","foldStyle","autoScrollEditorIntoView","animatedScroll","fadeFoldWidgets","defaultEditorProps","editorProps","$blockScrolling","defaultProps","cursorStart","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","focus","fontSize","navigateToFileEnd","placeholder","readOnly","scrollMargin","setOptions","showGutter","style","tabSize","width","debounceChangePeriod","GlobalCSS","createGlobalStyle","props","isDisabled","inject","StyledCodeEditor","styled","div","CodeEditor","args","disabled","theme","code","setCode","aceEditor","infoTextRef","baseSession","keepFocus","timeoutId","createSnippets","snippetRaw","Array","isArray","map","name","split","c","join","snippetAddRemove","setSnippetAddRemove","keybindingAddRemove","setKeybindingAddRemove","console","log","clearTimeout","current","editor","onChangeHandler","newCode","commands","description","bindKey","win","mac","exec","setComponentValue","type","getValue","unsecureCopyTextToClipboard","resetEditor","document","getElementById","execCommand","keyCode","key","dispatchEvent","KeyboardEvent","innerText","text","classList","add","classToggle","timeout","setTimeout","remove","responseType","snippetManager","require","outgoingMode","getSession","$modeId","pop","snippetText","setSession","snippetsPlusMinus","snippetsPlus","snippetsMinus","snippetsToAdd","snippetsToRemove","langMode","error","snippetConcatText","snippetMap","snip","content","replace","lineCount","match","length","snippetsSession","createEditSession","cursorPos","row","column","moveCursorTo","renderer","scrollCursorIntoView","Autocomplete","for","keybindingsJSON","JSON","parse","keybindings","completer","keyboardHandler","Object","keys","bindkey","stringify","undefined","keybindingsSession","mode","targetQueryString","class","querySelectorAll","forEach","el","toggle","command","querySelector","condition","execute","warn","containsNumsStr","executeAll","singleCommand","copyToClipboard","navigator","clipboard","writeText","err","unsecureCopyToClipboard","textField","createElement","value","body","appendChild","select","resizeObserver","ResizeObserver","entries","setFrameHeight","contentBoxSize","blockSize","contentRect","height","observe","divElem","disconnect","themeChoice","isDarkTheme","base","themeProp","componentContainerProps","info","infoArg","menu","menuArg","focusArg","rest","editorArgsString","menuArgsString","infoArgsString","buttonArgsString","themeString","snippets","revertedArgs","button","trim","aceEditorProps","aceOptions","partProps","aceProps","buttons","revertedButtons","revertedTheme","customButtonTheme","customButtons","revertedMenu","menuTheme","revertedInfo","infoTheme","globalCSS","css"],"sources":["/home/anasbouzid/code-projects/streamlit/custom-components/CodeEditor/code_editor/frontend/src/CodeEditor.tsx"],"sourcesContent":["import {\n  Streamlit,\n  withStreamlitConnection,\n  ComponentProps,\n  Theme,\n} from \"streamlit-component-lib\"\nimport styled, { createGlobalStyle, css } from \"styled-components/macro\"\nimport React, { useState, useRef, useEffect, useMemo } from \"react\"\nimport AceEditor from \"react-ace\";\nimport ace from \"ace-builds\";\nimport { Editor } from './editor';\nimport { Menu as ButtonMenu, Set as ButtonSet, customButton, buttonGroup, Info as InfoBar } from \"./button-menu\"\n\nimport \"ace-builds/webpack-resolver\";\nimport \"ace-builds/src-noconflict/mode-python\";\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/ext-searchbox\";\nimport \"ace-builds/src-noconflict/ext-prompt\";\nimport \"ace-builds/src-noconflict/ext-modelist\";\n\ninterface CodeEditorProps extends ComponentProps {\n  args: any\n  width: number\n  disabled: boolean\n  theme?: Theme\n}\n\nconst defaultOptions = {\n  maxLines: 20,\n  minLines: 20,\n  fontFamily: '\"Source Code Pro\", monospace',\n  cursorStyle: \"smooth\",\n  displayIndentGuides: false,\n  wrap: true,\n  highlightActiveLine: true,\n  showPrintMargin: false,\n  showLineNumbers: false,\n  foldStyle: \"markbegin\",\n  autoScrollEditorIntoView: false,\n  animatedScroll: true,\n  fadeFoldWidgets: true,\n}\n\nconst defaultEditorProps = {\n  editorProps: {\n    $blockScrolling: true\n  }\n}\n\nconst defaultProps = {\n  cursorStart: 1,\n  enableBasicAutocompletion: false,\n  enableLiveAutocompletion: true,\n  enableSnippets: true,\n  focus: false,\n  fontSize: 16,\n  highlightActiveLine: true,\n  navigateToFileEnd: true,\n  placeholder: null,\n  readOnly: false,\n  scrollMargin: [15, 15, 0, 0],\n  setOptions: defaultOptions,\n  showGutter: true,\n  showPrintMargin: false,\n  style: {},\n  tabSize: 4,\n  width: \"auto\",\n  debounceChangePeriod: 250,\n}\n\nconst GlobalCSS = createGlobalStyle<{isDisabled?: boolean, inject: string}>`\n  body {\n    margin: 0;\n    padding: 0;\n    opacity: ${props => props.isDisabled? \"0.5\": \"1\"};\n    pointer-events: ${props => props.isDisabled? \"none\": \"auto\"};\n  }\n  ${props => props.inject}\n`\nconst StyledCodeEditor = styled.div`\n  width: 100%;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  :hover button {\n    opacity: 1;\n    transform: scale(1);\n  }\n  button.always-on {\n    opacity: 1;\n    transform: scale(1);\n    transition: none;\n  }\n  :hover button svg {\n        opacity: 1;\n        transform: scale(1);\n  }\n  :hover button.with-icon span {\n    opacity: 1;\n    transform: scale(1);\n  }\n  button.always-on > span {\n    opacity: 1;\n    transform: scale(1);\n    transition: none;\n  }\n  button.always-on > svg {\n    opacity: 1;\n    transform: scale(1);\n    transition: none;\n  }\n  `;\n\nconst CodeEditor = ({ args, width, disabled, theme }: CodeEditorProps) => {\n\n  //sets code to the initial value every time the component is rendered\n  //to set the initial value once, use a function instead of a value.\n  const [code, setCode] = useState(args['code']);\n  // const [keybindingAddRemove, setKeybindingAddRemove] = useState([\"\",\"\"]);\n\n  const aceEditor = useRef<AceEditor>(null);\n  const infoTextRef = useRef<HTMLSpanElement>(null);\n  const baseSession = useRef<ace.Ace.EditSession | null>(null);\n  const keepFocus = useRef<boolean>(false);\n\n  var timeoutId: NodeJS.Timeout;\n\n  /**\n    * This function takes as input either a snippetText string that is expected\n    * to be already formatted like the text in a SnippetFile or a dictionary or \n    * and array of dictionaries. For the first case, it just returns the input.\n    * For the second and third case, a (SnippetFile format) string is constructed\n    * from the dict(s) and returned. Learn more about snippets {@link  here}\n    * @param snippetRaw snippets to be converted to a single snippetText string\n    * @returns {string} snippetText\n    */\n  const createSnippets = (snippetRaw: string | object | [object]): string => {\n    return (typeof snippetRaw === \"string\" ? snippetRaw : (Array.isArray(snippetRaw) ? snippetRaw : [snippetRaw]).map(({ name, code }) =>\n    ([\n      'snippet ' + name,\n      code.split('\\n')\n        .map((c: string) => '\\t' + c)\n        .join('\\n'),\n    ].join('\\n'))\n    ).join('\\n'))\n  }\n  const [snippetAddRemove, setSnippetAddRemove] = useState({[args['lang']] : [createSnippets(args[\"snippets\"][0]), createSnippets(args[\"snippets\"][1])]});\n  const [keybindingAddRemove, setKeybindingAddRemove] = useState(args['keybindings']);\n\n  useEffect(() => {\n    console.log(\"CodeEditor Mounted>>>>>>>>>>>>>>>>\");\n    return () => {\n      console.log(\"CodeEditor Unmounted<<<<<<<<<<<<<<<<\");\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if(aceEditor.current && keepFocus.current){\n      aceEditor.current.editor.focus();\n      keepFocus.current = false;\n    }\n  }, [keepFocus.current]);\n\n  // To reasons for the useEffect here: \n  //   1. to set the focus on the editor only when the focus argument has changed to true.\n  //   2. to set the focus on the editor after rendering the component at which point, the \n  //      editor should be ready.\n  useEffect(() => {\n    if(aceEditor.current && args['focus']){\n      aceEditor.current.editor.focus();\n    }\n  }, [args['focus']]);\n\n  const onChangeHandler = (newCode: string) => {\n    setCode(newCode);\n  }\n\n  // commands is array containing functions that the editor calls when the bind key is pressed.\n  const commands = { commands: [\n    {\n      name: 'submit', //name for the key binding.\n      description: \"Send 'submit' response\", //description of the command\n      bindKey: { win: 'Ctrl-Enter', mac: 'Command-Enter' }, //key combination used for the command.\n      exec: (editor: ace.Ace.Editor) => {\n        console.log(\"submit keys pressed\")\n        Streamlit.setComponentValue({ type: \"submit\", code: editor.getValue() });\n      }\n    },\n    {\n      name: 'save-state',\n      description: \"Save state\",\n      bindKey: { win: 'Ctrl-Alt-S', mac: 'Command-Alt-S' },\n      exec: (editor: ace.Ace.Editor) => {\n        console.log(\"save state keys pressed\")\n        setCode(editor.getValue());\n      }\n    },\n    {\n      name: 'copyAll',\n      description: \"Copy all text to clipboard\",\n      exec: (editor: ace.Ace.Editor) => {\n        unsecureCopyTextToClipboard(editor.getValue());\n      }\n    },\n    {\n      name: 'reset',\n      exec: () => {\n        resetEditor();\n      }\n    },\n    {\n      name: 'toggleKeyboardShortcuts',\n      exec: (editor: ace.Ace.Editor) => {\n        if(!document.getElementById('kbshortcutmenu')){\n          editor.execCommand('showKeyboardShortcuts');\n        }\n        else {\n          editor.execCommand('simulateKeyPress', {type:\"keydown\", keyCode: 27});\n        }\n      }\n    },\n    {\n      name: 'simulateKeyPress',\n      exec: (editor: ace.Ace.Editor, args: {type: string, key?: string, keyCode?: number}) => {\n        console.log(\"simulateKeyPress called\", args)\n        if(args.key){\n          document.dispatchEvent(new KeyboardEvent(args.type,{'key': args.key})); \n        }\n        else if(args.keyCode){\n          document.dispatchEvent(new KeyboardEvent(args.type,{'keyCode': args.keyCode})); \n        }\n      }\n    },\n    {\n      name: 'infoMessage',\n      description: \"Display message in info bar\",\n      exec: (editor: ace.Ace.Editor, args: {text: string, timeout?: number, classToggle?: string} ) => {\n        if(infoTextRef.current){\n          infoTextRef.current.innerText = args.text;\n          infoTextRef.current.classList.add(args.classToggle || \"\");\n          if(args.timeout){\n            console.log(\"calling set timeout\")\n            timeoutId = setTimeout(() => {\n              console.log(\"settimeout called\");\n              infoTextRef.current?.classList.remove(args.classToggle || \"\");\n            }, args.timeout);\n          }\n\n        }\n      }\n    },\n    {\n      name: 'response', //name for the key binding.\n      description: \"Send custom response\", //description of the command\n      exec: (editor: ace.Ace.Editor, responseType = \"\") => {\n        console.log(\"respond called:\" + responseType);\n        Streamlit.setComponentValue({ type: responseType, code: code });\n      }\n    },\n    {\n      name: 'editSnippets',\n      description: \"Edit snippets\",\n      bindKey: { win: 'Ctrl-Alt-M', mac: 'Command-Alt-M' },\n      exec: (editor: any) => {\n        const snippetManager = ace.require('ace/snippets').snippetManager;\n        console.log(snippetManager);\n        if(baseSession.current){\n          const outgoingMode = editor.getSession().$modeId.split(\"/\").pop();\n          if(outgoingMode === \"snippets\"){\n            const snippetText = editor.getSession().getValue();\n            editor.setSession(baseSession.current);\n            baseSession.current = null;\n            setCode(editor.getSession().getValue());\n            if(outgoingMode === \"snippets\"){}\n            try{\n              console.log(\"parsing snippet file\")\n              const snippetsPlusMinus = snippetText.split(\"###~~~\")[1];\n              const [snippetsPlus, snippetsMinus] = snippetsPlusMinus.split(\"###---\");\n              const snippetsToAdd = snippetsPlus.split(\"###+++\")[1];\n              const snippetsToRemove = snippetsMinus;\n              const langMode = editor.getSession().$modeId.split(\"/\").pop();\n              setSnippetAddRemove({[langMode] : [snippetAddRemove[langMode][0] + snippetsToAdd, snippetAddRemove[langMode][1] + snippetsToRemove]});\n            } catch (error) {\n              editor.execCommand(\"infoMessage\",{text: \"error parsing file, restoring original file\", timeout: 2000, classToggle: \"show\"});\n            }\n          }\n        } else {\n          const langMode = editor.getSession().$modeId.split(\"/\").pop()\n          const snippetConcatText = `\\n###~~~#(DO NOT EDIT THIS LINE)\n# Commented out above are all the snippets that are currently\n# registered for ${args['lang']} mode.\n\\n\\n###+++#(DO NOT EDIT THIS LINE) \\n# Put the snippets you want to add below this line.\\n\\n\\n\\n\n\\n\\n\\n###---#(DO NOT EDIT THIS LINE) \\n# Put the snippets you want to remove below this line.\\n\\n\\n\\n\\n\\n\\n`;\n          const snippetText = \"#\" + createSnippets(snippetManager.snippetMap[langMode].map((snip: any) => ({name: snip.name, code: snip.content}))).replace(/\\n/g, \"\\n#\") + snippetConcatText;\n          // snippetManager.files[editor.getSession().$modeId].snippetText\n          const lineCount = (snippetText.match(/\\n/g) || []).length;\n          baseSession.current = editor.getSession();\n          const snippetsSession = ace.createEditSession(snippetText, \"ace/mode/snippets\");\n          editor.setSession(snippetsSession);\n          const cursorPos = {row: (lineCount - 15)>0? lineCount - 15 : 0, column: 0};\n          editor.moveCursorTo(cursorPos.row, cursorPos.column);\n          editor.renderer.scrollCursorIntoView(cursorPos, 0.5);\n        }\n      }\n    },\n    {\n      name: 'editKeyBindings',\n      description: \"Edit keybindings\",\n      bindKey: { win: 'Ctrl-Alt-B', mac: 'Command-Alt-B' },\n      exec: (editor: any) => {\n        const Autocomplete = ace.require('ace/autocomplete').Autocomplete.for(editor);\n        if(baseSession.current){\n          const outgoingMode = editor.getSession().$modeId.split(\"/\").pop();\n          if(outgoingMode === \"json\"){\n            const keybindingsJSON = editor.getSession().getValue();\n            editor.setSession(baseSession.current);\n            baseSession.current = null;\n            setCode(editor.getSession().getValue());\n            try{\n              console.log(\"parsing keybindings file\");\n              console.log(keybindingsJSON);\n              setKeybindingAddRemove(JSON.parse(keybindingsJSON));\n            } catch (error) {\n              editor.execCommand(\"infoMessage\",{text: \"error parsing file, restoring original file\", timeout: 2000, classToggle: \"show\"});\n            }\n          }\n        } else {\n          const keybindings = {commands: {}, completer: {}};\n          console.log(typeof editor.completer.keyboardHandler.commands);\n          if(editor.completer && editor.completer.keyboardHandler.commands){\n            keybindings.completer = Object.keys(editor.completer.keyboardHandler.commands).map((key: any) => ({bindkey: editor.completer.keyboardHandler.commands[key].bindKey ?? \"\", name: editor.completer.keyboardHandler.commands[key].name}));\n          }\n          if(editor.commands.commands){\n            keybindings.commands = Object.keys(editor.commands.commands).map((key: any) => ({bindkey: editor.commands.commands[key].bindKey ?? \"\", name: editor.commands.commands[key].name}));\n          }\n          const keybindingsJSON = JSON.stringify(keybindings, undefined, 2);\n          baseSession.current = editor.getSession();\n          const keybindingsSession = ace.createEditSession(keybindingsJSON, \"ace/mode/json\");\n          editor.setSession(keybindingsSession);\n        }\n      }\n    },\n    {\n      name: 'exitSession', //name for the key binding.\n      bindKey: { win: 'Esc', mac: 'Esc' },\n      description: \"Return to main session (keep changes)\", //description of the command\n      exec: (editor: any) => {\n        if(baseSession.current){\n          const mode = editor.getSession().$modeId.split(\"/\").pop();\n          if (mode === \"snippets\"){\n            editor.execCommand(\"editSnippets\");\n          }\n          else if (mode === \"json\"){\n            editor.execCommand(\"editKeyBindings\");\n          }\n        }\n      }\n    },\n    {\n      name: 'abandonSession', //name for the key binding.\n      bindKey: { win: 'Ctrl-Alt-Esc', mac: 'Command-Alt-Esc' },\n      description: \"Return to main session (discard changes)\", //description of the command\n      exec: (editor: any) => {\n        if(baseSession.current){\n          editor.setSession(baseSession.current);\n          baseSession.current = null;\n          setCode(editor.getSession().getValue());\n        }\n      }\n    },\n    {\n      name: 'classART', //name for the key binding.\n      description: \"Add/Remove/Toggle class for element\", //description of the command\n      exec: (editor: any, args: {targetQueryString: string, type: string, class: string}) => {\n        if(args.targetQueryString && args.type && args.class){\n          switch(args.type){\n            case \"add\":\n              document.querySelectorAll(args.targetQueryString)?.forEach((el: any) => el.classList.add(args.class));\n              break;\n            case \"remove\":\n              document.querySelectorAll(args.targetQueryString)?.forEach((el: any) => el.classList.remove(args.class));\n              break;\n            case \"toggle\":\n              document.querySelectorAll(args.targetQueryString)?.forEach((el: any) => el.classList.toggle(args.class));\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    },\n    {\n      name: 'conditionalExecute', //name for the key binding.\n      description: \"Execute command if element exists\", //description of the command\n      exec: (editor: any, args: {targetQueryString: string, command: any[], condition?: boolean}) => {\n        console.log(\"conditionalExecute called\");\n        if(args.targetQueryString && args.command && Array.isArray(args.command)){\n          console.log(\"kbshortcut node: \", document.querySelector(args.targetQueryString));\n          if(!(args.condition ?? true) == !document.querySelector(args.targetQueryString)){\n            typeof args.command[0] === \"string\" ? execute(args.command[0], args.command[1]) : console.warn(\"improper command format!\");\n          }\n        }\n      }\n    }\n  ]};\n\n  const execute = (command: string, args: any = \"\") => {\n    const editor = aceEditor.current?.editor;\n    if (editor) {\n      if (!args) {\n        editor.execCommand(command)\n      }\n      else if (typeof args === \"number\" || typeof args === \"string\") {\n        console.log(command);\n        console.log(args);\n        editor.execCommand(command, args);\n      }\n      else if (typeof args === \"object\" && !Array.isArray(args)) {\n        var containsNumsStr = true;\n        Object.keys(args).forEach((key: any) => {\n          containsNumsStr = typeof args[key] === \"string\" || typeof args[key] === \"number\" || Array.isArray(args[key]);\n        });\n        if (Object.keys(args).length < 4 && containsNumsStr) {\n          editor.execCommand(command, args);\n        }\n      }\n      else {\n        console.warn(`failed to execute \"${command}\" command!`);\n      }\n    }\n  }\n\n  const executeAll = (commands: any[]) => {\n    commands.forEach(singleCommand => {\n      if (Array.isArray(singleCommand)) {\n        console.log(\"here\", singleCommand);\n        typeof singleCommand[0] === \"string\" ? execute(singleCommand[0], singleCommand[1]) : console.warn(\"improper command format!\");\n      } else if (typeof singleCommand === \"string\") {\n        execute(singleCommand);\n      } else {\n        console.warn(\"failed to execute command(s)!\");\n      }\n    });\n  }\n\n  const resetEditor = () => {\n    setCode(args['code']);\n  }\n\n  /**\n  * This method for copying to clipboard uses the \n  * {@link https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API Clipboard API}\n  * which makes use of the asynchronous clipboard read and write methods \n  * and requires that the user grant the web site or app permission to\n  * access the clipboard. The latter can be an issue for streamlit because\n  * it uses http instead of https. \n  * */\n  const copyToClipboard = async (): Promise<void> => {\n    try {\n      await navigator.clipboard.writeText(code);\n      console.log(code);\n    } catch (err) {\n      console.warn('Failed to copy securely -> reverting to unsecure copy');\n      unsecureCopyToClipboard();\n    }\n  }\n\n  /**\n  * This method for copying to clipboard uses .execCommand method\n  * which is depreciated but still supported by most browsers. This\n  * is the same approach for copying that Streamlit's built in CodeBlock\n  * component uses.\n  **/\n  const unsecureCopyToClipboard = () => {\n    const textField = document.createElement('textarea');\n    textField.value = aceEditor.current ? aceEditor.current.editor.getValue() : code;\n    document.body.appendChild(textField);\n    textField.select();\n    document.execCommand('copy');\n    textField.remove();\n  }\n\n  const unsecureCopyTextToClipboard = (text: string) => {\n    const textField = document.createElement('textarea');\n    textField.value = text;\n    document.body.appendChild(textField);\n    textField.select();\n    document.execCommand('copy');\n    textField.remove();\n  }\n\n  const resizeObserver = new ResizeObserver((entries: any) => {\n    // If we know that the body will always fully contain our component (without cutting it off)\n    // then we can use docuemnt.body height instead\n    Streamlit.setFrameHeight((entries[0].contentBoxSize.blockSize ?? entries[0].contentRect.height)); \n  })\n\n  const observe = (divElem: any) => {\n    divElem ? resizeObserver.observe(divElem as HTMLDivElement) : resizeObserver.disconnect();\n  }\n\n  /**\n   * This could also be memoized but I don't think it would be necessary because its not expensive.\n   * @returns {string} themeProp\n   */\n  const themeChoice = () => {\n    const isDarkTheme = theme? theme.base === \"dark\" : true;\n    switch (args['theme']) {\n      case \"contrast\":\n        return isDarkTheme? \"streamlit_light\" : \"streamlit_dark\";\n      case \"light\":\n        return \"streamlit_light\";\n      case \"dark\":\n        return \"streamlit_dark\";\n      case \"default\":\n        return isDarkTheme? \"streamlit_dark\" : \"streamlit_light\";\n      default:\n        return isDarkTheme? \"streamlit_dark\" : \"streamlit_light\";\n    }\n  }\n\n  const themeProp = themeChoice();\n  const componentContainerProps = args[\"component_props\"];\n\n  const {info: infoArg, menu: menuArg, focus: focusArg, ...rest} = args;\n  const editorArgsString = JSON.stringify(rest);\n  const menuArgsString = JSON.stringify(menuArg);\n  const infoArgsString = JSON.stringify(infoArg);\n  const buttonArgsString = JSON.stringify(args['buttons']);\n  const themeString = JSON.stringify(theme);\n  const snippets = JSON.stringify(snippetAddRemove);\n\n  /**\n   * This is the editor component that is rendered. It is memoized so that it is only re-rendered when\n   * the args change. This is important because we should account for the possibility that the editor \n   * is being changed at any given moment. Forced re-renders due to the parent component re-rendering\n   * can impact user experience and responsiveness.\n   */\n  const editor = useMemo(() => {\n    console.log(\"EDITOR RENDERED\");\n    const keybindings = JSON.stringify(keybindingAddRemove);\n    const revertedArgs = JSON.parse(editorArgsString);\n    if(revertedArgs['buttons'].length > 0) {\n      revertedArgs['buttons'].forEach((button: any) => {\n          commands.commands = [...commands.commands, {\n            name: (button.name as string).trim().replace(/\\s+/g, '_') + '_button',\n            description: \"Execute '\" + button.name + \"' button command(s)\",\n            exec: () => {\n            executeAll(button.commands);\n          }}];\n      });\n    }\n    const aceEditorProps = { ...defaultEditorProps, ...revertedArgs['editorProps'] };\n    const aceOptions = { ...defaultOptions, ...revertedArgs['options'] };\n    const partProps = { setOptions: aceOptions, editorProps: aceEditorProps };\n    const aceProps = { ...defaultProps, ...partProps, ...revertedArgs['props'] };\n\n    // if(baseSession.current && aceEditor.current){\n    //   aceEditor.current.editor.setSession(baseSession.current);\n    //   console.log(aceEditor.current.editor.getSession().getValue());\n    // }\n\n    /**\n     * TODO: Remove props from aceProps that we don't want to allow user access to.\n     */\n    return (\n        <Editor\n         editorRef={aceEditor}\n         code={code} \n         lang={revertedArgs['lang']} \n         theme={themeProp} \n         shortcuts={revertedArgs['shortcuts']} \n         snippetString={snippets} \n         commands={commands.commands} \n         keybindingString={keybindings} \n         props={aceProps} \n         onChange={(value) => onChangeHandler(value)} />\n      );\n  }, [editorArgsString, themeProp, snippets, keybindingAddRemove]);\n\n  const buttons = useMemo(() => {\n    console.log(\"BUTTONS RENDERED\");\n    const revertedButtons = JSON.parse(buttonArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const customButtonTheme = revertedTheme ?? {};\n    const customButtons = {buttons: (revertedButtons ?? []) as customButton[], name: \"customButtons\"} as buttonGroup;\n    return (\n      < ButtonSet\n       buttonGroup={customButtons} \n       theme={customButtonTheme} \n       themeProp={themeProp} \n       executeAll={(commands) => executeAll(commands)} />\n    );\n  }, [buttonArgsString, themeString, themeProp]);\n\n  const menu = useMemo(() => {\n    console.log(\"MENU RENDERED\");\n    const revertedMenu = JSON.parse(menuArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const menuTheme = revertedTheme ?? {};\n    return (\n      <ButtonMenu\n       menu={revertedMenu} \n       theme={menuTheme} \n       themeProp={themeProp} \n       executeAll={(commands) => executeAll(commands)} />\n    );\n  }, [menuArgsString, themeString, themeProp]);\n\n  const info = useMemo(() => {\n    console.log(\"INFO RENDERED\");\n    const revertedInfo = JSON.parse(infoArgsString);\n    const revertedTheme = JSON.parse(themeString);\n    const infoTheme = revertedTheme ?? {};\n    return (\n      <InfoBar\n       infoRef={infoTextRef} \n       info={revertedInfo} \n       theme={infoTheme} />\n    );\n  }, [infoArgsString, themeString]);\n\n  const globalCSS = useMemo(() => {\n    console.log(\"GLOBAL CSS RENDERED\");\n    return (\n      <GlobalCSS isDisabled={disabled} inject={componentContainerProps.globalCSS} />\n    );\n  }, [componentContainerProps.globalCSS]);\n\n  return (\n    <StyledCodeEditor ref={observe} style={componentContainerProps.style} css={componentContainerProps.css} className={\"streamlit_code-editor \" + theme?.base ?? \"\" } >\n      {globalCSS}\n      {editor}\n      {buttons}\n      {menu}\n      {info}\n    </StyledCodeEditor>\n  )\n}\n\nexport default withStreamlitConnection(CodeEditor)"],"mappings":"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"},"metadata":{},"sourceType":"module"}