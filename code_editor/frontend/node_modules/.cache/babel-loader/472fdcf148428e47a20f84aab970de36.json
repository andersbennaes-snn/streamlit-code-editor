{"ast":null,"code":"ace.define(\"ace/snippets\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/lib/oop\", \"ace/lib/event_emitter\", \"ace/lib/lang\", \"ace/range\", \"ace/range_list\", \"ace/keyboard/hash_handler\", \"ace/tokenizer\", \"ace/clipboard\", \"ace/editor\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"./lib/dom\");\n  var oop = require(\"./lib/oop\");\n  var EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n  var lang = require(\"./lib/lang\");\n  var Range = require(\"./range\").Range;\n  var RangeList = require(\"./range_list\").RangeList;\n  var HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\n  var Tokenizer = require(\"./tokenizer\").Tokenizer;\n  var clipboard = require(\"./clipboard\");\n  var VARIABLES = {\n    CURRENT_WORD: function (editor) {\n      return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n      var text = editor.session.getTextRange();\n      if (indentation) return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n      return text;\n    },\n    CURRENT_LINE: function (editor) {\n      return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n      return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n      return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n      return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n      return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n      return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n      return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n      return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) {\n      return \"/not implemented.txt\";\n    },\n    WORKSPACE_NAME: function () {\n      return \"Unknown\";\n    },\n    FULLNAME: function () {\n      return \"Unknown\";\n    },\n    BLOCK_COMMENT_START: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, {\n      year: \"numeric\"\n    }),\n    CURRENT_YEAR_SHORT: date.bind(null, {\n      year: \"2-digit\"\n    }),\n    CURRENT_MONTH: date.bind(null, {\n      month: \"numeric\"\n    }),\n    CURRENT_MONTH_NAME: date.bind(null, {\n      month: \"long\"\n    }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, {\n      month: \"short\"\n    }),\n    CURRENT_DATE: date.bind(null, {\n      day: \"2-digit\"\n    }),\n    CURRENT_DAY_NAME: date.bind(null, {\n      weekday: \"long\"\n    }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, {\n      weekday: \"short\"\n    }),\n    CURRENT_HOUR: date.bind(null, {\n      hour: \"2-digit\",\n      hour12: false\n    }),\n    CURRENT_MINUTE: date.bind(null, {\n      minute: \"2-digit\"\n    }),\n    CURRENT_SECOND: date.bind(null, {\n      second: \"2-digit\"\n    })\n  };\n  VARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\n  function date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n  }\n  var SnippetManager = function () {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n  };\n  (function () {\n    oop.implement(this, EventEmitter);\n    this.getTokenizer = function () {\n      return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    this.createTokenizer = function () {\n      function TabstopToken(str) {\n        str = str.substr(1);\n        if (/^\\d+$/.test(str)) return [{\n          tabstopId: parseInt(str, 10)\n        }];\n        return [{\n          text: str\n        }];\n      }\n      function escape(ch) {\n        return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n      }\n      var formatMatcher = {\n        regex: \"/(\" + escape(\"/\") + \"+)/\",\n        onMatch: function (val, state, stack) {\n          var ts = stack[0];\n          ts.fmtString = true;\n          ts.guard = val.slice(1, -1);\n          ts.flag = \"\";\n          return \"\";\n        },\n        next: \"formatString\"\n      };\n      SnippetManager.$tokenizer = new Tokenizer({\n        start: [{\n          regex: /\\\\./,\n          onMatch: function (val, state, stack) {\n            var ch = val[1];\n            if (ch == \"}\" && stack.length) {\n              val = ch;\n            } else if (\"`$\\\\\".indexOf(ch) != -1) {\n              val = ch;\n            }\n            return [val];\n          }\n        }, {\n          regex: /}/,\n          onMatch: function (val, state, stack) {\n            return [stack.length ? stack.shift() : val];\n          }\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: TabstopToken\n        }, {\n          regex: /\\$\\{[\\dA-Z_a-z]+/,\n          onMatch: function (str, state, stack) {\n            var t = TabstopToken(str.substr(1));\n            stack.unshift(t[0]);\n            return t;\n          },\n          next: \"snippetVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }],\n        snippetVar: [{\n          regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\",\n          onMatch: function (val, state, stack) {\n            var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n              return operator.length == 2 ? operator[1] : \"\\x00\";\n            }).split(\"\\x00\").map(function (value) {\n              return {\n                value: value\n              };\n            });\n            stack[0].choices = choices;\n            return [choices[0]];\n          },\n          next: \"start\"\n        }, formatMatcher, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"start\"\n        }],\n        formatString: [{\n          regex: /:/,\n          onMatch: function (val, state, stack) {\n            if (stack.length && stack[0].expectElse) {\n              stack[0].expectElse = false;\n              stack[0].ifEnd = {\n                elseEnd: stack[0]\n              };\n              return [stack[0].ifEnd];\n            }\n            return \":\";\n          }\n        }, {\n          regex: /\\\\./,\n          onMatch: function (val, state, stack) {\n            var ch = val[1];\n            if (ch == \"}\" && stack.length) val = ch;else if (\"`$\\\\\".indexOf(ch) != -1) val = ch;else if (ch == \"n\") val = \"\\n\";else if (ch == \"t\") val = \"\\t\";else if (\"ulULE\".indexOf(ch) != -1) val = {\n              changeCase: ch,\n              local: ch > \"a\"\n            };\n            return [val];\n          }\n        }, {\n          regex: \"/\\\\w*}\",\n          onMatch: function (val, state, stack) {\n            var next = stack.shift();\n            if (next) next.flag = val.slice(1, -1);\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: function (val, state, stack) {\n            return [{\n              text: val.slice(1)\n            }];\n          }\n        }, {\n          regex: /\\${\\w+/,\n          onMatch: function (val, state, stack) {\n            var token = {\n              text: val.slice(2)\n            };\n            stack.unshift(token);\n            return [token];\n          },\n          next: \"formatStringVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }, {\n          regex: /}/,\n          onMatch: function (val, state, stack) {\n            var next = stack.shift();\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }],\n        formatStringVar: [{\n          regex: /:\\/\\w+}/,\n          onMatch: function (val, state, stack) {\n            var ts = stack[0];\n            ts.formatFunction = val.slice(2, -1);\n            return [stack.shift()];\n          },\n          next: \"formatString\"\n        }, formatMatcher, {\n          regex: /:[\\?\\-+]?/,\n          onMatch: function (val, state, stack) {\n            if (val[1] == \"+\") stack[0].ifEnd = stack[0];\n            if (val[1] == \"?\") stack[0].expectElse = true;\n          },\n          next: \"formatString\"\n        }, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"formatString\"\n        }]\n      });\n      return SnippetManager.$tokenizer;\n    };\n    this.tokenizeTmSnippet = function (str, startState) {\n      return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n        return x.value || x;\n      });\n    };\n    this.getVariableValue = function (editor, name, indentation) {\n      if (/^\\d+$/.test(name)) return (this.variables.__ || {})[name] || \"\";\n      if (/^[A-Z]\\d+$/.test(name)) return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n      name = name.replace(/^TM_/, \"\");\n      if (!this.variables.hasOwnProperty(name)) return \"\";\n      var value = this.variables[name];\n      if (typeof value == \"function\") value = this.variables[name](editor, name, indentation);\n      return value == null ? \"\" : value;\n    };\n    this.variables = VARIABLES;\n    this.tmStrFormat = function (str, ch, editor) {\n      if (!ch.fmt) return str;\n      var flag = ch.flag || \"\";\n      var re = ch.guard;\n      re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n      var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n      var _self = this;\n      var formatted = str.replace(re, function () {\n        var oldArgs = _self.variables.__;\n        _self.variables.__ = [].slice.call(arguments);\n        var fmtParts = _self.resolveVariables(fmtTokens, editor);\n        var gChangeCase = \"E\";\n        for (var i = 0; i < fmtParts.length; i++) {\n          var ch = fmtParts[i];\n          if (typeof ch == \"object\") {\n            fmtParts[i] = \"\";\n            if (ch.changeCase && ch.local) {\n              var next = fmtParts[i + 1];\n              if (next && typeof next == \"string\") {\n                if (ch.changeCase == \"u\") fmtParts[i] = next[0].toUpperCase();else fmtParts[i] = next[0].toLowerCase();\n                fmtParts[i + 1] = next.substr(1);\n              }\n            } else if (ch.changeCase) {\n              gChangeCase = ch.changeCase;\n            }\n          } else if (gChangeCase == \"U\") {\n            fmtParts[i] = ch.toUpperCase();\n          } else if (gChangeCase == \"L\") {\n            fmtParts[i] = ch.toLowerCase();\n          }\n        }\n        _self.variables.__ = oldArgs;\n        return fmtParts.join(\"\");\n      });\n      return formatted;\n    };\n    this.tmFormatFunction = function (str, ch, editor) {\n      if (ch.formatFunction == \"upcase\") return str.toUpperCase();\n      if (ch.formatFunction == \"downcase\") return str.toLowerCase();\n      return str;\n    };\n    this.resolveVariables = function (snippet, editor) {\n      var result = [];\n      var indentation = \"\";\n      var afterNewLine = true;\n      for (var i = 0; i < snippet.length; i++) {\n        var ch = snippet[i];\n        if (typeof ch == \"string\") {\n          result.push(ch);\n          if (ch == \"\\n\") {\n            afterNewLine = true;\n            indentation = \"\";\n          } else if (afterNewLine) {\n            indentation = /^\\t*/.exec(ch)[0];\n            afterNewLine = /\\S/.test(ch);\n          }\n          continue;\n        }\n        if (!ch) continue;\n        afterNewLine = false;\n        if (ch.fmtString) {\n          var j = snippet.indexOf(ch, i + 1);\n          if (j == -1) j = snippet.length;\n          ch.fmt = snippet.slice(i + 1, j);\n          i = j;\n        }\n        if (ch.text) {\n          var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n          if (ch.fmtString) value = this.tmStrFormat(value, ch, editor);\n          if (ch.formatFunction) value = this.tmFormatFunction(value, ch, editor);\n          if (value && !ch.ifEnd) {\n            result.push(value);\n            gotoNext(ch);\n          } else if (!value && ch.ifEnd) {\n            gotoNext(ch.ifEnd);\n          }\n        } else if (ch.elseEnd) {\n          gotoNext(ch.elseEnd);\n        } else if (ch.tabstopId != null) {\n          result.push(ch);\n        } else if (ch.changeCase != null) {\n          result.push(ch);\n        }\n      }\n      function gotoNext(ch) {\n        var i1 = snippet.indexOf(ch, i + 1);\n        if (i1 != -1) i = i1;\n      }\n      return result;\n    };\n    this.insertSnippetForSelection = function (editor, snippetText) {\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var tabString = editor.session.getTabString();\n      var indentString = line.match(/^\\s*/)[0];\n      if (cursor.column < indentString.length) indentString = indentString.slice(0, cursor.column);\n      snippetText = snippetText.replace(/\\r/g, \"\");\n      var tokens = this.tokenizeTmSnippet(snippetText);\n      tokens = this.resolveVariables(tokens, editor);\n      tokens = tokens.map(function (x) {\n        if (x == \"\\n\") return x + indentString;\n        if (typeof x == \"string\") return x.replace(/\\t/g, tabString);\n        return x;\n      });\n      var tabstops = [];\n      tokens.forEach(function (p, i) {\n        if (typeof p != \"object\") return;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        if (!ts) {\n          ts = tabstops[id] = [];\n          ts.index = id;\n          ts.value = \"\";\n          ts.parents = {};\n        }\n        if (ts.indexOf(p) !== -1) return;\n        if (p.choices && !ts.choices) ts.choices = p.choices;\n        ts.push(p);\n        var i1 = tokens.indexOf(p, i + 1);\n        if (i1 === -1) return;\n        var value = tokens.slice(i + 1, i1);\n        var isNested = value.some(function (t) {\n          return typeof t === \"object\";\n        });\n        if (isNested && !ts.value) {\n          ts.value = value;\n        } else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n          ts.value = value.join(\"\");\n        }\n      });\n      tabstops.forEach(function (ts) {\n        ts.length = 0;\n      });\n      var expanding = {};\n      function copyValue(val) {\n        var copy = [];\n        for (var i = 0; i < val.length; i++) {\n          var p = val[i];\n          if (typeof p == \"object\") {\n            if (expanding[p.tabstopId]) continue;\n            var j = val.lastIndexOf(p, i - 1);\n            p = copy[j] || {\n              tabstopId: p.tabstopId\n            };\n          }\n          copy[i] = p;\n        }\n        return copy;\n      }\n      for (var i = 0; i < tokens.length; i++) {\n        var p = tokens[i];\n        if (typeof p != \"object\") continue;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        var i1 = tokens.indexOf(p, i + 1);\n        if (expanding[id]) {\n          if (expanding[id] === p) {\n            delete expanding[id];\n            Object.keys(expanding).forEach(function (parentId) {\n              ts.parents[parentId] = true;\n            });\n          }\n          continue;\n        }\n        expanding[id] = p;\n        var value = ts.value;\n        if (typeof value !== \"string\") value = copyValue(value);else if (p.fmt) value = this.tmStrFormat(value, p, editor);\n        tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n        if (ts.indexOf(p) === -1) ts.push(p);\n      }\n      var row = 0,\n        column = 0;\n      var text = \"\";\n      tokens.forEach(function (t) {\n        if (typeof t === \"string\") {\n          var lines = t.split(\"\\n\");\n          if (lines.length > 1) {\n            column = lines[lines.length - 1].length;\n            row += lines.length - 1;\n          } else column += t.length;\n          text += t;\n        } else if (t) {\n          if (!t.start) t.start = {\n            row: row,\n            column: column\n          };else t.end = {\n            row: row,\n            column: column\n          };\n        }\n      });\n      var range = editor.getSelectionRange();\n      var end = editor.session.replace(range, text);\n      var tabstopManager = new TabstopManager(editor);\n      var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n      tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    this.insertSnippet = function (editor, snippetText) {\n      var self = this;\n      if (editor.inVirtualSelectionMode) return self.insertSnippetForSelection(editor, snippetText);\n      editor.forEachSelection(function () {\n        self.insertSnippetForSelection(editor, snippetText);\n      }, null, {\n        keepOrder: true\n      });\n      if (editor.tabstopManager) editor.tabstopManager.tabNext();\n    };\n    this.$getScope = function (editor) {\n      var scope = editor.session.$mode.$id || \"\";\n      scope = scope.split(\"/\").pop();\n      if (scope === \"html\" || scope === \"php\") {\n        if (scope === \"php\" && !editor.session.$mode.inlinePhp) scope = \"html\";\n        var c = editor.getCursorPosition();\n        var state = editor.session.getState(c.row);\n        if (typeof state === \"object\") {\n          state = state[0];\n        }\n        if (state.substring) {\n          if (state.substring(0, 3) == \"js-\") scope = \"javascript\";else if (state.substring(0, 4) == \"css-\") scope = \"css\";else if (state.substring(0, 4) == \"php-\") scope = \"php\";\n        }\n      }\n      return scope;\n    };\n    this.getActiveScopes = function (editor) {\n      var scope = this.$getScope(editor);\n      var scopes = [scope];\n      var snippetMap = this.snippetMap;\n      if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n        scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n      }\n      scopes.push(\"_\");\n      return scopes;\n    };\n    this.expandWithTab = function (editor, options) {\n      var self = this;\n      var result = editor.forEachSelection(function () {\n        return self.expandSnippetForSelection(editor, options);\n      }, null, {\n        keepOrder: true\n      });\n      if (result && editor.tabstopManager) editor.tabstopManager.tabNext();\n      return result;\n    };\n    this.expandSnippetForSelection = function (editor, options) {\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var before = line.substring(0, cursor.column);\n      var after = line.substr(cursor.column);\n      var snippetMap = this.snippetMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = this.findMatchingSnippet(snippets, before, after);\n        return !!snippet;\n      }, this);\n      if (!snippet) return false;\n      if (options && options.dryRun) return true;\n      editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n      this.variables.M__ = snippet.matchBefore;\n      this.variables.T__ = snippet.matchAfter;\n      this.insertSnippetForSelection(editor, snippet.content);\n      this.variables.M__ = this.variables.T__ = null;\n      return true;\n    };\n    this.findMatchingSnippet = function (snippetList, before, after) {\n      for (var i = snippetList.length; i--;) {\n        var s = snippetList[i];\n        if (s.startRe && !s.startRe.test(before)) continue;\n        if (s.endRe && !s.endRe.test(after)) continue;\n        if (!s.startRe && !s.endRe) continue;\n        s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n        s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n        s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n        s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n        return s;\n      }\n    };\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n      var self = this;\n      if (!snippets) snippets = [];\n      function wrapRegexp(src) {\n        if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src)) src = \"(?:\" + src + \")\";\n        return src || \"\";\n      }\n      function guardedRegexp(re, guard, opening) {\n        re = wrapRegexp(re);\n        guard = wrapRegexp(guard);\n        if (opening) {\n          re = guard + re;\n          if (re && re[re.length - 1] != \"$\") re = re + \"$\";\n        } else {\n          re = re + guard;\n          if (re && re[0] != \"^\") re = \"^\" + re;\n        }\n        return new RegExp(re);\n      }\n      function addSnippet(s) {\n        if (!s.scope) s.scope = scope || \"_\";\n        scope = s.scope;\n        if (!snippetMap[scope]) {\n          snippetMap[scope] = [];\n          snippetNameMap[scope] = {};\n        }\n        var map = snippetNameMap[scope];\n        if (s.name) {\n          var old = map[s.name];\n          if (old) self.unregister(old);\n          map[s.name] = s;\n        }\n        snippetMap[scope].push(s);\n        if (s.prefix) s.tabTrigger = s.prefix;\n        if (!s.content && s.body) s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n        if (s.tabTrigger && !s.trigger) {\n          if (!s.guard && /^\\w/.test(s.tabTrigger)) s.guard = \"\\\\b\";\n          s.trigger = lang.escapeRegExp(s.tabTrigger);\n        }\n        if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard) return;\n        s.startRe = guardedRegexp(s.trigger, s.guard, true);\n        s.triggerRe = new RegExp(s.trigger);\n        s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n        s.endTriggerRe = new RegExp(s.endTrigger);\n      }\n      if (Array.isArray(snippets)) {\n        snippets.forEach(addSnippet);\n      } else {\n        Object.keys(snippets).forEach(function (key) {\n          addSnippet(snippets[key]);\n        });\n      }\n      this._signal(\"registerSnippets\", {\n        scope: scope\n      });\n    };\n    this.unregister = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n      function removeSnippet(s) {\n        var nameMap = snippetNameMap[s.scope || scope];\n        if (nameMap && nameMap[s.name]) {\n          delete nameMap[s.name];\n          var map = snippetMap[s.scope || scope];\n          var i = map && map.findIndex(s);\n          if (i >= 0) {\n            console.log(\"SPLICING!!!!!\");\n            console.log(i);\n            map.splice(i, 1);\n            console.log(map);\n          }\n        }\n      }\n      if (snippets.content) removeSnippet(snippets);else if (Array.isArray(snippets)) snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function (str) {\n      str = str.replace(/\\r/g, \"\");\n      var list = [],\n        snippet = {};\n      var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n      var m;\n      while (m = re.exec(str)) {\n        if (m[1]) {\n          try {\n            snippet = JSON.parse(m[1]);\n            list.push(snippet);\n          } catch (e) {}\n        }\n        if (m[4]) {\n          snippet.content = m[4].replace(/^\\t/gm, \"\");\n          list.push(snippet);\n          snippet = {};\n        } else {\n          var key = m[2],\n            val = m[3];\n          if (key == \"regex\") {\n            var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n            snippet.guard = guardRe.exec(val)[1];\n            snippet.trigger = guardRe.exec(val)[1];\n            snippet.endTrigger = guardRe.exec(val)[1];\n            snippet.endGuard = guardRe.exec(val)[1];\n          } else if (key == \"snippet\") {\n            snippet.tabTrigger = val.match(/^\\S*/)[0];\n            if (!snippet.name) snippet.name = val;\n          } else if (key) {\n            snippet[key] = val;\n          }\n        }\n      }\n      return list;\n    };\n    this.getSnippetByName = function (name, editor) {\n      var snippetMap = this.snippetNameMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = snippets[name];\n        return !!snippet;\n      }, this);\n      return snippet;\n    };\n  }).call(SnippetManager.prototype);\n  var TabstopManager = function (editor) {\n    if (editor.tabstopManager) return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n  };\n  (function () {\n    this.attach = function (editor) {\n      this.index = 0;\n      this.ranges = [];\n      this.tabstops = [];\n      this.$openTabstops = null;\n      this.selectedTabstop = null;\n      this.editor = editor;\n      this.editor.on(\"change\", this.$onChange);\n      this.editor.on(\"changeSelection\", this.$onChangeSelection);\n      this.editor.on(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function () {\n      this.tabstops.forEach(this.removeTabstopMarkers, this);\n      this.ranges = null;\n      this.tabstops = null;\n      this.selectedTabstop = null;\n      this.editor.removeListener(\"change\", this.$onChange);\n      this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n      this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n      this.editor.tabstopManager = null;\n      this.editor = null;\n    };\n    this.onChange = function (delta) {\n      var isRemove = delta.action[0] == \"r\";\n      var selectedTabstop = this.selectedTabstop || {};\n      var parents = selectedTabstop.parents || {};\n      var tabstops = (this.tabstops || []).slice();\n      for (var i = 0; i < tabstops.length; i++) {\n        var ts = tabstops[i];\n        var active = ts == selectedTabstop || parents[ts.index];\n        ts.rangeList.$bias = active ? 0 : 1;\n        if (delta.action == \"remove\" && ts !== selectedTabstop) {\n          var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n          var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n          startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n          var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n          endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n          var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n          for (var j = 0; j < toRemove.length; j++) this.removeRange(toRemove[j]);\n        }\n        ts.rangeList.$onChange(delta);\n      }\n      var session = this.editor.session;\n      if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue()) this.detach();\n    };\n    this.updateLinkedFields = function () {\n      var ts = this.selectedTabstop;\n      if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked) return;\n      this.$inChange = true;\n      var session = this.editor.session;\n      var text = session.getTextRange(ts.firstNonLinked);\n      for (var i = 0; i < ts.length; i++) {\n        var range = ts[i];\n        if (!range.linked) continue;\n        var original = range.original;\n        var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n        session.replace(range, fmt);\n      }\n      this.$inChange = false;\n    };\n    this.onAfterExec = function (e) {\n      if (e.command && !e.command.readOnly) this.updateLinkedFields();\n    };\n    this.onChangeSelection = function () {\n      if (!this.editor) return;\n      var lead = this.editor.selection.lead;\n      var anchor = this.editor.selection.anchor;\n      var isEmpty = this.editor.selection.isEmpty();\n      for (var i = 0; i < this.ranges.length; i++) {\n        if (this.ranges[i].linked) continue;\n        var containsLead = this.ranges[i].contains(lead.row, lead.column);\n        var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n        if (containsLead && containsAnchor) return;\n      }\n      this.detach();\n    };\n    this.onChangeSession = function () {\n      this.detach();\n    };\n    this.tabNext = function (dir) {\n      var max = this.tabstops.length;\n      var index = this.index + (dir || 1);\n      index = Math.min(Math.max(index, 1), max);\n      if (index == max) index = 0;\n      this.selectTabstop(index);\n      if (index === 0) this.detach();\n    };\n    this.selectTabstop = function (index) {\n      this.$openTabstops = null;\n      var ts = this.tabstops[this.index];\n      if (ts) this.addTabstopMarkers(ts);\n      this.index = index;\n      ts = this.tabstops[this.index];\n      if (!ts || !ts.length) return;\n      this.selectedTabstop = ts;\n      var range = ts.firstNonLinked || ts;\n      if (ts.choices) range.cursor = range.start;\n      if (!this.editor.inVirtualSelectionMode) {\n        var sel = this.editor.multiSelect;\n        sel.toSingleRange(range);\n        for (var i = 0; i < ts.length; i++) {\n          if (ts.hasLinkedRanges && ts[i].linked) continue;\n          sel.addRange(ts[i].clone(), true);\n        }\n      } else {\n        this.editor.selection.fromOrientedRange(range);\n      }\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n      if (this.selectedTabstop && this.selectedTabstop.choices) this.editor.execCommand(\"startAutocomplete\", {\n        matches: this.selectedTabstop.choices\n      });\n    };\n    this.addTabstops = function (tabstops, start, end) {\n      var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n      if (!this.$openTabstops) this.$openTabstops = [];\n      if (!tabstops[0]) {\n        var p = Range.fromPoints(end, end);\n        moveRelative(p.start, start);\n        moveRelative(p.end, start);\n        tabstops[0] = [p];\n        tabstops[0].index = 0;\n      }\n      var i = this.index;\n      var arg = [i + 1, 0];\n      var ranges = this.ranges;\n      tabstops.forEach(function (ts, index) {\n        var dest = this.$openTabstops[index] || ts;\n        for (var i = 0; i < ts.length; i++) {\n          var p = ts[i];\n          var range = Range.fromPoints(p.start, p.end || p.start);\n          movePoint(range.start, start);\n          movePoint(range.end, start);\n          range.original = p;\n          range.tabstop = dest;\n          ranges.push(range);\n          if (dest != ts) dest.unshift(range);else dest[i] = range;\n          if (p.fmtString || dest.firstNonLinked && useLink) {\n            range.linked = true;\n            dest.hasLinkedRanges = true;\n          } else if (!dest.firstNonLinked) dest.firstNonLinked = range;\n        }\n        if (!dest.firstNonLinked) dest.hasLinkedRanges = false;\n        if (dest === ts) {\n          arg.push(dest);\n          this.$openTabstops[index] = dest;\n        }\n        this.addTabstopMarkers(dest);\n        dest.rangeList = dest.rangeList || new RangeList();\n        dest.rangeList.$bias = 0;\n        dest.rangeList.addList(dest);\n      }, this);\n      if (arg.length > 2) {\n        if (this.tabstops.length) arg.push(arg.splice(2, 1)[0]);\n        this.tabstops.splice.apply(this.tabstops, arg);\n      }\n    };\n    this.addTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        if (!range.markerId) range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n      });\n    };\n    this.removeTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        session.removeMarker(range.markerId);\n        range.markerId = null;\n      });\n    };\n    this.removeRange = function (range) {\n      var i = range.tabstop.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      i = this.ranges.indexOf(range);\n      if (i != -1) this.ranges.splice(i, 1);\n      i = range.tabstop.rangeList.ranges.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      this.editor.session.removeMarker(range.markerId);\n      if (!range.tabstop.length) {\n        i = this.tabstops.indexOf(range.tabstop);\n        if (i != -1) this.tabstops.splice(i, 1);\n        if (!this.tabstops.length) this.detach();\n      }\n    };\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n      \"Tab\": function (editor) {\n        if (exports.snippetManager && exports.snippetManager.expandWithTab(editor)) return;\n        editor.tabstopManager.tabNext(1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Shift-Tab\": function (editor) {\n        editor.tabstopManager.tabNext(-1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Esc\": function (editor) {\n        editor.tabstopManager.detach();\n      }\n    });\n  }).call(TabstopManager.prototype);\n  var movePoint = function (point, diff) {\n    if (point.row == 0) point.column += diff.column;\n    point.row += diff.row;\n  };\n  var moveRelative = function (point, start) {\n    if (point.row == start.row) point.column -= start.column;\n    point.row -= start.row;\n  };\n  dom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\n  exports.snippetManager = new SnippetManager();\n  var Editor = require(\"./editor\").Editor;\n  (function () {\n    this.insertSnippet = function (content, options) {\n      return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n      return exports.snippetManager.expandWithTab(this, options);\n    };\n  }).call(Editor.prototype);\n});\nace.define(\"ace/autocomplete/popup\", [\"require\", \"exports\", \"module\", \"ace/virtual_renderer\", \"ace/editor\", \"ace/range\", \"ace/lib/event\", \"ace/lib/lang\", \"ace/lib/dom\"], function (require, exports, module) {\n  \"use strict\";\n\n  var Renderer = require(\"../virtual_renderer\").VirtualRenderer;\n  var Editor = require(\"../editor\").Editor;\n  var Range = require(\"../range\").Range;\n  var event = require(\"../lib/event\");\n  var lang = require(\"../lib/lang\");\n  var dom = require(\"../lib/dom\");\n  var getAriaId = function (index) {\n    return \"suggest-aria-id:\".concat(index);\n  };\n  var $singleLineEditor = function (el) {\n    var renderer = new Renderer(el);\n    renderer.$maxLines = 4;\n    var editor = new Editor(renderer);\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n    return editor;\n  };\n  var AcePopup = function (parentNode) {\n    var el = dom.createElement(\"div\");\n    var popup = new $singleLineEditor(el);\n    if (parentNode) parentNode.appendChild(el);\n    el.style.display = \"none\";\n    popup.renderer.content.style.cursor = \"default\";\n    popup.renderer.setStyle(\"ace_autocomplete\");\n    popup.renderer.container.setAttribute(\"role\", \"listbox\");\n    popup.renderer.container.setAttribute(\"aria-label\", \"Autocomplete suggestions\");\n    popup.setOption(\"displayIndentGuides\", false);\n    popup.setOption(\"dragDelay\", 150);\n    var noop = function () {};\n    popup.focus = noop;\n    popup.$isFocused = true;\n    popup.renderer.$cursorLayer.restartTimer = noop;\n    popup.renderer.$cursorLayer.element.style.opacity = 0;\n    popup.renderer.$maxLines = 8;\n    popup.renderer.$keepTextAreaAtCursor = false;\n    popup.setHighlightActiveLine(false);\n    popup.session.highlight(\"\");\n    popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n    popup.on(\"mousedown\", function (e) {\n      var pos = e.getDocumentPosition();\n      popup.selection.moveToPosition(pos);\n      selectionMarker.start.row = selectionMarker.end.row = pos.row;\n      e.stop();\n    });\n    var lastMouseEvent;\n    var hoverMarker = new Range(-1, 0, -1, Infinity);\n    var selectionMarker = new Range(-1, 0, -1, Infinity);\n    selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n    popup.setSelectOnHover = function (val) {\n      if (!val) {\n        hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n      } else if (hoverMarker.id) {\n        popup.session.removeMarker(hoverMarker.id);\n        hoverMarker.id = null;\n      }\n    };\n    popup.setSelectOnHover(false);\n    popup.on(\"mousemove\", function (e) {\n      if (!lastMouseEvent) {\n        lastMouseEvent = e;\n        return;\n      }\n      if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n        return;\n      }\n      lastMouseEvent = e;\n      lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n      var row = lastMouseEvent.getDocumentPosition().row;\n      if (hoverMarker.start.row != row) {\n        if (!hoverMarker.id) popup.setRow(row);\n        setHoverMarker(row);\n      }\n    });\n    popup.renderer.on(\"beforeRender\", function () {\n      if (lastMouseEvent && hoverMarker.start.row != -1) {\n        lastMouseEvent.$pos = null;\n        var row = lastMouseEvent.getDocumentPosition().row;\n        if (!hoverMarker.id) popup.setRow(row);\n        setHoverMarker(row, true);\n      }\n    });\n    popup.renderer.on(\"afterRender\", function () {\n      var row = popup.getRow();\n      var t = popup.renderer.$textLayer;\n      var selected = t.element.childNodes[row - t.config.firstRow];\n      var el = document.activeElement; // Active element is textarea of main editor\n      if (selected !== t.selectedNode && t.selectedNode) {\n        dom.removeCssClass(t.selectedNode, \"ace_selected\");\n        el.removeAttribute(\"aria-activedescendant\");\n        t.selectedNode.removeAttribute(\"id\");\n      }\n      t.selectedNode = selected;\n      if (selected) {\n        dom.addCssClass(selected, \"ace_selected\");\n        var ariaId = getAriaId(row);\n        selected.id = ariaId;\n        popup.renderer.container.setAttribute(\"aria-activedescendant\", ariaId);\n        el.setAttribute(\"aria-activedescendant\", ariaId);\n        selected.setAttribute(\"aria-label\", popup.getData(row).value);\n      }\n    });\n    var hideHoverMarker = function () {\n      setHoverMarker(-1);\n    };\n    var setHoverMarker = function (row, suppressRedraw) {\n      if (row !== hoverMarker.start.row) {\n        hoverMarker.start.row = hoverMarker.end.row = row;\n        if (!suppressRedraw) popup.session._emit(\"changeBackMarker\");\n        popup._emit(\"changeHoverMarker\");\n      }\n    };\n    popup.getHoveredRow = function () {\n      return hoverMarker.start.row;\n    };\n    event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n    popup.on(\"hide\", hideHoverMarker);\n    popup.on(\"changeSelection\", hideHoverMarker);\n    popup.session.doc.getLength = function () {\n      return popup.data.length;\n    };\n    popup.session.doc.getLine = function (i) {\n      var data = popup.data[i];\n      if (typeof data == \"string\") return data;\n      return data && data.value || \"\";\n    };\n    var bgTokenizer = popup.session.bgTokenizer;\n    bgTokenizer.$tokenizeRow = function (row) {\n      var data = popup.data[row];\n      var tokens = [];\n      if (!data) return tokens;\n      if (typeof data == \"string\") data = {\n        value: data\n      };\n      var caption = data.caption || data.value || data.name;\n      function addToken(value, className) {\n        value && tokens.push({\n          type: (data.className || \"\") + (className || \"\"),\n          value: value\n        });\n      }\n      var lower = caption.toLowerCase();\n      var filterText = (popup.filterText || \"\").toLowerCase();\n      var lastIndex = 0;\n      var lastI = 0;\n      for (var i = 0; i <= filterText.length; i++) {\n        if (i != lastI && (data.matchMask & 1 << i || i == filterText.length)) {\n          var sub = filterText.slice(lastI, i);\n          lastI = i;\n          var index = lower.indexOf(sub, lastIndex);\n          if (index == -1) continue;\n          addToken(caption.slice(lastIndex, index), \"\");\n          lastIndex = index + sub.length;\n          addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n        }\n      }\n      addToken(caption.slice(lastIndex, caption.length), \"\");\n      if (data.meta) tokens.push({\n        type: \"completion-meta\",\n        value: data.meta\n      });\n      if (data.message) tokens.push({\n        type: \"completion-message\",\n        value: data.message\n      });\n      return tokens;\n    };\n    bgTokenizer.$updateOnChange = noop;\n    bgTokenizer.start = noop;\n    popup.session.$computeWidth = function () {\n      return this.screenWidth = 0;\n    };\n    popup.isOpen = false;\n    popup.isTopdown = false;\n    popup.autoSelect = true;\n    popup.filterText = \"\";\n    popup.data = [];\n    popup.setData = function (list, filterText) {\n      popup.filterText = filterText || \"\";\n      popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n      popup.data = list || [];\n      popup.setRow(0);\n    };\n    popup.getData = function (row) {\n      return popup.data[row];\n    };\n    popup.getRow = function () {\n      return selectionMarker.start.row;\n    };\n    popup.setRow = function (line) {\n      line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n      if (selectionMarker.start.row != line) {\n        popup.selection.clearSelection();\n        selectionMarker.start.row = selectionMarker.end.row = line || 0;\n        popup.session._emit(\"changeBackMarker\");\n        popup.moveCursorTo(line || 0, 0);\n        if (popup.isOpen) popup._signal(\"select\");\n      }\n    };\n    popup.on(\"changeSelection\", function () {\n      if (popup.isOpen) popup.setRow(popup.selection.lead.row);\n      popup.renderer.scrollCursorIntoView();\n    });\n    popup.hide = function () {\n      this.container.style.display = \"none\";\n      this._signal(\"hide\");\n      popup.isOpen = false;\n    };\n    popup.show = function (pos, lineHeight, topdownOnly) {\n      var el = this.container;\n      var screenHeight = window.innerHeight;\n      var screenWidth = window.innerWidth;\n      var renderer = this.renderer;\n      var maxH = renderer.$maxLines * lineHeight * 1.4;\n      var top = pos.top + this.$borderSize;\n      var allowTopdown = top > screenHeight / 2 && !topdownOnly;\n      if (allowTopdown && top + lineHeight + maxH > screenHeight) {\n        renderer.$maxPixelHeight = top - 2 * this.$borderSize;\n        el.style.top = \"\";\n        el.style.bottom = screenHeight - top + \"px\";\n        popup.isTopdown = false;\n      } else {\n        top += lineHeight;\n        renderer.$maxPixelHeight = screenHeight - top - 0.2 * lineHeight;\n        el.style.top = top + \"px\";\n        el.style.bottom = \"\";\n        popup.isTopdown = true;\n      }\n      el.style.display = \"\";\n      var left = pos.left;\n      if (left + el.offsetWidth > screenWidth) left = screenWidth - el.offsetWidth;\n      el.style.left = left + \"px\";\n      this._signal(\"show\");\n      lastMouseEvent = null;\n      popup.isOpen = true;\n    };\n    popup.goTo = function (where) {\n      var row = this.getRow();\n      var max = this.session.getLength() - 1;\n      switch (where) {\n        case \"up\":\n          row = row <= 0 ? max : row - 1;\n          break;\n        case \"down\":\n          row = row >= max ? -1 : row + 1;\n          break;\n        case \"start\":\n          row = 0;\n          break;\n        case \"end\":\n          row = max;\n          break;\n      }\n      this.setRow(row);\n    };\n    popup.getTextLeftOffset = function () {\n      return this.$borderSize + this.renderer.$padding + this.$imageSize;\n    };\n    popup.$imageSize = 0;\n    popup.$borderSize = 1;\n    return popup;\n  };\n  dom.importCssString(\"\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #CAD6FA;\\n    z-index: 1;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #3a674e;\\n}\\n.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid #abbffe;\\n    margin-top: -1px;\\n    background: rgba(233,233,253,0.4);\\n    position: absolute;\\n    z-index: 2;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\n    background: rgba(58, 103, 78, 0.62);\\n}\\n.ace_completion-meta {\\n    opacity: 0.5;\\n    margin: 0.9em;\\n}\\n.ace_completion-message {\\n    color: blue;\\n}\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #2d69c7;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #93ca12;\\n}\\n.ace_editor.ace_autocomplete {\\n    width: 300px;\\n    z-index: 200000;\\n    border: 1px lightgray solid;\\n    position: fixed;\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n    line-height: 1.4;\\n    background: #fefefe;\\n    color: #111;\\n}\\n.ace_dark.ace_editor.ace_autocomplete {\\n    border: 1px #484747 solid;\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\n    line-height: 1.4;\\n    background: #25282c;\\n    color: #c1c1c1;\\n}\", \"autocompletion.css\", false);\n  exports.AcePopup = AcePopup;\n  exports.$singleLineEditor = $singleLineEditor;\n  exports.getAriaId = getAriaId;\n});\nace.define(\"ace/autocomplete/util\", [\"require\", \"exports\", \"module\"], function (require, exports, module) {\n  \"use strict\";\n\n  exports.parForEach = function (array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0) callback();\n    for (var i = 0; i < arLength; i++) {\n      fn(array[i], function (result, err) {\n        completed++;\n        if (completed === arLength) callback(result, err);\n      });\n    }\n  };\n  var ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\n  exports.retrievePrecedingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos - 1; i >= 0; i--) {\n      if (regex.test(text[i])) buf.push(text[i]);else break;\n    }\n    return buf.reverse().join(\"\");\n  };\n  exports.retrieveFollowingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n      if (regex.test(text[i])) buf.push(text[i]);else break;\n    }\n    return buf;\n  };\n  exports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function (completer) {\n      if (completer.identifierRegexps) {\n        completer.identifierRegexps.forEach(function (identifierRegex) {\n          if (!prefix && identifierRegex) prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n        }.bind(this));\n      }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n  };\n});\nace.define(\"ace/autocomplete\", [\"require\", \"exports\", \"module\", \"ace/keyboard/hash_handler\", \"ace/autocomplete/popup\", \"ace/autocomplete/popup\", \"ace/autocomplete/util\", \"ace/lib/lang\", \"ace/lib/dom\", \"ace/snippets\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\n  var AcePopup = require(\"./autocomplete/popup\").AcePopup;\n  var getAriaId = require(\"./autocomplete/popup\").getAriaId;\n  var util = require(\"./autocomplete/util\");\n  var lang = require(\"./lib/lang\");\n  var dom = require(\"./lib/dom\");\n  var snippetManager = require(\"./snippets\").snippetManager;\n  var config = require(\"./config\");\n  var Autocomplete = function () {\n    this.autoInsert = false;\n    this.autoSelect = true;\n    this.exactMatch = false;\n    this.gatherCompletionsId = 0;\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys(this.commands);\n    this.blurListener = this.blurListener.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.mousedownListener = this.mousedownListener.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n    this.changeTimer = lang.delayedCall(function () {\n      this.updateCompletions(true);\n    }.bind(this));\n    this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n  };\n  (function () {\n    this.$init = function () {\n      this.popup = new AcePopup(document.body || document.documentElement);\n      this.popup.on(\"click\", function (e) {\n        this.insertMatch();\n        e.stop();\n      }.bind(this));\n      this.popup.focus = this.editor.focus.bind(this.editor);\n      this.popup.on(\"show\", this.tooltipTimer.bind(null, null));\n      this.popup.on(\"select\", this.tooltipTimer.bind(null, null));\n      this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n      return this.popup;\n    };\n    this.getPopup = function () {\n      return this.popup || this.$init();\n    };\n    this.openPopup = function (editor, prefix, keepPopupPosition) {\n      if (!this.popup) this.$init();\n      this.popup.autoSelect = this.autoSelect;\n      this.popup.setData(this.completions.filtered, this.completions.filterText);\n      this.editor.textInput.setAriaOptions({\n        activeDescendant: getAriaId(this.popup.getRow())\n      });\n      editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n      var renderer = editor.renderer;\n      this.popup.setRow(this.autoSelect ? 0 : -1);\n      if (!keepPopupPosition) {\n        this.popup.setTheme(editor.getTheme());\n        this.popup.setFontSize(editor.getFontSize());\n        var lineHeight = renderer.layerConfig.lineHeight;\n        var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n        pos.left -= this.popup.getTextLeftOffset();\n        var rect = editor.container.getBoundingClientRect();\n        pos.top += rect.top - renderer.layerConfig.offset;\n        pos.left += rect.left - editor.renderer.scrollLeft;\n        pos.left += renderer.gutterWidth;\n        this.popup.show(pos, lineHeight);\n      } else if (keepPopupPosition && !prefix) {\n        this.detach();\n      }\n      this.changeTimer.cancel();\n    };\n    this.detach = function () {\n      this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n      this.editor.off(\"changeSelection\", this.changeListener);\n      this.editor.off(\"blur\", this.blurListener);\n      this.editor.off(\"mousedown\", this.mousedownListener);\n      this.editor.off(\"mousewheel\", this.mousewheelListener);\n      this.changeTimer.cancel();\n      this.hideDocTooltip();\n      this.gatherCompletionsId += 1;\n      if (this.popup && this.popup.isOpen) this.popup.hide();\n      if (this.base) this.base.detach();\n      this.activated = false;\n      this.completions = this.base = null;\n    };\n    this.changeListener = function (e) {\n      var cursor = this.editor.selection.lead;\n      if (cursor.row != this.base.row || cursor.column < this.base.column) {\n        this.detach();\n      }\n      if (this.activated) this.changeTimer.schedule();else this.detach();\n    };\n    this.blurListener = function (e) {\n      var el = document.activeElement;\n      var text = this.editor.textInput.getElement();\n      var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n      var container = this.popup && this.popup.container;\n      if (el != text && el.parentNode != container && !fromTooltip && el != this.tooltipNode && e.relatedTarget != text) {\n        this.detach();\n      }\n    };\n    this.mousedownListener = function (e) {\n      this.detach();\n    };\n    this.mousewheelListener = function (e) {\n      this.detach();\n    };\n    this.goTo = function (where) {\n      this.popup.goTo(where);\n    };\n    this.insertMatch = function (data, options) {\n      if (!data) data = this.popup.getData(this.popup.getRow());\n      if (!data) return false;\n      var completions = this.completions;\n      this.editor.startOperation({\n        command: {\n          name: \"insertMatch\"\n        }\n      });\n      if (data.completer && data.completer.insertMatch) {\n        data.completer.insertMatch(this.editor, data);\n      } else {\n        if (!completions) return false;\n        if (completions.filterText) {\n          var ranges = this.editor.selection.getAllRanges();\n          for (var i = 0, range; range = ranges[i]; i++) {\n            range.start.column -= completions.filterText.length;\n            this.editor.session.remove(range);\n          }\n        }\n        if (data.snippet) snippetManager.insertSnippet(this.editor, data.snippet);else this.editor.execCommand(\"insertstring\", data.value || data);\n      }\n      if (this.completions == completions) this.detach();\n      this.editor.endOperation();\n    };\n    this.commands = {\n      \"Up\": function (editor) {\n        editor.completer.goTo(\"up\");\n      },\n      \"Down\": function (editor) {\n        editor.completer.goTo(\"down\");\n      },\n      \"Ctrl-Up|Ctrl-Home\": function (editor) {\n        editor.completer.goTo(\"start\");\n      },\n      \"Ctrl-Down|Ctrl-End\": function (editor) {\n        editor.completer.goTo(\"end\");\n      },\n      \"Esc\": function (editor) {\n        editor.completer.detach();\n      },\n      \"Return\": function (editor) {\n        return editor.completer.insertMatch();\n      },\n      \"Shift-Return\": function (editor) {\n        editor.completer.insertMatch(null, {\n          deleteSuffix: true\n        });\n      },\n      \"Tab\": function (editor) {\n        var result = editor.completer.insertMatch();\n        if (!result && !editor.tabstopManager) editor.completer.goTo(\"down\");else return result;\n      },\n      \"PageUp\": function (editor) {\n        editor.completer.popup.gotoPageUp();\n      },\n      \"PageDown\": function (editor) {\n        editor.completer.popup.gotoPageDown();\n      }\n    };\n    this.gatherCompletions = function (editor, callback) {\n      var session = editor.getSession();\n      var pos = editor.getCursorPosition();\n      var prefix = util.getCompletionPrefix(editor);\n      this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n      this.base.$insertRight = true;\n      var matches = [];\n      var total = editor.completers.length;\n      editor.completers.forEach(function (completer, i) {\n        completer.getCompletions(editor, session, pos, prefix, function (err, results) {\n          if (!err && results) matches = matches.concat(results);\n          callback(null, {\n            prefix: util.getCompletionPrefix(editor),\n            matches: matches,\n            finished: --total === 0\n          });\n        });\n      });\n      return true;\n    };\n    this.showPopup = function (editor, options) {\n      if (this.editor) this.detach();\n      this.activated = true;\n      this.editor = editor;\n      if (editor.completer != this) {\n        if (editor.completer) editor.completer.detach();\n        editor.completer = this;\n      }\n      editor.on(\"changeSelection\", this.changeListener);\n      editor.on(\"blur\", this.blurListener);\n      editor.on(\"mousedown\", this.mousedownListener);\n      editor.on(\"mousewheel\", this.mousewheelListener);\n      this.updateCompletions(false, options);\n    };\n    this.updateCompletions = function (keepPopupPosition, options) {\n      if (keepPopupPosition && this.base && this.completions) {\n        var pos = this.editor.getCursorPosition();\n        var prefix = this.editor.session.getTextRange({\n          start: this.base,\n          end: pos\n        });\n        if (prefix == this.completions.filterText) return;\n        this.completions.setFilter(prefix);\n        if (!this.completions.filtered.length) return this.detach();\n        if (this.completions.filtered.length == 1 && this.completions.filtered[0].value == prefix && !this.completions.filtered[0].snippet) return this.detach();\n        this.openPopup(this.editor, prefix, keepPopupPosition);\n        return;\n      }\n      if (options && options.matches) {\n        var pos = this.editor.getSelectionRange().start;\n        this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n        this.base.$insertRight = true;\n        this.completions = new FilteredList(options.matches);\n        return this.openPopup(this.editor, \"\", keepPopupPosition);\n      }\n      var _id = this.gatherCompletionsId;\n      var detachIfFinished = function (results) {\n        if (!results.finished) return;\n        return this.detach();\n      }.bind(this);\n      var processResults = function (results) {\n        var prefix = results.prefix;\n        var matches = results.matches;\n        this.completions = new FilteredList(matches);\n        if (this.exactMatch) this.completions.exactMatch = true;\n        this.completions.setFilter(prefix);\n        var filtered = this.completions.filtered;\n        if (!filtered.length) return detachIfFinished(results);\n        if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet) return detachIfFinished(results);\n        if (this.autoInsert && filtered.length == 1 && results.finished) return this.insertMatch(filtered[0]);\n        this.openPopup(this.editor, prefix, keepPopupPosition);\n      }.bind(this);\n      var isImmediate = true;\n      var immediateResults = null;\n      this.gatherCompletions(this.editor, function (err, results) {\n        var prefix = results.prefix;\n        var matches = results && results.matches;\n        if (!matches || !matches.length) return detachIfFinished(results);\n        if (prefix.indexOf(results.prefix) !== 0 || _id != this.gatherCompletionsId) return;\n        if (isImmediate) {\n          immediateResults = results;\n          return;\n        }\n        processResults(results);\n      }.bind(this));\n      isImmediate = false;\n      if (immediateResults) {\n        var results = immediateResults;\n        immediateResults = null;\n        processResults(results);\n      }\n    };\n    this.cancelContextMenu = function () {\n      this.editor.$mouseHandler.cancelContextMenu();\n    };\n    this.updateDocTooltip = function () {\n      var popup = this.popup;\n      var all = popup.data;\n      var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n      var doc = null;\n      if (!selected || !this.editor || !this.popup.isOpen) return this.hideDocTooltip();\n      this.editor.completers.some(function (completer) {\n        if (completer.getDocTooltip) doc = completer.getDocTooltip(selected);\n        return doc;\n      });\n      if (!doc && typeof selected != \"string\") doc = selected;\n      if (typeof doc == \"string\") doc = {\n        docText: doc\n      };\n      if (!doc || !(doc.docHTML || doc.docText)) return this.hideDocTooltip();\n      this.showDocTooltip(doc);\n    };\n    this.showDocTooltip = function (item) {\n      if (!this.tooltipNode) {\n        this.tooltipNode = dom.createElement(\"div\");\n        this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip\";\n        this.tooltipNode.style.margin = 0;\n        this.tooltipNode.style.pointerEvents = \"auto\";\n        this.tooltipNode.tabIndex = -1;\n        this.tooltipNode.onblur = this.blurListener.bind(this);\n        this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n      }\n      var tooltipNode = this.tooltipNode;\n      if (item.docHTML) {\n        tooltipNode.innerHTML = item.docHTML;\n      } else if (item.docText) {\n        tooltipNode.textContent = item.docText;\n      }\n      if (!tooltipNode.parentNode) document.body.appendChild(tooltipNode);\n      var popup = this.popup;\n      var rect = popup.container.getBoundingClientRect();\n      tooltipNode.style.top = popup.container.style.top;\n      tooltipNode.style.bottom = popup.container.style.bottom;\n      tooltipNode.style.display = \"block\";\n      if (window.innerWidth - rect.right < 320) {\n        if (rect.left < 320) {\n          if (popup.isTopdown) {\n            tooltipNode.style.top = rect.bottom + \"px\";\n            tooltipNode.style.left = rect.left + \"px\";\n            tooltipNode.style.right = \"\";\n            tooltipNode.style.bottom = \"\";\n          } else {\n            tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n            tooltipNode.style.left = rect.left + \"px\";\n            tooltipNode.style.right = \"\";\n            tooltipNode.style.bottom = \"\";\n          }\n        } else {\n          tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n          tooltipNode.style.left = \"\";\n        }\n      } else {\n        tooltipNode.style.left = rect.right + 1 + \"px\";\n        tooltipNode.style.right = \"\";\n      }\n    };\n    this.hideDocTooltip = function () {\n      this.tooltipTimer.cancel();\n      if (!this.tooltipNode) return;\n      var el = this.tooltipNode;\n      if (!this.editor.isFocused() && document.activeElement == el) this.editor.focus();\n      this.tooltipNode = null;\n      if (el.parentNode) el.parentNode.removeChild(el);\n    };\n    this.onTooltipClick = function (e) {\n      var a = e.target;\n      while (a && a != this.tooltipNode) {\n        if (a.nodeName == \"A\" && a.href) {\n          a.rel = \"noreferrer\";\n          a.target = \"_blank\";\n          break;\n        }\n        a = a.parentNode;\n      }\n    };\n    this.destroy = function () {\n      this.detach();\n      if (this.popup) {\n        this.popup.destroy();\n        var el = this.popup.container;\n        if (el && el.parentNode) el.parentNode.removeChild(el);\n      }\n      if (this.editor && this.editor.completer == this) this.editor.completer == null;\n      this.popup = null;\n    };\n  }).call(Autocomplete.prototype);\n  Autocomplete.for = function (editor) {\n    if (editor.completer) {\n      return editor.completer;\n    }\n    if (config.get(\"sharedPopups\")) {\n      if (!Autocomplete.$shared) Autocomplete.$sharedInstance = new Autocomplete();\n      editor.completer = Autocomplete.$sharedInstance;\n    } else {\n      editor.completer = new Autocomplete();\n      editor.once(\"destroy\", function (e, editor) {\n        editor.completer.destroy();\n      });\n    }\n    return editor.completer;\n  };\n  Autocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function (editor, options) {\n      var completer = Autocomplete.for(editor);\n      completer.autoInsert = false;\n      completer.autoSelect = true;\n      completer.showPopup(editor, options);\n      completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n  };\n  var FilteredList = function (array, filterText) {\n    this.all = array;\n    this.filtered = array;\n    this.filterText = filterText || \"\";\n    this.exactMatch = false;\n  };\n  (function () {\n    this.setFilter = function (str) {\n      if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0) var matches = this.filtered;else var matches = this.all;\n      this.filterText = str;\n      matches = this.filterCompletions(matches, this.filterText);\n      matches = matches.sort(function (a, b) {\n        return b.exactMatch - a.exactMatch || b.$score - a.$score || (a.caption || a.value).localeCompare(b.caption || b.value);\n      });\n      var prev = null;\n      matches = matches.filter(function (item) {\n        var caption = item.snippet || item.caption || item.value;\n        if (caption === prev) return false;\n        prev = caption;\n        return true;\n      });\n      this.filtered = matches;\n    };\n    this.filterCompletions = function (items, needle) {\n      var results = [];\n      var upper = needle.toUpperCase();\n      var lower = needle.toLowerCase();\n      loop: for (var i = 0, item; item = items[i]; i++) {\n        var caption = item.caption || item.value || item.snippet;\n        if (!caption) continue;\n        var lastIndex = -1;\n        var matchMask = 0;\n        var penalty = 0;\n        var index, distance;\n        if (this.exactMatch) {\n          if (needle !== caption.substr(0, needle.length)) continue loop;\n        } else {\n          var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n          if (fullMatchIndex > -1) {\n            penalty = fullMatchIndex;\n          } else {\n            for (var j = 0; j < needle.length; j++) {\n              var i1 = caption.indexOf(lower[j], lastIndex + 1);\n              var i2 = caption.indexOf(upper[j], lastIndex + 1);\n              index = i1 >= 0 ? i2 < 0 || i1 < i2 ? i1 : i2 : i2;\n              if (index < 0) continue loop;\n              distance = index - lastIndex - 1;\n              if (distance > 0) {\n                if (lastIndex === -1) penalty += 10;\n                penalty += distance;\n                matchMask = matchMask | 1 << j;\n              }\n              lastIndex = index;\n            }\n          }\n        }\n        item.matchMask = matchMask;\n        item.exactMatch = penalty ? 0 : 1;\n        item.$score = (item.score || 0) - penalty;\n        results.push(item);\n      }\n      return results;\n    };\n  }).call(FilteredList.prototype);\n  exports.Autocomplete = Autocomplete;\n  exports.FilteredList = FilteredList;\n});\nace.define(\"ace/autocomplete/text_completer\", [\"require\", \"exports\", \"module\", \"ace/range\"], function (require, exports, module) {\n  var Range = require(\"../range\").Range;\n  var splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\n  function getWordIndex(doc, pos) {\n    var textBefore = doc.getTextRange(Range.fromPoints({\n      row: 0,\n      column: 0\n    }, pos));\n    return textBefore.split(splitRegex).length - 1;\n  }\n  function wordDistance(doc, pos) {\n    var prefixPos = getWordIndex(doc, pos);\n    var words = doc.getValue().split(splitRegex);\n    var wordScores = Object.create(null);\n    var currentWord = words[prefixPos];\n    words.forEach(function (word, idx) {\n      if (!word || word === currentWord) return;\n      var distance = Math.abs(prefixPos - idx);\n      var score = words.length - distance;\n      if (wordScores[word]) {\n        wordScores[word] = Math.max(score, wordScores[word]);\n      } else {\n        wordScores[word] = score;\n      }\n    });\n    return wordScores;\n  }\n  exports.getCompletions = function (editor, session, pos, prefix, callback) {\n    var wordScore = wordDistance(session, pos);\n    var wordList = Object.keys(wordScore);\n    callback(null, wordList.map(function (word) {\n      return {\n        caption: word,\n        value: word,\n        score: wordScore[word],\n        meta: \"local\"\n      };\n    }));\n  };\n});\nace.define(\"ace/ext/language_tools\", [\"require\", \"exports\", \"module\", \"ace/snippets\", \"ace/autocomplete\", \"ace/config\", \"ace/lib/lang\", \"ace/autocomplete/util\", \"ace/autocomplete/text_completer\", \"ace/editor\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var snippetManager = require(\"../snippets\").snippetManager;\n  var Autocomplete = require(\"../autocomplete\").Autocomplete;\n  var config = require(\"../config\");\n  var lang = require(\"../lib/lang\");\n  var util = require(\"../autocomplete/util\");\n  var textCompleter = require(\"../autocomplete/text_completer\");\n  var keyWordCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n      if (session.$mode.completer) {\n        return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n      }\n      var state = editor.session.getState(pos.row);\n      var completions = session.$mode.getCompletions(state, session, pos, prefix);\n      callback(null, completions);\n    }\n  };\n  var transformSnippetTooltip = function (str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function (_, p1, p2, p3) {\n      return record[p1] = p3 || '';\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n      return record[p1];\n    });\n  };\n  var snippetCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n      var scopes = [];\n      var token = session.getTokenAt(pos.row, pos.column);\n      if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/)) scopes.push('html-tag');else scopes = snippetManager.getActiveScopes(editor);\n      var snippetMap = snippetManager.snippetMap;\n      var completions = [];\n      scopes.forEach(function (scope) {\n        var snippets = snippetMap[scope] || [];\n        for (var i = snippets.length; i--;) {\n          var s = snippets[i];\n          var caption = s.name || s.tabTrigger;\n          if (!caption) continue;\n          completions.push({\n            caption: caption,\n            snippet: s.content,\n            meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n            type: \"snippet\"\n          });\n        }\n      }, this);\n      callback(null, completions);\n    },\n    getDocTooltip: function (item) {\n      if (item.type == \"snippet\" && !item.docHTML) {\n        item.docHTML = [\"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\", lang.escapeHTML(transformSnippetTooltip(item.snippet))].join(\"\");\n      }\n    }\n  };\n  var completers = [snippetCompleter, textCompleter, keyWordCompleter];\n  exports.setCompleters = function (val) {\n    completers.length = 0;\n    if (val) completers.push.apply(completers, val);\n  };\n  exports.addCompleter = function (completer) {\n    completers.push(completer);\n  };\n  exports.textCompleter = textCompleter;\n  exports.keyWordCompleter = keyWordCompleter;\n  exports.snippetCompleter = snippetCompleter;\n  var expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function (editor) {\n      return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n  };\n  var onChangeMode = function (e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n  };\n  var loadSnippetsForMode = function (mode) {\n    if (typeof mode == \"string\") mode = config.$modes[mode];\n    if (!mode) return;\n    if (!snippetManager.files) snippetManager.files = {};\n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes) mode.modes.forEach(loadSnippetsForMode);\n  };\n  var loadSnippetFile = function (id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id]) return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function (m) {\n      if (!m) return;\n      snippetManager.files[id] = m;\n      if (!m.snippets && m.snippetText) m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippetManager.register(m.snippets || [], m.scope);\n      if (m.includeScopes) {\n        snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n        m.includeScopes.forEach(function (x) {\n          loadSnippetsForMode(\"ace/mode/\" + x);\n        });\n      }\n    });\n  };\n  var doLiveAutocomplete = function (e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n    if (e.command.name === \"backspace\") {\n      if (hasCompleter && !util.getCompletionPrefix(editor)) editor.completer.detach();\n    } else if (e.command.name === \"insertstring\") {\n      var prefix = util.getCompletionPrefix(editor);\n      if (prefix && !hasCompleter) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.showPopup(editor);\n      }\n    }\n  };\n  var Editor = require(\"../editor\").Editor;\n  require(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n      set: function (val) {\n        if (val) {\n          if (!this.completers) this.completers = Array.isArray(val) ? val : completers;\n          this.commands.addCommand(Autocomplete.startCommand);\n        } else {\n          this.commands.removeCommand(Autocomplete.startCommand);\n        }\n      },\n      value: false\n    },\n    enableLiveAutocompletion: {\n      set: function (val) {\n        if (val) {\n          if (!this.completers) this.completers = Array.isArray(val) ? val : completers;\n          this.commands.on('afterExec', doLiveAutocomplete);\n        } else {\n          this.commands.removeListener('afterExec', doLiveAutocomplete);\n        }\n      },\n      value: false\n    },\n    enableSnippets: {\n      set: function (val) {\n        if (val) {\n          this.commands.addCommand(expandSnippet);\n          this.on(\"changeMode\", onChangeMode);\n          onChangeMode(null, this);\n        } else {\n          this.commands.removeCommand(expandSnippet);\n          this.off(\"changeMode\", onChangeMode);\n        }\n      },\n      value: false\n    }\n  });\n});\n(function () {\n  ace.require([\"ace/ext/language_tools\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"names":["ace","define","require","exports","module","dom","oop","EventEmitter","lang","Range","RangeList","HashHandler","Tokenizer","clipboard","VARIABLES","CURRENT_WORD","editor","session","getTextRange","getWordRange","SELECTION","name","indentation","text","replace","CURRENT_LINE","getLine","getCursorPosition","row","PREV_LINE","LINE_INDEX","LINE_NUMBER","SOFT_TABS","getUseSoftTabs","TAB_SIZE","getTabSize","CLIPBOARD","getText","FILENAME","exec","FILEPATH","FILENAME_BASE","DIRECTORY","WORKSPACE_NAME","FULLNAME","BLOCK_COMMENT_START","mode","$mode","blockComment","start","BLOCK_COMMENT_END","end","LINE_COMMENT","lineCommentStart","CURRENT_YEAR","date","bind","year","CURRENT_YEAR_SHORT","CURRENT_MONTH","month","CURRENT_MONTH_NAME","CURRENT_MONTH_NAME_SHORT","CURRENT_DATE","day","CURRENT_DAY_NAME","weekday","CURRENT_DAY_NAME_SHORT","CURRENT_HOUR","hour","hour12","CURRENT_MINUTE","minute","CURRENT_SECOND","second","SELECTED_TEXT","dateFormat","str","Date","toLocaleString","length","SnippetManager","snippetMap","snippetNameMap","implement","getTokenizer","$tokenizer","createTokenizer","TabstopToken","substr","test","tabstopId","parseInt","escape","ch","formatMatcher","regex","onMatch","val","state","stack","ts","fmtString","guard","slice","flag","next","indexOf","shift","t","unshift","token","merge","snippetVar","choices","operator","split","map","value","formatString","expectElse","ifEnd","elseEnd","changeCase","local","formatStringVar","formatFunction","tokenizeTmSnippet","startState","getLineTokens","tokens","x","getVariableValue","variables","__","hasOwnProperty","tmStrFormat","fmt","re","RegExp","fmtTokens","_self","formatted","oldArgs","call","arguments","fmtParts","resolveVariables","gChangeCase","i","toUpperCase","toLowerCase","join","tmFormatFunction","snippet","result","afterNewLine","push","j","gotoNext","i1","insertSnippetForSelection","snippetText","cursor","line","tabString","getTabString","indentString","match","column","tabstops","forEach","p","id","index","parents","isNested","some","expanding","copyValue","copy","lastIndexOf","Object","keys","parentId","splice","apply","Math","max","concat","lines","range","getSelectionRange","tabstopManager","TabstopManager","selectionId","inVirtualSelectionMode","selection","addTabstops","insertSnippet","self","forEachSelection","keepOrder","tabNext","$getScope","scope","$id","pop","inlinePhp","c","getState","substring","getActiveScopes","scopes","includeScopes","expandWithTab","options","expandSnippetForSelection","before","after","snippets","findMatchingSnippet","dryRun","doc","removeInLine","replaceBefore","replaceAfter","M__","matchBefore","T__","matchAfter","content","snippetList","s","startRe","endRe","triggerRe","endTriggerRe","register","wrapRegexp","src","guardedRegexp","opening","addSnippet","old","unregister","prefix","tabTrigger","body","Array","isArray","trigger","escapeRegExp","endTrigger","endGuard","key","_signal","removeSnippet","nameMap","findIndex","console","log","parseSnippetFile","list","m","JSON","parse","e","guardRe","getSnippetByName","prototype","$onChange","onChange","$onChangeSelection","delayedCall","onChangeSelection","schedule","$onChangeSession","onChangeSession","$onAfterExec","onAfterExec","attach","ranges","$openTabstops","selectedTabstop","on","commands","keyBinding","addKeyboardHandler","keyboardHandler","detach","removeTabstopMarkers","removeListener","removeKeyboardHandler","delta","isRemove","action","active","rangeList","$bias","parentActive","startIndex","pointIndex","endIndex","toRemove","removeRange","$inChange","getLength","getValue","updateLinkedFields","hasLinkedRanges","firstNonLinked","linked","original","snippetManager","command","readOnly","lead","anchor","isEmpty","containsLead","contains","containsAnchor","dir","min","selectTabstop","addTabstopMarkers","sel","multiSelect","toSingleRange","addRange","clone","fromOrientedRange","execCommand","matches","useLink","getOption","fromPoints","moveRelative","arg","dest","movePoint","tabstop","addList","markerId","addMarker","removeMarker","bindKeys","renderer","scrollCursorIntoView","point","diff","importCssString","Editor","expandSnippet","Renderer","VirtualRenderer","event","getAriaId","$singleLineEditor","el","$maxLines","setHighlightActiveLine","setShowPrintMargin","setShowGutter","setHighlightGutterLine","$mouseHandler","$focusTimeout","$highlightTagPending","AcePopup","parentNode","createElement","popup","appendChild","style","display","setStyle","container","setAttribute","setOption","noop","focus","$isFocused","$cursorLayer","restartTimer","element","opacity","$keepTextAreaAtCursor","highlight","$searchHighlight","clazz","pos","getDocumentPosition","moveToPosition","selectionMarker","stop","lastMouseEvent","hoverMarker","Infinity","setSelectOnHover","y","scrollTop","setRow","setHoverMarker","$pos","getRow","$textLayer","selected","childNodes","config","firstRow","document","activeElement","selectedNode","removeCssClass","removeAttribute","addCssClass","ariaId","getData","hideHoverMarker","suppressRedraw","_emit","getHoveredRow","addListener","data","bgTokenizer","$tokenizeRow","caption","addToken","className","type","lower","filterText","lastIndex","lastI","matchMask","sub","meta","message","$updateOnChange","$computeWidth","screenWidth","isOpen","isTopdown","autoSelect","setData","setValue","stringRepeat","clearSelection","moveCursorTo","hide","show","lineHeight","topdownOnly","screenHeight","window","innerHeight","innerWidth","maxH","top","$borderSize","allowTopdown","$maxPixelHeight","bottom","left","offsetWidth","goTo","where","getTextLeftOffset","$padding","$imageSize","parForEach","array","fn","callback","completed","arLength","err","ID_REGEX","retrievePrecedingIdentifier","buf","reverse","retrieveFollowingIdentifier","getCompletionPrefix","completers","completer","identifierRegexps","identifierRegex","util","Autocomplete","autoInsert","exactMatch","gatherCompletionsId","blurListener","changeListener","mousedownListener","mousewheelListener","changeTimer","updateCompletions","tooltipTimer","updateDocTooltip","$init","documentElement","insertMatch","getPopup","openPopup","keepPopupPosition","completions","filtered","textInput","setAriaOptions","activeDescendant","setTheme","getTheme","setFontSize","getFontSize","layerConfig","getPixelPosition","base","rect","getBoundingClientRect","offset","scrollLeft","gutterWidth","cancel","off","hideDocTooltip","activated","getElement","fromTooltip","relatedTarget","tooltipNode","startOperation","getAllRanges","remove","endOperation","deleteSuffix","gotoPageUp","gotoPageDown","gatherCompletions","getSession","createAnchor","$insertRight","total","getCompletions","results","finished","showPopup","setFilter","FilteredList","_id","detachIfFinished","processResults","isImmediate","immediateResults","cancelContextMenu","all","getDocTooltip","docText","docHTML","showDocTooltip","item","margin","pointerEvents","tabIndex","onblur","onclick","onTooltipClick","innerHTML","textContent","right","offsetTop","offsetHeight","isFocused","removeChild","a","target","nodeName","href","rel","destroy","for","get","$shared","$sharedInstance","once","startCommand","bindKey","filterCompletions","sort","b","$score","localeCompare","prev","filter","items","needle","upper","loop","penalty","distance","fullMatchIndex","i2","score","splitRegex","getWordIndex","textBefore","wordDistance","prefixPos","words","wordScores","create","currentWord","word","idx","abs","wordScore","wordList","textCompleter","keyWordCompleter","transformSnippetTooltip","record","_","p1","p2","p3","snippetCompleter","getTokenAt","escapeHTML","setCompleters","addCompleter","onChangeMode","loadSnippetsForMode","$modes","files","loadSnippetFile","snippetFileId","modes","snippetFilePath","loadModule","doLiveAutocomplete","hasCompleter","defineOptions","enableBasicAutocompletion","set","addCommand","removeCommand","enableLiveAutocompletion","enableSnippets"],"sources":["/home/anasbouzid/code-projects/streamlit/custom-components/CodeEditor/code_editor/frontend/node_modules/ace-builds/src-noconflict/ext-language_tools.js"],"sourcesContent":["ace.define(\"ace/snippets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/lang\",\"ace/range\",\"ace/range_list\",\"ace/keyboard/hash_handler\",\"ace/tokenizer\",\"ace/clipboard\",\"ace/editor\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\nvar VARIABLES = {\n    CURRENT_WORD: function (editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function () { return \"Unknown\"; },\n    FULLNAME: function () { return \"Unknown\"; },\n    BLOCK_COMMENT_START: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, { year: \"numeric\" }),\n    CURRENT_YEAR_SHORT: date.bind(null, { year: \"2-digit\" }),\n    CURRENT_MONTH: date.bind(null, { month: \"numeric\" }),\n    CURRENT_MONTH_NAME: date.bind(null, { month: \"long\" }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, { month: \"short\" }),\n    CURRENT_DATE: date.bind(null, { day: \"2-digit\" }),\n    CURRENT_DAY_NAME: date.bind(null, { weekday: \"long\" }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, { weekday: \"short\" }),\n    CURRENT_HOUR: date.bind(null, { hour: \"2-digit\", hour12: false }),\n    CURRENT_MINUTE: date.bind(null, { minute: \"2-digit\" }),\n    CURRENT_SECOND: date.bind(null, { second: \"2-digit\" })\n};\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\nvar SnippetManager = function () {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.getTokenizer = function () {\n        return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    this.createTokenizer = function () {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{ tabstopId: parseInt(str, 10) }];\n            return [{ text: str }];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\",\n            onMatch: function (val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        SnippetManager.$tokenizer = new Tokenizer({\n            start: [\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length) {\n                            val = ch;\n                        }\n                        else if (\"`$\\\\\".indexOf(ch) != -1) {\n                            val = ch;\n                        }\n                        return [val];\n                    } },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        return [stack.length ? stack.shift() : val];\n                    } },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken },\n                { regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function (str, state, stack) {\n                        var t = TabstopToken(str.substr(1));\n                        stack.unshift(t[0]);\n                        return t;\n                    }, next: \"snippetVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false }\n            ],\n            snippetVar: [\n                { regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function (val, state, stack) {\n                        var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n                            return operator.length == 2 ? operator[1] : \"\\x00\";\n                        }).split(\"\\x00\").map(function (value) {\n                            return { value: value };\n                        });\n                        stack[0].choices = choices;\n                        return [choices[0]];\n                    }, next: \"start\" },\n                formatMatcher,\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\" }\n            ],\n            formatString: [\n                { regex: /:/, onMatch: function (val, state, stack) {\n                        if (stack.length && stack[0].expectElse) {\n                            stack[0].expectElse = false;\n                            stack[0].ifEnd = { elseEnd: stack[0] };\n                            return [stack[0].ifEnd];\n                        }\n                        return \":\";\n                    } },\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length)\n                            val = ch;\n                        else if (\"`$\\\\\".indexOf(ch) != -1)\n                            val = ch;\n                        else if (ch == \"n\")\n                            val = \"\\n\";\n                        else if (ch == \"t\")\n                            val = \"\\t\";\n                        else if (\"ulULE\".indexOf(ch) != -1)\n                            val = { changeCase: ch, local: ch > \"a\" };\n                        return [val];\n                    } },\n                { regex: \"/\\\\w*}\", onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        if (next)\n                            next.flag = val.slice(1, -1);\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: function (val, state, stack) {\n                        return [{ text: val.slice(1) }];\n                    } },\n                { regex: /\\${\\w+/, onMatch: function (val, state, stack) {\n                        var token = { text: val.slice(2) };\n                        stack.unshift(token);\n                        return [token];\n                    }, next: \"formatStringVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" }\n            ],\n            formatStringVar: [\n                { regex: /:\\/\\w+}/, onMatch: function (val, state, stack) {\n                        var ts = stack[0];\n                        ts.formatFunction = val.slice(2, -1);\n                        return [stack.shift()];\n                    }, next: \"formatString\" },\n                formatMatcher,\n                { regex: /:[\\?\\-+]?/, onMatch: function (val, state, stack) {\n                        if (val[1] == \"+\")\n                            stack[0].ifEnd = stack[0];\n                        if (val[1] == \"?\")\n                            stack[0].expectElse = true;\n                    }, next: \"formatString\" },\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\" }\n            ]\n        });\n        return SnippetManager.$tokenizer;\n    };\n    this.tokenizeTmSnippet = function (str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n            return x.value || x;\n        });\n    };\n    this.getVariableValue = function (editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    this.variables = VARIABLES;\n    this.tmStrFormat = function (str, ch, editor) {\n        if (!ch.fmt)\n            return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function () {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    }\n                    else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                }\n                else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                }\n                else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    this.tmFormatFunction = function (str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n    this.resolveVariables = function (snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)\n                continue;\n            afterNewLine = false;\n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1)\n                    j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                }\n                else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            }\n            else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            }\n            else if (ch.tabstopId != null) {\n                result.push(ch);\n            }\n            else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n    this.insertSnippetForSelection = function (editor, snippetText) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var tabString = editor.session.getTabString();\n        var indentString = line.match(/^\\s*/)[0];\n        if (cursor.column < indentString.length)\n            indentString = indentString.slice(0, cursor.column);\n        snippetText = snippetText.replace(/\\r/g, \"\");\n        var tokens = this.tokenizeTmSnippet(snippetText);\n        tokens = this.resolveVariables(tokens, editor);\n        tokens = tokens.map(function (x) {\n            if (x == \"\\n\")\n                return x + indentString;\n            if (typeof x == \"string\")\n                return x.replace(/\\t/g, tabString);\n            return x;\n        });\n        var tabstops = [];\n        tokens.forEach(function (p, i) {\n            if (typeof p != \"object\")\n                return;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            if (!ts) {\n                ts = tabstops[id] = [];\n                ts.index = id;\n                ts.value = \"\";\n                ts.parents = {};\n            }\n            if (ts.indexOf(p) !== -1)\n                return;\n            if (p.choices && !ts.choices)\n                ts.choices = p.choices;\n            ts.push(p);\n            var i1 = tokens.indexOf(p, i + 1);\n            if (i1 === -1)\n                return;\n            var value = tokens.slice(i + 1, i1);\n            var isNested = value.some(function (t) { return typeof t === \"object\"; });\n            if (isNested && !ts.value) {\n                ts.value = value;\n            }\n            else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n                ts.value = value.join(\"\");\n            }\n        });\n        tabstops.forEach(function (ts) { ts.length = 0; });\n        var expanding = {};\n        function copyValue(val) {\n            var copy = [];\n            for (var i = 0; i < val.length; i++) {\n                var p = val[i];\n                if (typeof p == \"object\") {\n                    if (expanding[p.tabstopId])\n                        continue;\n                    var j = val.lastIndexOf(p, i - 1);\n                    p = copy[j] || { tabstopId: p.tabstopId };\n                }\n                copy[i] = p;\n            }\n            return copy;\n        }\n        for (var i = 0; i < tokens.length; i++) {\n            var p = tokens[i];\n            if (typeof p != \"object\")\n                continue;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            var i1 = tokens.indexOf(p, i + 1);\n            if (expanding[id]) {\n                if (expanding[id] === p) {\n                    delete expanding[id];\n                    Object.keys(expanding).forEach(function (parentId) {\n                        ts.parents[parentId] = true;\n                    });\n                }\n                continue;\n            }\n            expanding[id] = p;\n            var value = ts.value;\n            if (typeof value !== \"string\")\n                value = copyValue(value);\n            else if (p.fmt)\n                value = this.tmStrFormat(value, p, editor);\n            tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n            if (ts.indexOf(p) === -1)\n                ts.push(p);\n        }\n        var row = 0, column = 0;\n        var text = \"\";\n        tokens.forEach(function (t) {\n            if (typeof t === \"string\") {\n                var lines = t.split(\"\\n\");\n                if (lines.length > 1) {\n                    column = lines[lines.length - 1].length;\n                    row += lines.length - 1;\n                }\n                else\n                    column += t.length;\n                text += t;\n            }\n            else if (t) {\n                if (!t.start)\n                    t.start = { row: row, column: column };\n                else\n                    t.end = { row: row, column: column };\n            }\n        });\n        var range = editor.getSelectionRange();\n        var end = editor.session.replace(range, text);\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    this.insertSnippet = function (editor, snippetText) {\n        var self = this;\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText);\n        editor.forEachSelection(function () {\n            self.insertSnippetForSelection(editor, snippetText);\n        }, null, { keepOrder: true });\n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n    this.$getScope = function (editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp)\n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        return scope;\n    };\n    this.getActiveScopes = function (editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n    this.expandWithTab = function (editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function () {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, { keepOrder: true });\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    this.expandSnippetForSelection = function (editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n    this.findMatchingSnippet = function (snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        if (!snippets)\n            snippets = [];\n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            }\n            else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        }\n        else {\n            Object.keys(snippets).forEach(function (key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        this._signal(\"registerSnippets\", { scope: scope });\n    };\n    this.unregister = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope || scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope || scope];\n                var i = map && map.findIndex(s);\n                if (i >= 0){\n                    console.log(\"SPLICING!!!!!\");\n                    console.log(i);\n                    map.splice(i, 1);\n                    console.log(map);\n                }\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function (str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                }\n                catch (e) { }\n            }\n            if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            }\n            else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                }\n                else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                }\n                else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    this.getSnippetByName = function (name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n}).call(SnippetManager.prototype);\nvar TabstopManager = function (editor) {\n    if (editor.tabstopManager)\n        return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n};\n(function () {\n    this.attach = function (editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n        this.editor = editor;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function () {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges = null;\n        this.tabstops = null;\n        this.selectedTabstop = null;\n        this.editor.removeListener(\"change\", this.$onChange);\n        this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n        this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.editor = null;\n    };\n    this.onChange = function (delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = (this.tabstops || []).slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.editor.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    this.updateLinkedFields = function () {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.editor.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    this.onAfterExec = function (e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    this.onChangeSelection = function () {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    this.onChangeSession = function () {\n        this.detach();\n    };\n    this.tabNext = function (dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        if (index === 0)\n            this.detach();\n    };\n    this.selectTabstop = function (index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices)\n            range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        }\n        else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", { matches: this.selectedTabstop.choices });\n    };\n    this.addTabstops = function (tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        tabstops.forEach(function (ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                }\n                else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        if (arg.length > 2) {\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n    this.addTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            if (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    this.removeTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    this.removeRange = function (range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1)\n            this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        this.editor.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n        \"Tab\": function (editor) {\n            if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n                return;\n            editor.tabstopManager.tabNext(1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Shift-Tab\": function (editor) {\n            editor.tabstopManager.tabNext(-1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Esc\": function (editor) {\n            editor.tabstopManager.detach();\n        }\n    });\n}).call(TabstopManager.prototype);\nvar movePoint = function (point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\nvar moveRelative = function (point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\ndom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\nexports.snippetManager = new SnippetManager();\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.insertSnippet = function (content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n\n});\n\nace.define(\"ace/autocomplete/popup\",[\"require\",\"exports\",\"module\",\"ace/virtual_renderer\",\"ace/editor\",\"ace/range\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar Renderer = require(\"../virtual_renderer\").VirtualRenderer;\nvar Editor = require(\"../editor\").Editor;\nvar Range = require(\"../range\").Range;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\nvar getAriaId = function (index) {\n    return \"suggest-aria-id:\".concat(index);\n};\nvar $singleLineEditor = function (el) {\n    var renderer = new Renderer(el);\n    renderer.$maxLines = 4;\n    var editor = new Editor(renderer);\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n    return editor;\n};\nvar AcePopup = function (parentNode) {\n    var el = dom.createElement(\"div\");\n    var popup = new $singleLineEditor(el);\n    if (parentNode)\n        parentNode.appendChild(el);\n    el.style.display = \"none\";\n    popup.renderer.content.style.cursor = \"default\";\n    popup.renderer.setStyle(\"ace_autocomplete\");\n    popup.renderer.container.setAttribute(\"role\", \"listbox\");\n    popup.renderer.container.setAttribute(\"aria-label\", \"Autocomplete suggestions\");\n    popup.setOption(\"displayIndentGuides\", false);\n    popup.setOption(\"dragDelay\", 150);\n    var noop = function () { };\n    popup.focus = noop;\n    popup.$isFocused = true;\n    popup.renderer.$cursorLayer.restartTimer = noop;\n    popup.renderer.$cursorLayer.element.style.opacity = 0;\n    popup.renderer.$maxLines = 8;\n    popup.renderer.$keepTextAreaAtCursor = false;\n    popup.setHighlightActiveLine(false);\n    popup.session.highlight(\"\");\n    popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n    popup.on(\"mousedown\", function (e) {\n        var pos = e.getDocumentPosition();\n        popup.selection.moveToPosition(pos);\n        selectionMarker.start.row = selectionMarker.end.row = pos.row;\n        e.stop();\n    });\n    var lastMouseEvent;\n    var hoverMarker = new Range(-1, 0, -1, Infinity);\n    var selectionMarker = new Range(-1, 0, -1, Infinity);\n    selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n    popup.setSelectOnHover = function (val) {\n        if (!val) {\n            hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n        }\n        else if (hoverMarker.id) {\n            popup.session.removeMarker(hoverMarker.id);\n            hoverMarker.id = null;\n        }\n    };\n    popup.setSelectOnHover(false);\n    popup.on(\"mousemove\", function (e) {\n        if (!lastMouseEvent) {\n            lastMouseEvent = e;\n            return;\n        }\n        if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n            return;\n        }\n        lastMouseEvent = e;\n        lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n        var row = lastMouseEvent.getDocumentPosition().row;\n        if (hoverMarker.start.row != row) {\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row);\n        }\n    });\n    popup.renderer.on(\"beforeRender\", function () {\n        if (lastMouseEvent && hoverMarker.start.row != -1) {\n            lastMouseEvent.$pos = null;\n            var row = lastMouseEvent.getDocumentPosition().row;\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row, true);\n        }\n    });\n    popup.renderer.on(\"afterRender\", function () {\n        var row = popup.getRow();\n        var t = popup.renderer.$textLayer;\n        var selected = t.element.childNodes[row - t.config.firstRow];\n        var el = document.activeElement; // Active element is textarea of main editor\n        if (selected !== t.selectedNode && t.selectedNode) {\n            dom.removeCssClass(t.selectedNode, \"ace_selected\");\n            el.removeAttribute(\"aria-activedescendant\");\n            t.selectedNode.removeAttribute(\"id\");\n        }\n        t.selectedNode = selected;\n        if (selected) {\n            dom.addCssClass(selected, \"ace_selected\");\n            var ariaId = getAriaId(row);\n            selected.id = ariaId;\n            popup.renderer.container.setAttribute(\"aria-activedescendant\", ariaId);\n            el.setAttribute(\"aria-activedescendant\", ariaId);\n            selected.setAttribute(\"aria-label\", popup.getData(row).value);\n        }\n    });\n    var hideHoverMarker = function () { setHoverMarker(-1); };\n    var setHoverMarker = function (row, suppressRedraw) {\n        if (row !== hoverMarker.start.row) {\n            hoverMarker.start.row = hoverMarker.end.row = row;\n            if (!suppressRedraw)\n                popup.session._emit(\"changeBackMarker\");\n            popup._emit(\"changeHoverMarker\");\n        }\n    };\n    popup.getHoveredRow = function () {\n        return hoverMarker.start.row;\n    };\n    event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n    popup.on(\"hide\", hideHoverMarker);\n    popup.on(\"changeSelection\", hideHoverMarker);\n    popup.session.doc.getLength = function () {\n        return popup.data.length;\n    };\n    popup.session.doc.getLine = function (i) {\n        var data = popup.data[i];\n        if (typeof data == \"string\")\n            return data;\n        return (data && data.value) || \"\";\n    };\n    var bgTokenizer = popup.session.bgTokenizer;\n    bgTokenizer.$tokenizeRow = function (row) {\n        var data = popup.data[row];\n        var tokens = [];\n        if (!data)\n            return tokens;\n        if (typeof data == \"string\")\n            data = { value: data };\n        var caption = data.caption || data.value || data.name;\n        function addToken(value, className) {\n            value && tokens.push({\n                type: (data.className || \"\") + (className || \"\"),\n                value: value\n            });\n        }\n        var lower = caption.toLowerCase();\n        var filterText = (popup.filterText || \"\").toLowerCase();\n        var lastIndex = 0;\n        var lastI = 0;\n        for (var i = 0; i <= filterText.length; i++) {\n            if (i != lastI && (data.matchMask & (1 << i) || i == filterText.length)) {\n                var sub = filterText.slice(lastI, i);\n                lastI = i;\n                var index = lower.indexOf(sub, lastIndex);\n                if (index == -1)\n                    continue;\n                addToken(caption.slice(lastIndex, index), \"\");\n                lastIndex = index + sub.length;\n                addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n            }\n        }\n        addToken(caption.slice(lastIndex, caption.length), \"\");\n        if (data.meta)\n            tokens.push({ type: \"completion-meta\", value: data.meta });\n        if (data.message)\n            tokens.push({ type: \"completion-message\", value: data.message });\n        return tokens;\n    };\n    bgTokenizer.$updateOnChange = noop;\n    bgTokenizer.start = noop;\n    popup.session.$computeWidth = function () {\n        return this.screenWidth = 0;\n    };\n    popup.isOpen = false;\n    popup.isTopdown = false;\n    popup.autoSelect = true;\n    popup.filterText = \"\";\n    popup.data = [];\n    popup.setData = function (list, filterText) {\n        popup.filterText = filterText || \"\";\n        popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n        popup.data = list || [];\n        popup.setRow(0);\n    };\n    popup.getData = function (row) {\n        return popup.data[row];\n    };\n    popup.getRow = function () {\n        return selectionMarker.start.row;\n    };\n    popup.setRow = function (line) {\n        line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n        if (selectionMarker.start.row != line) {\n            popup.selection.clearSelection();\n            selectionMarker.start.row = selectionMarker.end.row = line || 0;\n            popup.session._emit(\"changeBackMarker\");\n            popup.moveCursorTo(line || 0, 0);\n            if (popup.isOpen)\n                popup._signal(\"select\");\n        }\n    };\n    popup.on(\"changeSelection\", function () {\n        if (popup.isOpen)\n            popup.setRow(popup.selection.lead.row);\n        popup.renderer.scrollCursorIntoView();\n    });\n    popup.hide = function () {\n        this.container.style.display = \"none\";\n        this._signal(\"hide\");\n        popup.isOpen = false;\n    };\n    popup.show = function (pos, lineHeight, topdownOnly) {\n        var el = this.container;\n        var screenHeight = window.innerHeight;\n        var screenWidth = window.innerWidth;\n        var renderer = this.renderer;\n        var maxH = renderer.$maxLines * lineHeight * 1.4;\n        var top = pos.top + this.$borderSize;\n        var allowTopdown = top > screenHeight / 2 && !topdownOnly;\n        if (allowTopdown && top + lineHeight + maxH > screenHeight) {\n            renderer.$maxPixelHeight = top - 2 * this.$borderSize;\n            el.style.top = \"\";\n            el.style.bottom = screenHeight - top + \"px\";\n            popup.isTopdown = false;\n        }\n        else {\n            top += lineHeight;\n            renderer.$maxPixelHeight = screenHeight - top - 0.2 * lineHeight;\n            el.style.top = top + \"px\";\n            el.style.bottom = \"\";\n            popup.isTopdown = true;\n        }\n        el.style.display = \"\";\n        var left = pos.left;\n        if (left + el.offsetWidth > screenWidth)\n            left = screenWidth - el.offsetWidth;\n        el.style.left = left + \"px\";\n        this._signal(\"show\");\n        lastMouseEvent = null;\n        popup.isOpen = true;\n    };\n    popup.goTo = function (where) {\n        var row = this.getRow();\n        var max = this.session.getLength() - 1;\n        switch (where) {\n            case \"up\":\n                row = row <= 0 ? max : row - 1;\n                break;\n            case \"down\":\n                row = row >= max ? -1 : row + 1;\n                break;\n            case \"start\":\n                row = 0;\n                break;\n            case \"end\":\n                row = max;\n                break;\n        }\n        this.setRow(row);\n    };\n    popup.getTextLeftOffset = function () {\n        return this.$borderSize + this.renderer.$padding + this.$imageSize;\n    };\n    popup.$imageSize = 0;\n    popup.$borderSize = 1;\n    return popup;\n};\ndom.importCssString(\"\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #CAD6FA;\\n    z-index: 1;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\n    background-color: #3a674e;\\n}\\n.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid #abbffe;\\n    margin-top: -1px;\\n    background: rgba(233,233,253,0.4);\\n    position: absolute;\\n    z-index: 2;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\n    background: rgba(58, 103, 78, 0.62);\\n}\\n.ace_completion-meta {\\n    opacity: 0.5;\\n    margin: 0.9em;\\n}\\n.ace_completion-message {\\n    color: blue;\\n}\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #2d69c7;\\n}\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\n    color: #93ca12;\\n}\\n.ace_editor.ace_autocomplete {\\n    width: 300px;\\n    z-index: 200000;\\n    border: 1px lightgray solid;\\n    position: fixed;\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n    line-height: 1.4;\\n    background: #fefefe;\\n    color: #111;\\n}\\n.ace_dark.ace_editor.ace_autocomplete {\\n    border: 1px #484747 solid;\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\n    line-height: 1.4;\\n    background: #25282c;\\n    color: #c1c1c1;\\n}\", \"autocompletion.css\", false);\nexports.AcePopup = AcePopup;\nexports.$singleLineEditor = $singleLineEditor;\nexports.getAriaId = getAriaId;\n\n});\n\nace.define(\"ace/autocomplete/util\",[\"require\",\"exports\",\"module\"], function(require, exports, module){\"use strict\";\nexports.parForEach = function (array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0)\n        callback();\n    for (var i = 0; i < arLength; i++) {\n        fn(array[i], function (result, err) {\n            completed++;\n            if (completed === arLength)\n                callback(result, err);\n        });\n    }\n};\nvar ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\nexports.retrievePrecedingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos - 1; i >= 0; i--) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf.reverse().join(\"\");\n};\nexports.retrieveFollowingIdentifier = function (text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf;\n};\nexports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function (completer) {\n        if (completer.identifierRegexps) {\n            completer.identifierRegexps.forEach(function (identifierRegex) {\n                if (!prefix && identifierRegex)\n                    prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n            }.bind(this));\n        }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n};\n\n});\n\nace.define(\"ace/autocomplete\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\",\"ace/autocomplete/popup\",\"ace/autocomplete/popup\",\"ace/autocomplete/util\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/snippets\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar AcePopup = require(\"./autocomplete/popup\").AcePopup;\nvar getAriaId = require(\"./autocomplete/popup\").getAriaId;\nvar util = require(\"./autocomplete/util\");\nvar lang = require(\"./lib/lang\");\nvar dom = require(\"./lib/dom\");\nvar snippetManager = require(\"./snippets\").snippetManager;\nvar config = require(\"./config\");\nvar Autocomplete = function () {\n    this.autoInsert = false;\n    this.autoSelect = true;\n    this.exactMatch = false;\n    this.gatherCompletionsId = 0;\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys(this.commands);\n    this.blurListener = this.blurListener.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.mousedownListener = this.mousedownListener.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n    this.changeTimer = lang.delayedCall(function () {\n        this.updateCompletions(true);\n    }.bind(this));\n    this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n};\n(function () {\n    this.$init = function () {\n        this.popup = new AcePopup(document.body || document.documentElement);\n        this.popup.on(\"click\", function (e) {\n            this.insertMatch();\n            e.stop();\n        }.bind(this));\n        this.popup.focus = this.editor.focus.bind(this.editor);\n        this.popup.on(\"show\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"select\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n        return this.popup;\n    };\n    this.getPopup = function () {\n        return this.popup || this.$init();\n    };\n    this.openPopup = function (editor, prefix, keepPopupPosition) {\n        if (!this.popup)\n            this.$init();\n        this.popup.autoSelect = this.autoSelect;\n        this.popup.setData(this.completions.filtered, this.completions.filterText);\n        this.editor.textInput.setAriaOptions({ activeDescendant: getAriaId(this.popup.getRow()) });\n        editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        var renderer = editor.renderer;\n        this.popup.setRow(this.autoSelect ? 0 : -1);\n        if (!keepPopupPosition) {\n            this.popup.setTheme(editor.getTheme());\n            this.popup.setFontSize(editor.getFontSize());\n            var lineHeight = renderer.layerConfig.lineHeight;\n            var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n            pos.left -= this.popup.getTextLeftOffset();\n            var rect = editor.container.getBoundingClientRect();\n            pos.top += rect.top - renderer.layerConfig.offset;\n            pos.left += rect.left - editor.renderer.scrollLeft;\n            pos.left += renderer.gutterWidth;\n            this.popup.show(pos, lineHeight);\n        }\n        else if (keepPopupPosition && !prefix) {\n            this.detach();\n        }\n        this.changeTimer.cancel();\n    };\n    this.detach = function () {\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.off(\"changeSelection\", this.changeListener);\n        this.editor.off(\"blur\", this.blurListener);\n        this.editor.off(\"mousedown\", this.mousedownListener);\n        this.editor.off(\"mousewheel\", this.mousewheelListener);\n        this.changeTimer.cancel();\n        this.hideDocTooltip();\n        this.gatherCompletionsId += 1;\n        if (this.popup && this.popup.isOpen)\n            this.popup.hide();\n        if (this.base)\n            this.base.detach();\n        this.activated = false;\n        this.completions = this.base = null;\n    };\n    this.changeListener = function (e) {\n        var cursor = this.editor.selection.lead;\n        if (cursor.row != this.base.row || cursor.column < this.base.column) {\n            this.detach();\n        }\n        if (this.activated)\n            this.changeTimer.schedule();\n        else\n            this.detach();\n    };\n    this.blurListener = function (e) {\n        var el = document.activeElement;\n        var text = this.editor.textInput.getElement();\n        var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n        var container = this.popup && this.popup.container;\n        if (el != text && el.parentNode != container && !fromTooltip\n            && el != this.tooltipNode && e.relatedTarget != text) {\n            this.detach();\n        }\n    };\n    this.mousedownListener = function (e) {\n        this.detach();\n    };\n    this.mousewheelListener = function (e) {\n        this.detach();\n    };\n    this.goTo = function (where) {\n        this.popup.goTo(where);\n    };\n    this.insertMatch = function (data, options) {\n        if (!data)\n            data = this.popup.getData(this.popup.getRow());\n        if (!data)\n            return false;\n        var completions = this.completions;\n        this.editor.startOperation({ command: { name: \"insertMatch\" } });\n        if (data.completer && data.completer.insertMatch) {\n            data.completer.insertMatch(this.editor, data);\n        }\n        else {\n            if (!completions)\n                return false;\n            if (completions.filterText) {\n                var ranges = this.editor.selection.getAllRanges();\n                for (var i = 0, range; range = ranges[i]; i++) {\n                    range.start.column -= completions.filterText.length;\n                    this.editor.session.remove(range);\n                }\n            }\n            if (data.snippet)\n                snippetManager.insertSnippet(this.editor, data.snippet);\n            else\n                this.editor.execCommand(\"insertstring\", data.value || data);\n        }\n        if (this.completions == completions)\n            this.detach();\n        this.editor.endOperation();\n    };\n    this.commands = {\n        \"Up\": function (editor) { editor.completer.goTo(\"up\"); },\n        \"Down\": function (editor) { editor.completer.goTo(\"down\"); },\n        \"Ctrl-Up|Ctrl-Home\": function (editor) { editor.completer.goTo(\"start\"); },\n        \"Ctrl-Down|Ctrl-End\": function (editor) { editor.completer.goTo(\"end\"); },\n        \"Esc\": function (editor) { editor.completer.detach(); },\n        \"Return\": function (editor) { return editor.completer.insertMatch(); },\n        \"Shift-Return\": function (editor) { editor.completer.insertMatch(null, { deleteSuffix: true }); },\n        \"Tab\": function (editor) {\n            var result = editor.completer.insertMatch();\n            if (!result && !editor.tabstopManager)\n                editor.completer.goTo(\"down\");\n            else\n                return result;\n        },\n        \"PageUp\": function (editor) { editor.completer.popup.gotoPageUp(); },\n        \"PageDown\": function (editor) { editor.completer.popup.gotoPageDown(); }\n    };\n    this.gatherCompletions = function (editor, callback) {\n        var session = editor.getSession();\n        var pos = editor.getCursorPosition();\n        var prefix = util.getCompletionPrefix(editor);\n        this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n        this.base.$insertRight = true;\n        var matches = [];\n        var total = editor.completers.length;\n        editor.completers.forEach(function (completer, i) {\n            completer.getCompletions(editor, session, pos, prefix, function (err, results) {\n                if (!err && results)\n                    matches = matches.concat(results);\n                callback(null, {\n                    prefix: util.getCompletionPrefix(editor),\n                    matches: matches,\n                    finished: (--total === 0)\n                });\n            });\n        });\n        return true;\n    };\n    this.showPopup = function (editor, options) {\n        if (this.editor)\n            this.detach();\n        this.activated = true;\n        this.editor = editor;\n        if (editor.completer != this) {\n            if (editor.completer)\n                editor.completer.detach();\n            editor.completer = this;\n        }\n        editor.on(\"changeSelection\", this.changeListener);\n        editor.on(\"blur\", this.blurListener);\n        editor.on(\"mousedown\", this.mousedownListener);\n        editor.on(\"mousewheel\", this.mousewheelListener);\n        this.updateCompletions(false, options);\n    };\n    this.updateCompletions = function (keepPopupPosition, options) {\n        if (keepPopupPosition && this.base && this.completions) {\n            var pos = this.editor.getCursorPosition();\n            var prefix = this.editor.session.getTextRange({ start: this.base, end: pos });\n            if (prefix == this.completions.filterText)\n                return;\n            this.completions.setFilter(prefix);\n            if (!this.completions.filtered.length)\n                return this.detach();\n            if (this.completions.filtered.length == 1\n                && this.completions.filtered[0].value == prefix\n                && !this.completions.filtered[0].snippet)\n                return this.detach();\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            return;\n        }\n        if (options && options.matches) {\n            var pos = this.editor.getSelectionRange().start;\n            this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n            this.base.$insertRight = true;\n            this.completions = new FilteredList(options.matches);\n            return this.openPopup(this.editor, \"\", keepPopupPosition);\n        }\n        var _id = this.gatherCompletionsId;\n        var detachIfFinished = function (results) {\n            if (!results.finished)\n                return;\n            return this.detach();\n        }.bind(this);\n        var processResults = function (results) {\n            var prefix = results.prefix;\n            var matches = results.matches;\n            this.completions = new FilteredList(matches);\n            if (this.exactMatch)\n                this.completions.exactMatch = true;\n            this.completions.setFilter(prefix);\n            var filtered = this.completions.filtered;\n            if (!filtered.length)\n                return detachIfFinished(results);\n            if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet)\n                return detachIfFinished(results);\n            if (this.autoInsert && filtered.length == 1 && results.finished)\n                return this.insertMatch(filtered[0]);\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n        }.bind(this);\n        var isImmediate = true;\n        var immediateResults = null;\n        this.gatherCompletions(this.editor, function (err, results) {\n            var prefix = results.prefix;\n            var matches = results && results.matches;\n            if (!matches || !matches.length)\n                return detachIfFinished(results);\n            if (prefix.indexOf(results.prefix) !== 0 || _id != this.gatherCompletionsId)\n                return;\n            if (isImmediate) {\n                immediateResults = results;\n                return;\n            }\n            processResults(results);\n        }.bind(this));\n        isImmediate = false;\n        if (immediateResults) {\n            var results = immediateResults;\n            immediateResults = null;\n            processResults(results);\n        }\n    };\n    this.cancelContextMenu = function () {\n        this.editor.$mouseHandler.cancelContextMenu();\n    };\n    this.updateDocTooltip = function () {\n        var popup = this.popup;\n        var all = popup.data;\n        var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n        var doc = null;\n        if (!selected || !this.editor || !this.popup.isOpen)\n            return this.hideDocTooltip();\n        this.editor.completers.some(function (completer) {\n            if (completer.getDocTooltip)\n                doc = completer.getDocTooltip(selected);\n            return doc;\n        });\n        if (!doc && typeof selected != \"string\")\n            doc = selected;\n        if (typeof doc == \"string\")\n            doc = { docText: doc };\n        if (!doc || !(doc.docHTML || doc.docText))\n            return this.hideDocTooltip();\n        this.showDocTooltip(doc);\n    };\n    this.showDocTooltip = function (item) {\n        if (!this.tooltipNode) {\n            this.tooltipNode = dom.createElement(\"div\");\n            this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip\";\n            this.tooltipNode.style.margin = 0;\n            this.tooltipNode.style.pointerEvents = \"auto\";\n            this.tooltipNode.tabIndex = -1;\n            this.tooltipNode.onblur = this.blurListener.bind(this);\n            this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n        }\n        var tooltipNode = this.tooltipNode;\n        if (item.docHTML) {\n            tooltipNode.innerHTML = item.docHTML;\n        }\n        else if (item.docText) {\n            tooltipNode.textContent = item.docText;\n        }\n        if (!tooltipNode.parentNode)\n            document.body.appendChild(tooltipNode);\n        var popup = this.popup;\n        var rect = popup.container.getBoundingClientRect();\n        tooltipNode.style.top = popup.container.style.top;\n        tooltipNode.style.bottom = popup.container.style.bottom;\n        tooltipNode.style.display = \"block\";\n        if (window.innerWidth - rect.right < 320) {\n            if (rect.left < 320) {\n                if (popup.isTopdown) {\n                    tooltipNode.style.top = rect.bottom + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n                else {\n                    tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n            }\n            else {\n                tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n                tooltipNode.style.left = \"\";\n            }\n        }\n        else {\n            tooltipNode.style.left = (rect.right + 1) + \"px\";\n            tooltipNode.style.right = \"\";\n        }\n    };\n    this.hideDocTooltip = function () {\n        this.tooltipTimer.cancel();\n        if (!this.tooltipNode)\n            return;\n        var el = this.tooltipNode;\n        if (!this.editor.isFocused() && document.activeElement == el)\n            this.editor.focus();\n        this.tooltipNode = null;\n        if (el.parentNode)\n            el.parentNode.removeChild(el);\n    };\n    this.onTooltipClick = function (e) {\n        var a = e.target;\n        while (a && a != this.tooltipNode) {\n            if (a.nodeName == \"A\" && a.href) {\n                a.rel = \"noreferrer\";\n                a.target = \"_blank\";\n                break;\n            }\n            a = a.parentNode;\n        }\n    };\n    this.destroy = function () {\n        this.detach();\n        if (this.popup) {\n            this.popup.destroy();\n            var el = this.popup.container;\n            if (el && el.parentNode)\n                el.parentNode.removeChild(el);\n        }\n        if (this.editor && this.editor.completer == this)\n            this.editor.completer == null;\n        this.popup = null;\n    };\n}).call(Autocomplete.prototype);\nAutocomplete.for = function (editor) {\n    if (editor.completer) {\n        return editor.completer;\n    }\n    if (config.get(\"sharedPopups\")) {\n        if (!Autocomplete.$shared)\n            Autocomplete.$sharedInstance = new Autocomplete();\n        editor.completer = Autocomplete.$sharedInstance;\n    }\n    else {\n        editor.completer = new Autocomplete();\n        editor.once(\"destroy\", function (e, editor) {\n            editor.completer.destroy();\n        });\n    }\n    return editor.completer;\n};\nAutocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function (editor, options) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.autoSelect = true;\n        completer.showPopup(editor, options);\n        completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n};\nvar FilteredList = function (array, filterText) {\n    this.all = array;\n    this.filtered = array;\n    this.filterText = filterText || \"\";\n    this.exactMatch = false;\n};\n(function () {\n    this.setFilter = function (str) {\n        if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0)\n            var matches = this.filtered;\n        else\n            var matches = this.all;\n        this.filterText = str;\n        matches = this.filterCompletions(matches, this.filterText);\n        matches = matches.sort(function (a, b) {\n            return b.exactMatch - a.exactMatch || b.$score - a.$score\n                || (a.caption || a.value).localeCompare(b.caption || b.value);\n        });\n        var prev = null;\n        matches = matches.filter(function (item) {\n            var caption = item.snippet || item.caption || item.value;\n            if (caption === prev)\n                return false;\n            prev = caption;\n            return true;\n        });\n        this.filtered = matches;\n    };\n    this.filterCompletions = function (items, needle) {\n        var results = [];\n        var upper = needle.toUpperCase();\n        var lower = needle.toLowerCase();\n        loop: for (var i = 0, item; item = items[i]; i++) {\n            var caption = item.caption || item.value || item.snippet;\n            if (!caption)\n                continue;\n            var lastIndex = -1;\n            var matchMask = 0;\n            var penalty = 0;\n            var index, distance;\n            if (this.exactMatch) {\n                if (needle !== caption.substr(0, needle.length))\n                    continue loop;\n            }\n            else {\n                var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n                if (fullMatchIndex > -1) {\n                    penalty = fullMatchIndex;\n                }\n                else {\n                    for (var j = 0; j < needle.length; j++) {\n                        var i1 = caption.indexOf(lower[j], lastIndex + 1);\n                        var i2 = caption.indexOf(upper[j], lastIndex + 1);\n                        index = (i1 >= 0) ? ((i2 < 0 || i1 < i2) ? i1 : i2) : i2;\n                        if (index < 0)\n                            continue loop;\n                        distance = index - lastIndex - 1;\n                        if (distance > 0) {\n                            if (lastIndex === -1)\n                                penalty += 10;\n                            penalty += distance;\n                            matchMask = matchMask | (1 << j);\n                        }\n                        lastIndex = index;\n                    }\n                }\n            }\n            item.matchMask = matchMask;\n            item.exactMatch = penalty ? 0 : 1;\n            item.$score = (item.score || 0) - penalty;\n            results.push(item);\n        }\n        return results;\n    };\n}).call(FilteredList.prototype);\nexports.Autocomplete = Autocomplete;\nexports.FilteredList = FilteredList;\n\n});\n\nace.define(\"ace/autocomplete/text_completer\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module){var Range = require(\"../range\").Range;\nvar splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\nfunction getWordIndex(doc, pos) {\n    var textBefore = doc.getTextRange(Range.fromPoints({ row: 0, column: 0 }, pos));\n    return textBefore.split(splitRegex).length - 1;\n}\nfunction wordDistance(doc, pos) {\n    var prefixPos = getWordIndex(doc, pos);\n    var words = doc.getValue().split(splitRegex);\n    var wordScores = Object.create(null);\n    var currentWord = words[prefixPos];\n    words.forEach(function (word, idx) {\n        if (!word || word === currentWord)\n            return;\n        var distance = Math.abs(prefixPos - idx);\n        var score = words.length - distance;\n        if (wordScores[word]) {\n            wordScores[word] = Math.max(score, wordScores[word]);\n        }\n        else {\n            wordScores[word] = score;\n        }\n    });\n    return wordScores;\n}\nexports.getCompletions = function (editor, session, pos, prefix, callback) {\n    var wordScore = wordDistance(session, pos);\n    var wordList = Object.keys(wordScore);\n    callback(null, wordList.map(function (word) {\n        return {\n            caption: word,\n            value: word,\n            score: wordScore[word],\n            meta: \"local\"\n        };\n    }));\n};\n\n});\n\nace.define(\"ace/ext/language_tools\",[\"require\",\"exports\",\"module\",\"ace/snippets\",\"ace/autocomplete\",\"ace/config\",\"ace/lib/lang\",\"ace/autocomplete/util\",\"ace/autocomplete/text_completer\",\"ace/editor\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Autocomplete = require(\"../autocomplete\").Autocomplete;\nvar config = require(\"../config\");\nvar lang = require(\"../lib/lang\");\nvar util = require(\"../autocomplete/util\");\nvar textCompleter = require(\"../autocomplete/text_completer\");\nvar keyWordCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        if (session.$mode.completer) {\n            return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n        }\n        var state = editor.session.getState(pos.row);\n        var completions = session.$mode.getCompletions(state, session, pos, prefix);\n        callback(null, completions);\n    }\n};\nvar transformSnippetTooltip = function (str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function (_, p1, p2, p3) {\n        return (record[p1] = p3 || '');\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n        return record[p1];\n    });\n};\nvar snippetCompleter = {\n    getCompletions: function (editor, session, pos, prefix, callback) {\n        var scopes = [];\n        var token = session.getTokenAt(pos.row, pos.column);\n        if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/))\n            scopes.push('html-tag');\n        else\n            scopes = snippetManager.getActiveScopes(editor);\n        var snippetMap = snippetManager.snippetMap;\n        var completions = [];\n        scopes.forEach(function (scope) {\n            var snippets = snippetMap[scope] || [];\n            for (var i = snippets.length; i--;) {\n                var s = snippets[i];\n                var caption = s.name || s.tabTrigger;\n                if (!caption)\n                    continue;\n                completions.push({\n                    caption: caption,\n                    snippet: s.content,\n                    meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n                    type: \"snippet\"\n                });\n            }\n        }, this);\n        callback(null, completions);\n    },\n    getDocTooltip: function (item) {\n        if (item.type == \"snippet\" && !item.docHTML) {\n            item.docHTML = [\n                \"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\",\n                lang.escapeHTML(transformSnippetTooltip(item.snippet))\n            ].join(\"\");\n        }\n    }\n};\nvar completers = [snippetCompleter, textCompleter, keyWordCompleter];\nexports.setCompleters = function (val) {\n    completers.length = 0;\n    if (val)\n        completers.push.apply(completers, val);\n};\nexports.addCompleter = function (completer) {\n    completers.push(completer);\n};\nexports.textCompleter = textCompleter;\nexports.keyWordCompleter = keyWordCompleter;\nexports.snippetCompleter = snippetCompleter;\nvar expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function (editor) {\n        return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n};\nvar onChangeMode = function (e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n};\nvar loadSnippetsForMode = function (mode) {\n    if (typeof mode == \"string\")\n        mode = config.$modes[mode];\n    if (!mode)\n        return;\n    if (!snippetManager.files)\n        snippetManager.files = {};\n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes)\n        mode.modes.forEach(loadSnippetsForMode);\n};\nvar loadSnippetFile = function (id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id])\n        return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function (m) {\n        if (!m)\n            return;\n        snippetManager.files[id] = m;\n        if (!m.snippets && m.snippetText)\n            m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n        snippetManager.register(m.snippets || [], m.scope);\n        if (m.includeScopes) {\n            snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n            m.includeScopes.forEach(function (x) {\n                loadSnippetsForMode(\"ace/mode/\" + x);\n            });\n        }\n    });\n};\nvar doLiveAutocomplete = function (e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n    if (e.command.name === \"backspace\") {\n        if (hasCompleter && !util.getCompletionPrefix(editor))\n            editor.completer.detach();\n    }\n    else if (e.command.name === \"insertstring\") {\n        var prefix = util.getCompletionPrefix(editor);\n        if (prefix && !hasCompleter) {\n            var completer = Autocomplete.for(editor);\n            completer.autoInsert = false;\n            completer.showPopup(editor);\n        }\n    }\n};\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n        set: function (val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.addCommand(Autocomplete.startCommand);\n            }\n            else {\n                this.commands.removeCommand(Autocomplete.startCommand);\n            }\n        },\n        value: false\n    },\n    enableLiveAutocompletion: {\n        set: function (val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val) ? val : completers;\n                this.commands.on('afterExec', doLiveAutocomplete);\n            }\n            else {\n                this.commands.removeListener('afterExec', doLiveAutocomplete);\n            }\n        },\n        value: false\n    },\n    enableSnippets: {\n        set: function (val) {\n            if (val) {\n                this.commands.addCommand(expandSnippet);\n                this.on(\"changeMode\", onChangeMode);\n                onChangeMode(null, this);\n            }\n            else {\n                this.commands.removeCommand(expandSnippet);\n                this.off(\"changeMode\", onChangeMode);\n            }\n        },\n        value: false\n    }\n});\n\n});                (function() {\n                    ace.require([\"ace/ext/language_tools\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],"mappings":"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"},"metadata":{},"sourceType":"script"}