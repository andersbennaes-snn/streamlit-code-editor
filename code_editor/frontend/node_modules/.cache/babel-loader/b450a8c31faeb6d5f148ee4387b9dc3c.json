{"ast":null,"code":"ace.define(\"ace/occur\", [\"require\", \"exports\", \"module\", \"ace/lib/oop\", \"ace/range\", \"ace/search\", \"ace/edit_session\", \"ace/search_highlight\", \"ace/lib/dom\"], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n  var Range = require(\"./range\").Range;\n  var Search = require(\"./search\").Search;\n  var EditSession = require(\"./edit_session\").EditSession;\n  var SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n  function Occur() {}\n  oop.inherits(Occur, Search);\n  (function () {\n    this.enter = function (editor, options) {\n      if (!options.needle) return false;\n      var pos = editor.getCursorPosition();\n      this.displayOccurContent(editor, options);\n      var translatedPos = this.originalToOccurPosition(editor.session, pos);\n      editor.moveCursorToPosition(translatedPos);\n      return true;\n    };\n    this.exit = function (editor, options) {\n      var pos = options.translatePosition && editor.getCursorPosition();\n      var translatedPos = pos && this.occurToOriginalPosition(editor.session, pos);\n      this.displayOriginalContent(editor);\n      if (translatedPos) editor.moveCursorToPosition(translatedPos);\n      return true;\n    };\n    this.highlight = function (sess, regexp) {\n      var hl = sess.$occurHighlight = sess.$occurHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_occur-highlight\", \"text\"));\n      hl.setRegexp(regexp);\n      sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n\n    this.displayOccurContent = function (editor, options) {\n      this.$originalSession = editor.session;\n      var found = this.matchingLines(editor.session, options);\n      var lines = found.map(function (foundLine) {\n        return foundLine.content;\n      });\n      var occurSession = new EditSession(lines.join('\\n'));\n      occurSession.$occur = this;\n      occurSession.$occurMatchingLines = found;\n      editor.setSession(occurSession);\n      this.$useEmacsStyleLineStart = this.$originalSession.$useEmacsStyleLineStart;\n      occurSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n      this.highlight(occurSession, options.re);\n      occurSession._emit('changeBackMarker');\n    };\n    this.displayOriginalContent = function (editor) {\n      editor.setSession(this.$originalSession);\n      this.$originalSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n    };\n    this.originalToOccurPosition = function (session, pos) {\n      var lines = session.$occurMatchingLines;\n      var nullPos = {\n        row: 0,\n        column: 0\n      };\n      if (!lines) return nullPos;\n      for (var i = 0; i < lines.length; i++) {\n        if (lines[i].row === pos.row) return {\n          row: i,\n          column: pos.column\n        };\n      }\n      return nullPos;\n    };\n    this.occurToOriginalPosition = function (session, pos) {\n      var lines = session.$occurMatchingLines;\n      if (!lines || !lines[pos.row]) return pos;\n      return {\n        row: lines[pos.row].row,\n        column: pos.column\n      };\n    };\n    this.matchingLines = function (session, options) {\n      options = oop.mixin({}, options);\n      if (!session || !options.needle) return [];\n      var search = new Search();\n      search.set(options);\n      return search.findAll(session).reduce(function (lines, range) {\n        var row = range.start.row;\n        var last = lines[lines.length - 1];\n        return last && last.row === row ? lines : lines.concat({\n          row: row,\n          content: session.getLine(row)\n        });\n      }, []);\n    };\n  }).call(Occur.prototype);\n  var dom = require('./lib/dom');\n  dom.importCssString(\".ace_occur-highlight {\\n\\\n    border-radius: 4px;\\n\\\n    background-color: rgba(87, 255, 8, 0.25);\\n\\\n    position: absolute;\\n\\\n    z-index: 4;\\n\\\n    box-sizing: border-box;\\n\\\n    box-shadow: 0 0 4px rgb(91, 255, 50);\\n\\\n}\\n\\\n.ace_dark .ace_occur-highlight {\\n\\\n    background-color: rgb(80, 140, 85);\\n\\\n    box-shadow: 0 0 4px rgb(60, 120, 70);\\n\\\n}\\n\", \"incremental-occur-highlighting\", false);\n  exports.Occur = Occur;\n});\nace.define(\"ace/commands/occur_commands\", [\"require\", \"exports\", \"module\", \"ace/config\", \"ace/occur\", \"ace/keyboard/hash_handler\", \"ace/lib/oop\"], function (require, exports, module) {\n  var config = require(\"../config\"),\n    Occur = require(\"../occur\").Occur;\n  var occurStartCommand = {\n    name: \"occur\",\n    exec: function (editor, options) {\n      var alreadyInOccur = !!editor.session.$occur;\n      var occurSessionActive = new Occur().enter(editor, options);\n      if (occurSessionActive && !alreadyInOccur) OccurKeyboardHandler.installIn(editor);\n    },\n    readOnly: true\n  };\n  var occurCommands = [{\n    name: \"occurexit\",\n    bindKey: 'esc|Ctrl-G',\n    exec: function (editor) {\n      var occur = editor.session.$occur;\n      if (!occur) return;\n      occur.exit(editor, {});\n      if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n  }, {\n    name: \"occuraccept\",\n    bindKey: 'enter',\n    exec: function (editor) {\n      var occur = editor.session.$occur;\n      if (!occur) return;\n      occur.exit(editor, {\n        translatePosition: true\n      });\n      if (!editor.session.$occur) OccurKeyboardHandler.uninstallFrom(editor);\n    },\n    readOnly: true\n  }];\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n  var oop = require(\"../lib/oop\");\n  function OccurKeyboardHandler() {}\n  oop.inherits(OccurKeyboardHandler, HashHandler);\n  (function () {\n    this.isOccurHandler = true;\n    this.attach = function (editor) {\n      HashHandler.call(this, occurCommands, editor.commands.platform);\n      this.$editor = editor;\n    };\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n      var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n      return cmd && cmd.command ? cmd : undefined;\n    };\n  }).call(OccurKeyboardHandler.prototype);\n  OccurKeyboardHandler.installIn = function (editor) {\n    var handler = new this();\n    editor.keyBinding.addKeyboardHandler(handler);\n    editor.commands.addCommands(occurCommands);\n  };\n  OccurKeyboardHandler.uninstallFrom = function (editor) {\n    editor.commands.removeCommands(occurCommands);\n    var handler = editor.getKeyboardHandler();\n    if (handler.isOccurHandler) editor.keyBinding.removeKeyboardHandler(handler);\n  };\n  exports.occurStartCommand = occurStartCommand;\n});\nace.define(\"ace/commands/incremental_search_commands\", [\"require\", \"exports\", \"module\", \"ace/config\", \"ace/lib/oop\", \"ace/keyboard/hash_handler\", \"ace/commands/occur_commands\"], function (require, exports, module) {\n  var config = require(\"../config\");\n  var oop = require(\"../lib/oop\");\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n  var occurStartCommand = require(\"./occur_commands\").occurStartCommand;\n  exports.iSearchStartCommands = [{\n    name: \"iSearch\",\n    bindKey: {\n      win: \"Ctrl-F\",\n      mac: \"Command-F\"\n    },\n    exec: function (editor, options) {\n      config.loadModule([\"core\", \"ace/incremental_search\"], function (e) {\n        var iSearch = e.iSearch = e.iSearch || new e.IncrementalSearch();\n        iSearch.activate(editor, options.backwards);\n        if (options.jumpToFirstMatch) iSearch.next(options);\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchBackwards\",\n    exec: function (editor, jumpToNext) {\n      editor.execCommand('iSearch', {\n        backwards: true\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchAndGo\",\n    bindKey: {\n      win: \"Ctrl-K\",\n      mac: \"Command-G\"\n    },\n    exec: function (editor, jumpToNext) {\n      editor.execCommand('iSearch', {\n        jumpToFirstMatch: true,\n        useCurrentOrPrevSearch: true\n      });\n    },\n    readOnly: true\n  }, {\n    name: \"iSearchBackwardsAndGo\",\n    bindKey: {\n      win: \"Ctrl-Shift-K\",\n      mac: \"Command-Shift-G\"\n    },\n    exec: function (editor) {\n      editor.execCommand('iSearch', {\n        jumpToFirstMatch: true,\n        backwards: true,\n        useCurrentOrPrevSearch: true\n      });\n    },\n    readOnly: true\n  }];\n  exports.iSearchCommands = [{\n    name: \"restartSearch\",\n    bindKey: {\n      win: \"Ctrl-F\",\n      mac: \"Command-F\"\n    },\n    exec: function (iSearch) {\n      iSearch.cancelSearch(true);\n    }\n  }, {\n    name: \"searchForward\",\n    bindKey: {\n      win: \"Ctrl-S|Ctrl-K\",\n      mac: \"Ctrl-S|Command-G\"\n    },\n    exec: function (iSearch, options) {\n      options.useCurrentOrPrevSearch = true;\n      iSearch.next(options);\n    }\n  }, {\n    name: \"searchBackward\",\n    bindKey: {\n      win: \"Ctrl-R|Ctrl-Shift-K\",\n      mac: \"Ctrl-R|Command-Shift-G\"\n    },\n    exec: function (iSearch, options) {\n      options.useCurrentOrPrevSearch = true;\n      options.backwards = true;\n      iSearch.next(options);\n    }\n  }, {\n    name: \"extendSearchTerm\",\n    exec: function (iSearch, string) {\n      iSearch.addString(string);\n    }\n  }, {\n    name: \"extendSearchTermSpace\",\n    bindKey: \"space\",\n    exec: function (iSearch) {\n      iSearch.addString(' ');\n    }\n  }, {\n    name: \"shrinkSearchTerm\",\n    bindKey: \"backspace\",\n    exec: function (iSearch) {\n      iSearch.removeChar();\n    }\n  }, {\n    name: 'confirmSearch',\n    bindKey: 'return',\n    exec: function (iSearch) {\n      iSearch.deactivate();\n    }\n  }, {\n    name: 'cancelSearch',\n    bindKey: 'esc|Ctrl-G',\n    exec: function (iSearch) {\n      iSearch.deactivate(true);\n    }\n  }, {\n    name: 'occurisearch',\n    bindKey: 'Ctrl-O',\n    exec: function (iSearch) {\n      var options = oop.mixin({}, iSearch.$options);\n      iSearch.deactivate();\n      occurStartCommand.exec(iSearch.$editor, options);\n    }\n  }, {\n    name: \"yankNextWord\",\n    bindKey: \"Ctrl-w\",\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n        range = ed.selection.getRangeOfMovements(function (sel) {\n          sel.moveCursorWordRight();\n        }),\n        string = ed.session.getTextRange(range);\n      iSearch.addString(string);\n    }\n  }, {\n    name: \"yankNextChar\",\n    bindKey: \"Ctrl-Alt-y\",\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n        range = ed.selection.getRangeOfMovements(function (sel) {\n          sel.moveCursorRight();\n        }),\n        string = ed.session.getTextRange(range);\n      iSearch.addString(string);\n    }\n  }, {\n    name: 'recenterTopBottom',\n    bindKey: 'Ctrl-l',\n    exec: function (iSearch) {\n      iSearch.$editor.execCommand('recenterTopBottom');\n    }\n  }, {\n    name: 'selectAllMatches',\n    bindKey: 'Ctrl-space',\n    exec: function (iSearch) {\n      var ed = iSearch.$editor,\n        hl = ed.session.$isearchHighlight,\n        ranges = hl && hl.cache ? hl.cache.reduce(function (ranges, ea) {\n          return ranges.concat(ea ? ea : []);\n        }, []) : [];\n      iSearch.deactivate(false);\n      ranges.forEach(ed.selection.addRange.bind(ed.selection));\n    }\n  }, {\n    name: 'searchAsRegExp',\n    bindKey: 'Alt-r',\n    exec: function (iSearch) {\n      iSearch.convertNeedleToRegExp();\n    }\n  }].map(function (cmd) {\n    cmd.readOnly = true;\n    cmd.isIncrementalSearchCommand = true;\n    cmd.scrollIntoView = \"animate-cursor\";\n    return cmd;\n  });\n  function IncrementalSearchKeyboardHandler(iSearch) {\n    this.$iSearch = iSearch;\n  }\n  oop.inherits(IncrementalSearchKeyboardHandler, HashHandler);\n  (function () {\n    this.attach = function (editor) {\n      var iSearch = this.$iSearch;\n      HashHandler.call(this, exports.iSearchCommands, editor.commands.platform);\n      this.$commandExecHandler = editor.commands.on('exec', function (e) {\n        if (!e.command.isIncrementalSearchCommand) return iSearch.deactivate();\n        e.stopPropagation();\n        e.preventDefault();\n        var scrollTop = editor.session.getScrollTop();\n        var result = e.command.exec(iSearch, e.args || {});\n        editor.renderer.scrollCursorIntoView(null, 0.5);\n        editor.renderer.animateScrolling(scrollTop);\n        return result;\n      });\n    };\n    this.detach = function (editor) {\n      if (!this.$commandExecHandler) return;\n      editor.commands.off('exec', this.$commandExecHandler);\n      delete this.$commandExecHandler;\n    };\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n      if ((hashId === 1 /*ctrl*/ || hashId === 8 /*command*/) && key === 'v' || hashId === 1 /*ctrl*/ && key === 'y') return null;\n      var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n      if (cmd && cmd.command) {\n        return cmd;\n      }\n      if (hashId == -1) {\n        var extendCmd = this.commands.extendSearchTerm;\n        if (extendCmd) {\n          return {\n            command: extendCmd,\n            args: key\n          };\n        }\n      }\n      return false;\n    };\n  }).call(IncrementalSearchKeyboardHandler.prototype);\n  exports.IncrementalSearchKeyboardHandler = IncrementalSearchKeyboardHandler;\n});\nace.define(\"ace/incremental_search\", [\"require\", \"exports\", \"module\", \"ace/lib/oop\", \"ace/range\", \"ace/search\", \"ace/search_highlight\", \"ace/commands/incremental_search_commands\", \"ace/lib/dom\", \"ace/commands/command_manager\", \"ace/editor\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var oop = require(\"./lib/oop\");\n  var Range = require(\"./range\").Range;\n  var Search = require(\"./search\").Search;\n  var SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n  var iSearchCommandModule = require(\"./commands/incremental_search_commands\");\n  var ISearchKbd = iSearchCommandModule.IncrementalSearchKeyboardHandler;\n  function IncrementalSearch() {\n    this.$options = {\n      wrap: false,\n      skipCurrent: false\n    };\n    this.$keyboardHandler = new ISearchKbd(this);\n  }\n  oop.inherits(IncrementalSearch, Search);\n  function isRegExp(obj) {\n    return obj instanceof RegExp;\n  }\n  function regExpToObject(re) {\n    var string = String(re),\n      start = string.indexOf('/'),\n      flagStart = string.lastIndexOf('/');\n    return {\n      expression: string.slice(start + 1, flagStart),\n      flags: string.slice(flagStart + 1)\n    };\n  }\n  function stringToRegExp(string, flags) {\n    try {\n      return new RegExp(string, flags);\n    } catch (e) {\n      return string;\n    }\n  }\n  function objectToRegExp(obj) {\n    return stringToRegExp(obj.expression, obj.flags);\n  }\n  (function () {\n    this.activate = function (editor, backwards) {\n      this.$editor = editor;\n      this.$startPos = this.$currentPos = editor.getCursorPosition();\n      this.$options.needle = '';\n      this.$options.backwards = backwards;\n      editor.keyBinding.addKeyboardHandler(this.$keyboardHandler);\n      this.$originalEditorOnPaste = editor.onPaste;\n      editor.onPaste = this.onPaste.bind(this);\n      this.$mousedownHandler = editor.on('mousedown', this.onMouseDown.bind(this));\n      this.selectionFix(editor);\n      this.statusMessage(true);\n    };\n    this.deactivate = function (reset) {\n      this.cancelSearch(reset);\n      var editor = this.$editor;\n      editor.keyBinding.removeKeyboardHandler(this.$keyboardHandler);\n      if (this.$mousedownHandler) {\n        editor.off('mousedown', this.$mousedownHandler);\n        delete this.$mousedownHandler;\n      }\n      editor.onPaste = this.$originalEditorOnPaste;\n      this.message('');\n    };\n    this.selectionFix = function (editor) {\n      if (editor.selection.isEmpty() && !editor.session.$emacsMark) {\n        editor.clearSelection();\n      }\n    };\n    this.highlight = function (regexp) {\n      var sess = this.$editor.session,\n        hl = sess.$isearchHighlight = sess.$isearchHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_isearch-result\", \"text\"));\n      hl.setRegexp(regexp);\n      sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n\n    this.cancelSearch = function (reset) {\n      var e = this.$editor;\n      this.$prevNeedle = this.$options.needle;\n      this.$options.needle = '';\n      if (reset) {\n        e.moveCursorToPosition(this.$startPos);\n        this.$currentPos = this.$startPos;\n      } else {\n        e.pushEmacsMark && e.pushEmacsMark(this.$startPos, false);\n      }\n      this.highlight(null);\n      return Range.fromPoints(this.$currentPos, this.$currentPos);\n    };\n    this.highlightAndFindWithNeedle = function (moveToNext, needleUpdateFunc) {\n      if (!this.$editor) return null;\n      var options = this.$options;\n      if (needleUpdateFunc) {\n        options.needle = needleUpdateFunc.call(this, options.needle || '') || '';\n      }\n      if (options.needle.length === 0) {\n        this.statusMessage(true);\n        return this.cancelSearch(true);\n      }\n      options.start = this.$currentPos;\n      var session = this.$editor.session,\n        found = this.find(session),\n        shouldSelect = this.$editor.emacsMark ? !!this.$editor.emacsMark() : !this.$editor.selection.isEmpty();\n      if (found) {\n        if (options.backwards) found = Range.fromPoints(found.end, found.start);\n        this.$editor.selection.setRange(Range.fromPoints(shouldSelect ? this.$startPos : found.end, found.end));\n        if (moveToNext) this.$currentPos = found.end;\n        this.highlight(options.re);\n      }\n      this.statusMessage(found);\n      return found;\n    };\n    this.addString = function (s) {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        if (!isRegExp(needle)) return needle + s;\n        var reObj = regExpToObject(needle);\n        reObj.expression += s;\n        return objectToRegExp(reObj);\n      });\n    };\n    this.removeChar = function (c) {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        if (!isRegExp(needle)) return needle.substring(0, needle.length - 1);\n        var reObj = regExpToObject(needle);\n        reObj.expression = reObj.expression.substring(0, reObj.expression.length - 1);\n        return objectToRegExp(reObj);\n      });\n    };\n    this.next = function (options) {\n      options = options || {};\n      this.$options.backwards = !!options.backwards;\n      this.$currentPos = this.$editor.getCursorPosition();\n      return this.highlightAndFindWithNeedle(true, function (needle) {\n        return options.useCurrentOrPrevSearch && needle.length === 0 ? this.$prevNeedle || '' : needle;\n      });\n    };\n    this.onMouseDown = function (evt) {\n      this.deactivate();\n      return true;\n    };\n    this.onPaste = function (text) {\n      this.addString(text);\n    };\n    this.convertNeedleToRegExp = function () {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        return isRegExp(needle) ? needle : stringToRegExp(needle, 'ig');\n      });\n    };\n    this.convertNeedleToString = function () {\n      return this.highlightAndFindWithNeedle(false, function (needle) {\n        return isRegExp(needle) ? regExpToObject(needle).expression : needle;\n      });\n    };\n    this.statusMessage = function (found) {\n      var options = this.$options,\n        msg = '';\n      msg += options.backwards ? 'reverse-' : '';\n      msg += 'isearch: ' + options.needle;\n      msg += found ? '' : ' (not found)';\n      this.message(msg);\n    };\n    this.message = function (msg) {\n      if (this.$editor.showCommandLine) {\n        this.$editor.showCommandLine(msg);\n        this.$editor.focus();\n      }\n    };\n  }).call(IncrementalSearch.prototype);\n  exports.IncrementalSearch = IncrementalSearch;\n  var dom = require('./lib/dom');\n  dom.importCssString(\"\\n.ace_marker-layer .ace_isearch-result {\\n  position: absolute;\\n  z-index: 6;\\n  box-sizing: border-box;\\n}\\ndiv.ace_isearch-result {\\n  border-radius: 4px;\\n  background-color: rgba(255, 200, 0, 0.5);\\n  box-shadow: 0 0 4px rgb(255, 200, 0);\\n}\\n.ace_dark div.ace_isearch-result {\\n  background-color: rgb(100, 110, 160);\\n  box-shadow: 0 0 4px rgb(80, 90, 140);\\n}\", \"incremental-search-highlighting\", false);\n  var commands = require(\"./commands/command_manager\");\n  (function () {\n    this.setupIncrementalSearch = function (editor, val) {\n      if (this.usesIncrementalSearch == val) return;\n      this.usesIncrementalSearch = val;\n      var iSearchCommands = iSearchCommandModule.iSearchStartCommands;\n      var method = val ? 'addCommands' : 'removeCommands';\n      this[method](iSearchCommands);\n    };\n  }).call(commands.CommandManager.prototype);\n  var Editor = require(\"./editor\").Editor;\n  require(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    useIncrementalSearch: {\n      set: function (val) {\n        this.keyBinding.$handlers.forEach(function (handler) {\n          if (handler.setupIncrementalSearch) {\n            handler.setupIncrementalSearch(this, val);\n          }\n        });\n        this._emit('incrementalSearchSettingChanged', {\n          isEnabled: val\n        });\n      }\n    }\n  });\n});\nace.define(\"ace/keyboard/emacs\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/incremental_search\", \"ace/commands/incremental_search_commands\", \"ace/keyboard/hash_handler\", \"ace/lib/keys\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"../lib/dom\");\n  require(\"../incremental_search\");\n  var iSearchCommandModule = require(\"../commands/incremental_search_commands\");\n  var HashHandler = require(\"./hash_handler\").HashHandler;\n  exports.handler = new HashHandler();\n  exports.handler.isEmacs = true;\n  exports.handler.$id = \"ace/keyboard/emacs\";\n  dom.importCssString(\"\\n.emacs-mode .ace_cursor{\\n    border: 1px rgba(50,250,50,0.8) solid!important;\\n    box-sizing: border-box!important;\\n    background-color: rgba(0,250,0,0.9);\\n    opacity: 0.5;\\n}\\n.emacs-mode .ace_hidden-cursors .ace_cursor{\\n    opacity: 1;\\n    background-color: transparent;\\n}\\n.emacs-mode .ace_overwrite-cursors .ace_cursor {\\n    opacity: 1;\\n    background-color: transparent;\\n    border-width: 0 0 2px 2px !important;\\n}\\n.emacs-mode .ace_text-layer {\\n    z-index: 4\\n}\\n.emacs-mode .ace_cursor-layer {\\n    z-index: 2\\n}\", 'emacsMode');\n  var $formerLongWords;\n  var $formerLineStart;\n  exports.handler.attach = function (editor) {\n    $formerLongWords = editor.session.$selectLongWords;\n    editor.session.$selectLongWords = true;\n    $formerLineStart = editor.session.$useEmacsStyleLineStart;\n    editor.session.$useEmacsStyleLineStart = true;\n    editor.session.$emacsMark = null; // the active mark\n    editor.session.$emacsMarkRing = editor.session.$emacsMarkRing || [];\n    editor.emacsMark = function () {\n      return this.session.$emacsMark;\n    };\n    editor.setEmacsMark = function (p) {\n      this.session.$emacsMark = p;\n    };\n    editor.pushEmacsMark = function (p, activate) {\n      var prevMark = this.session.$emacsMark;\n      if (prevMark) this.session.$emacsMarkRing.push(prevMark);\n      if (!p || activate) this.setEmacsMark(p);else this.session.$emacsMarkRing.push(p);\n    };\n    editor.popEmacsMark = function () {\n      var mark = this.emacsMark();\n      if (mark) {\n        this.setEmacsMark(null);\n        return mark;\n      }\n      return this.session.$emacsMarkRing.pop();\n    };\n    editor.getLastEmacsMark = function (p) {\n      return this.session.$emacsMark || this.session.$emacsMarkRing.slice(-1)[0];\n    };\n    editor.emacsMarkForSelection = function (replacement) {\n      var sel = this.selection,\n        multiRangeLength = this.multiSelect ? this.multiSelect.getAllRanges().length : 1,\n        selIndex = sel.index || 0,\n        markRing = this.session.$emacsMarkRing,\n        markIndex = markRing.length - (multiRangeLength - selIndex),\n        lastMark = markRing[markIndex] || sel.anchor;\n      if (replacement) {\n        markRing.splice(markIndex, 1, \"row\" in replacement && \"column\" in replacement ? replacement : undefined);\n      }\n      return lastMark;\n    };\n    editor.on(\"click\", $resetMarkMode);\n    editor.on(\"changeSession\", $kbSessionChange);\n    editor.renderer.$blockCursor = true;\n    editor.setStyle(\"emacs-mode\");\n    editor.commands.addCommands(commands);\n    exports.handler.platform = editor.commands.platform;\n    editor.$emacsModeHandler = this;\n    editor.on('copy', this.onCopy);\n    editor.on('paste', this.onPaste);\n  };\n  exports.handler.detach = function (editor) {\n    editor.renderer.$blockCursor = false;\n    editor.session.$selectLongWords = $formerLongWords;\n    editor.session.$useEmacsStyleLineStart = $formerLineStart;\n    editor.off(\"click\", $resetMarkMode);\n    editor.off(\"changeSession\", $kbSessionChange);\n    editor.unsetStyle(\"emacs-mode\");\n    editor.commands.removeCommands(commands);\n    editor.off('copy', this.onCopy);\n    editor.off('paste', this.onPaste);\n    editor.$emacsModeHandler = null;\n  };\n  var $kbSessionChange = function (e) {\n    if (e.oldSession) {\n      e.oldSession.$selectLongWords = $formerLongWords;\n      e.oldSession.$useEmacsStyleLineStart = $formerLineStart;\n    }\n    $formerLongWords = e.session.$selectLongWords;\n    e.session.$selectLongWords = true;\n    $formerLineStart = e.session.$useEmacsStyleLineStart;\n    e.session.$useEmacsStyleLineStart = true;\n    if (!e.session.hasOwnProperty('$emacsMark')) e.session.$emacsMark = null;\n    if (!e.session.hasOwnProperty('$emacsMarkRing')) e.session.$emacsMarkRing = [];\n  };\n  var $resetMarkMode = function (e) {\n    e.editor.session.$emacsMark = null;\n  };\n  var keys = require(\"../lib/keys\").KEY_MODS;\n  var eMods = {\n    C: \"ctrl\",\n    S: \"shift\",\n    M: \"alt\",\n    CMD: \"command\"\n  };\n  var combinations = [\"C-S-M-CMD\", \"S-M-CMD\", \"C-M-CMD\", \"C-S-CMD\", \"C-S-M\", \"M-CMD\", \"S-CMD\", \"S-M\", \"C-CMD\", \"C-M\", \"C-S\", \"CMD\", \"M\", \"S\", \"C\"];\n  combinations.forEach(function (c) {\n    var hashId = 0;\n    c.split(\"-\").forEach(function (c) {\n      hashId = hashId | keys[eMods[c]];\n    });\n    eMods[hashId] = c.toLowerCase() + \"-\";\n  });\n  exports.handler.onCopy = function (e, editor) {\n    if (editor.$handlesEmacsOnCopy) return;\n    editor.$handlesEmacsOnCopy = true;\n    exports.handler.commands.killRingSave.exec(editor);\n    editor.$handlesEmacsOnCopy = false;\n  };\n  exports.handler.onPaste = function (e, editor) {\n    editor.pushEmacsMark(editor.getCursorPosition());\n  };\n  exports.handler.bindKey = function (key, command) {\n    if (typeof key == \"object\") key = key[this.platform];\n    if (!key) return;\n    var ckb = this.commandKeyBinding;\n    key.split(\"|\").forEach(function (keyPart) {\n      keyPart = keyPart.toLowerCase();\n      ckb[keyPart] = command;\n      var keyParts = keyPart.split(\" \").slice(0, -1);\n      keyParts.reduce(function (keyMapKeys, keyPart, i) {\n        var prefix = keyMapKeys[i - 1] ? keyMapKeys[i - 1] + ' ' : '';\n        return keyMapKeys.concat([prefix + keyPart]);\n      }, []).forEach(function (keyPart) {\n        if (!ckb[keyPart]) ckb[keyPart] = \"null\";\n      });\n    }, this);\n  };\n  exports.handler.getStatusText = function (editor, data) {\n    var str = \"\";\n    if (data.count) str += data.count;\n    if (data.keyChain) str += \" \" + data.keyChain;\n    return str;\n  };\n  exports.handler.handleKeyboard = function (data, hashId, key, keyCode) {\n    if (keyCode === -1) return undefined;\n    var editor = data.editor;\n    editor._signal(\"changeStatus\");\n    if (hashId == -1) {\n      editor.pushEmacsMark();\n      if (data.count) {\n        var str = new Array(data.count + 1).join(key);\n        data.count = null;\n        return {\n          command: \"insertstring\",\n          args: str\n        };\n      }\n    }\n    var modifier = eMods[hashId];\n    if (modifier == \"c-\" || data.count) {\n      var count = parseInt(key[key.length - 1]);\n      if (typeof count === 'number' && !isNaN(count)) {\n        data.count = Math.max(data.count, 0) || 0;\n        data.count = 10 * data.count + count;\n        return {\n          command: \"null\"\n        };\n      }\n    }\n    if (modifier) key = modifier + key;\n    if (data.keyChain) key = data.keyChain += \" \" + key;\n    var command = this.commandKeyBinding[key];\n    data.keyChain = command == \"null\" ? key : \"\";\n    if (!command) return undefined;\n    if (command === \"null\") return {\n      command: \"null\"\n    };\n    if (command === \"universalArgument\") {\n      data.count = -4;\n      return {\n        command: \"null\"\n      };\n    }\n    var args;\n    if (typeof command !== \"string\") {\n      args = command.args;\n      if (command.command) command = command.command;\n      if (command === \"goorselect\") {\n        command = editor.emacsMark() ? args[1] : args[0];\n        args = null;\n      }\n    }\n    if (typeof command === \"string\") {\n      if (command === \"insertstring\" || command === \"splitline\" || command === \"togglecomment\") {\n        editor.pushEmacsMark();\n      }\n      command = this.commands[command] || editor.commands.commands[command];\n      if (!command) return undefined;\n    }\n    if (!command.readOnly && !command.isYank) data.lastCommand = null;\n    if (!command.readOnly && editor.emacsMark()) editor.setEmacsMark(null);\n    if (data.count) {\n      var count = data.count;\n      data.count = 0;\n      if (!command || !command.handlesCount) {\n        return {\n          args: args,\n          command: {\n            exec: function (editor, args) {\n              for (var i = 0; i < count; i++) command.exec(editor, args);\n            },\n            multiSelectAction: command.multiSelectAction\n          }\n        };\n      } else {\n        if (!args) args = {};\n        if (typeof args === 'object') args.count = count;\n      }\n    }\n    return {\n      command: command,\n      args: args\n    };\n  };\n  exports.emacsKeys = {\n    \"Up|C-p\": {\n      command: \"goorselect\",\n      args: [\"golineup\", \"selectup\"]\n    },\n    \"Down|C-n\": {\n      command: \"goorselect\",\n      args: [\"golinedown\", \"selectdown\"]\n    },\n    \"Left|C-b\": {\n      command: \"goorselect\",\n      args: [\"gotoleft\", \"selectleft\"]\n    },\n    \"Right|C-f\": {\n      command: \"goorselect\",\n      args: [\"gotoright\", \"selectright\"]\n    },\n    \"C-Left|M-b\": {\n      command: \"goorselect\",\n      args: [\"gotowordleft\", \"selectwordleft\"]\n    },\n    \"C-Right|M-f\": {\n      command: \"goorselect\",\n      args: [\"gotowordright\", \"selectwordright\"]\n    },\n    \"Home|C-a\": {\n      command: \"goorselect\",\n      args: [\"gotolinestart\", \"selecttolinestart\"]\n    },\n    \"End|C-e\": {\n      command: \"goorselect\",\n      args: [\"gotolineend\", \"selecttolineend\"]\n    },\n    \"C-Home|S-M-,\": {\n      command: \"goorselect\",\n      args: [\"gotostart\", \"selecttostart\"]\n    },\n    \"C-End|S-M-.\": {\n      command: \"goorselect\",\n      args: [\"gotoend\", \"selecttoend\"]\n    },\n    \"S-Up|S-C-p\": \"selectup\",\n    \"S-Down|S-C-n\": \"selectdown\",\n    \"S-Left|S-C-b\": \"selectleft\",\n    \"S-Right|S-C-f\": \"selectright\",\n    \"S-C-Left|S-M-b\": \"selectwordleft\",\n    \"S-C-Right|S-M-f\": \"selectwordright\",\n    \"S-Home|S-C-a\": \"selecttolinestart\",\n    \"S-End|S-C-e\": \"selecttolineend\",\n    \"S-C-Home\": \"selecttostart\",\n    \"S-C-End\": \"selecttoend\",\n    \"C-l\": \"recenterTopBottom\",\n    \"M-s\": \"centerselection\",\n    \"M-g\": \"gotoline\",\n    \"C-x C-p\": \"selectall\",\n    \"C-Down\": {\n      command: \"goorselect\",\n      args: [\"gotopagedown\", \"selectpagedown\"]\n    },\n    \"C-Up\": {\n      command: \"goorselect\",\n      args: [\"gotopageup\", \"selectpageup\"]\n    },\n    \"PageDown|C-v\": {\n      command: \"goorselect\",\n      args: [\"gotopagedown\", \"selectpagedown\"]\n    },\n    \"PageUp|M-v\": {\n      command: \"goorselect\",\n      args: [\"gotopageup\", \"selectpageup\"]\n    },\n    \"S-C-Down\": \"selectpagedown\",\n    \"S-C-Up\": \"selectpageup\",\n    \"C-s\": \"iSearch\",\n    \"C-r\": \"iSearchBackwards\",\n    \"M-C-s\": \"findnext\",\n    \"M-C-r\": \"findprevious\",\n    \"S-M-5\": \"replace\",\n    \"Backspace\": \"backspace\",\n    \"Delete|C-d\": \"del\",\n    \"Return|C-m\": {\n      command: \"insertstring\",\n      args: \"\\n\"\n    },\n    \"C-o\": \"splitline\",\n    \"M-d|C-Delete\": {\n      command: \"killWord\",\n      args: \"right\"\n    },\n    \"C-Backspace|M-Backspace|M-Delete\": {\n      command: \"killWord\",\n      args: \"left\"\n    },\n    \"C-k\": \"killLine\",\n    \"C-y|S-Delete\": \"yank\",\n    \"M-y\": \"yankRotate\",\n    \"C-g\": \"keyboardQuit\",\n    \"C-w|C-S-W\": \"killRegion\",\n    \"M-w\": \"killRingSave\",\n    \"C-Space\": \"setMark\",\n    \"C-x C-x\": \"exchangePointAndMark\",\n    \"C-t\": \"transposeletters\",\n    \"M-u\": \"touppercase\",\n    \"M-l\": \"tolowercase\",\n    \"M-/\": \"autocomplete\",\n    \"C-u\": \"universalArgument\",\n    \"M-;\": \"togglecomment\",\n    \"C-/|C-x u|S-C--|C-z\": \"undo\",\n    \"S-C-/|S-C-x u|C--|S-C-z\": \"redo\",\n    \"C-x r\": \"selectRectangularRegion\",\n    \"M-x\": {\n      command: \"focusCommandLine\",\n      args: \"M-x \"\n    }\n  };\n  exports.handler.bindKeys(exports.emacsKeys);\n  exports.handler.addCommands({\n    recenterTopBottom: function (editor) {\n      var renderer = editor.renderer;\n      var pos = renderer.$cursorLayer.getPixelPosition();\n      var h = renderer.$size.scrollerHeight - renderer.lineHeight;\n      var scrollTop = renderer.scrollTop;\n      if (Math.abs(pos.top - scrollTop) < 2) {\n        scrollTop = pos.top - h;\n      } else if (Math.abs(pos.top - scrollTop - h * 0.5) < 2) {\n        scrollTop = pos.top;\n      } else {\n        scrollTop = pos.top - h * 0.5;\n      }\n      editor.session.setScrollTop(scrollTop);\n    },\n    selectRectangularRegion: function (editor) {\n      editor.multiSelect.toggleBlockSelection();\n    },\n    setMark: {\n      exec: function (editor, args) {\n        if (args && args.count) {\n          if (editor.inMultiSelectMode) editor.forEachSelection(moveToMark);else moveToMark();\n          moveToMark();\n          return;\n        }\n        var mark = editor.emacsMark(),\n          ranges = editor.selection.getAllRanges(),\n          rangePositions = ranges.map(function (r) {\n            return {\n              row: r.start.row,\n              column: r.start.column\n            };\n          }),\n          transientMarkModeActive = true,\n          hasNoSelection = ranges.every(function (range) {\n            return range.isEmpty();\n          });\n        if (transientMarkModeActive && (mark || !hasNoSelection)) {\n          if (editor.inMultiSelectMode) editor.forEachSelection({\n            exec: editor.clearSelection.bind(editor)\n          });else editor.clearSelection();\n          if (mark) editor.pushEmacsMark(null);\n          return;\n        }\n        if (!mark) {\n          rangePositions.forEach(function (pos) {\n            editor.pushEmacsMark(pos);\n          });\n          editor.setEmacsMark(rangePositions[rangePositions.length - 1]);\n          return;\n        }\n        function moveToMark() {\n          var mark = editor.popEmacsMark();\n          mark && editor.moveCursorToPosition(mark);\n        }\n      },\n      readOnly: true,\n      handlesCount: true\n    },\n    exchangePointAndMark: {\n      exec: function exchangePointAndMark$exec(editor, args) {\n        var sel = editor.selection;\n        if (!args.count && !sel.isEmpty()) {\n          // just invert selection\n          sel.setSelectionRange(sel.getRange(), !sel.isBackwards());\n          return;\n        }\n        if (args.count) {\n          // replace mark and point\n          var pos = {\n            row: sel.lead.row,\n            column: sel.lead.column\n          };\n          sel.clearSelection();\n          sel.moveCursorToPosition(editor.emacsMarkForSelection(pos));\n        } else {\n          // create selection to last mark\n          sel.selectToPosition(editor.emacsMarkForSelection());\n        }\n      },\n      readOnly: true,\n      handlesCount: true,\n      multiSelectAction: \"forEach\"\n    },\n    killWord: {\n      exec: function (editor, dir) {\n        editor.clearSelection();\n        if (dir == \"left\") editor.selection.selectWordLeft();else editor.selection.selectWordRight();\n        var range = editor.getSelectionRange();\n        var text = editor.session.getTextRange(range);\n        exports.killRing.add(text);\n        editor.session.remove(range);\n        editor.clearSelection();\n      },\n      multiSelectAction: \"forEach\"\n    },\n    killLine: function (editor) {\n      editor.pushEmacsMark(null);\n      editor.clearSelection();\n      var range = editor.getSelectionRange();\n      var line = editor.session.getLine(range.start.row);\n      range.end.column = line.length;\n      line = line.substr(range.start.column);\n      var foldLine = editor.session.getFoldLine(range.start.row);\n      if (foldLine && range.end.row != foldLine.end.row) {\n        range.end.row = foldLine.end.row;\n        line = \"x\";\n      }\n      if (/^\\s*$/.test(line)) {\n        range.end.row++;\n        line = editor.session.getLine(range.end.row);\n        range.end.column = /^\\s*$/.test(line) ? line.length : 0;\n      }\n      var text = editor.session.getTextRange(range);\n      if (editor.prevOp.command == this) exports.killRing.append(text);else exports.killRing.add(text);\n      editor.session.remove(range);\n      editor.clearSelection();\n    },\n    yank: function (editor) {\n      editor.onPaste(exports.killRing.get() || '');\n      editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    yankRotate: function (editor) {\n      if (editor.keyBinding.$data.lastCommand != \"yank\") return;\n      editor.undo();\n      editor.session.$emacsMarkRing.pop(); // also undo recording mark\n      editor.onPaste(exports.killRing.rotate());\n      editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    killRegion: {\n      exec: function (editor) {\n        exports.killRing.add(editor.getCopyText());\n        editor.commands.byName.cut.exec(editor);\n        editor.setEmacsMark(null);\n      },\n      readOnly: true,\n      multiSelectAction: \"forEach\"\n    },\n    killRingSave: {\n      exec: function (editor) {\n        editor.$handlesEmacsOnCopy = true;\n        var marks = editor.session.$emacsMarkRing.slice(),\n          deselectedMarks = [];\n        exports.killRing.add(editor.getCopyText());\n        setTimeout(function () {\n          function deselect() {\n            var sel = editor.selection,\n              range = sel.getRange(),\n              pos = sel.isBackwards() ? range.end : range.start;\n            deselectedMarks.push({\n              row: pos.row,\n              column: pos.column\n            });\n            sel.clearSelection();\n          }\n          editor.$handlesEmacsOnCopy = false;\n          if (editor.inMultiSelectMode) editor.forEachSelection({\n            exec: deselect\n          });else deselect();\n          editor.setEmacsMark(null);\n          editor.session.$emacsMarkRing = marks.concat(deselectedMarks.reverse());\n        }, 0);\n      },\n      readOnly: true\n    },\n    keyboardQuit: function (editor) {\n      editor.selection.clearSelection();\n      editor.setEmacsMark(null);\n      editor.keyBinding.$data.count = null;\n    },\n    focusCommandLine: function (editor, arg) {\n      if (editor.showCommandLine) editor.showCommandLine(arg);\n    }\n  });\n  exports.handler.addCommands(iSearchCommandModule.iSearchStartCommands);\n  var commands = exports.handler.commands;\n  commands.yank.isYank = true;\n  commands.yankRotate.isYank = true;\n  exports.killRing = {\n    $data: [],\n    add: function (str) {\n      str && this.$data.push(str);\n      if (this.$data.length > 30) this.$data.shift();\n    },\n    append: function (str) {\n      var idx = this.$data.length - 1;\n      var text = this.$data[idx] || \"\";\n      if (str) text += str;\n      if (text) this.$data[idx] = text;\n    },\n    get: function (n) {\n      n = n || 1;\n      return this.$data.slice(this.$data.length - n, this.$data.length).reverse().join('\\n');\n    },\n    pop: function () {\n      if (this.$data.length > 1) this.$data.pop();\n      return this.get();\n    },\n    rotate: function () {\n      this.$data.unshift(this.$data.pop());\n      return this.get();\n    }\n  };\n});\n(function () {\n  ace.require([\"ace/keyboard/emacs\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"names":["ace","define","require","exports","module","oop","Range","Search","EditSession","SearchHighlight","Occur","inherits","enter","editor","options","needle","pos","getCursorPosition","displayOccurContent","translatedPos","originalToOccurPosition","session","moveCursorToPosition","exit","translatePosition","occurToOriginalPosition","displayOriginalContent","highlight","sess","regexp","hl","$occurHighlight","addDynamicMarker","setRegexp","_emit","$originalSession","found","matchingLines","lines","map","foundLine","content","occurSession","join","$occur","$occurMatchingLines","setSession","$useEmacsStyleLineStart","re","nullPos","row","column","i","length","mixin","search","set","findAll","reduce","range","start","last","concat","getLine","call","prototype","dom","importCssString","config","occurStartCommand","name","exec","alreadyInOccur","occurSessionActive","OccurKeyboardHandler","installIn","readOnly","occurCommands","bindKey","occur","uninstallFrom","HashHandler","isOccurHandler","attach","commands","platform","$editor","handleKeyboard$super","handleKeyboard","data","hashId","key","keyCode","cmd","command","undefined","handler","keyBinding","addKeyboardHandler","addCommands","removeCommands","getKeyboardHandler","removeKeyboardHandler","iSearchStartCommands","win","mac","loadModule","e","iSearch","IncrementalSearch","activate","backwards","jumpToFirstMatch","next","jumpToNext","execCommand","useCurrentOrPrevSearch","iSearchCommands","cancelSearch","string","addString","removeChar","deactivate","$options","ed","selection","getRangeOfMovements","sel","moveCursorWordRight","getTextRange","moveCursorRight","$isearchHighlight","ranges","cache","ea","forEach","addRange","bind","convertNeedleToRegExp","isIncrementalSearchCommand","scrollIntoView","IncrementalSearchKeyboardHandler","$iSearch","$commandExecHandler","on","stopPropagation","preventDefault","scrollTop","getScrollTop","result","args","renderer","scrollCursorIntoView","animateScrolling","detach","off","extendCmd","extendSearchTerm","iSearchCommandModule","ISearchKbd","wrap","skipCurrent","$keyboardHandler","isRegExp","obj","RegExp","regExpToObject","String","indexOf","flagStart","lastIndexOf","expression","slice","flags","stringToRegExp","objectToRegExp","$startPos","$currentPos","$originalEditorOnPaste","onPaste","$mousedownHandler","onMouseDown","selectionFix","statusMessage","reset","message","isEmpty","$emacsMark","clearSelection","$prevNeedle","pushEmacsMark","fromPoints","highlightAndFindWithNeedle","moveToNext","needleUpdateFunc","find","shouldSelect","emacsMark","end","setRange","s","reObj","c","substring","evt","text","convertNeedleToString","msg","showCommandLine","focus","setupIncrementalSearch","val","usesIncrementalSearch","method","CommandManager","Editor","defineOptions","useIncrementalSearch","$handlers","isEnabled","isEmacs","$id","$formerLongWords","$formerLineStart","$selectLongWords","$emacsMarkRing","setEmacsMark","p","prevMark","push","popEmacsMark","mark","pop","getLastEmacsMark","emacsMarkForSelection","replacement","multiRangeLength","multiSelect","getAllRanges","selIndex","index","markRing","markIndex","lastMark","anchor","splice","$resetMarkMode","$kbSessionChange","$blockCursor","setStyle","$emacsModeHandler","onCopy","unsetStyle","oldSession","hasOwnProperty","keys","KEY_MODS","eMods","C","S","M","CMD","combinations","split","toLowerCase","$handlesEmacsOnCopy","killRingSave","ckb","commandKeyBinding","keyPart","keyParts","keyMapKeys","prefix","getStatusText","str","count","keyChain","_signal","Array","modifier","parseInt","isNaN","Math","max","isYank","lastCommand","handlesCount","multiSelectAction","emacsKeys","bindKeys","recenterTopBottom","$cursorLayer","getPixelPosition","h","$size","scrollerHeight","lineHeight","abs","top","setScrollTop","selectRectangularRegion","toggleBlockSelection","setMark","inMultiSelectMode","forEachSelection","moveToMark","rangePositions","r","transientMarkModeActive","hasNoSelection","every","exchangePointAndMark","exchangePointAndMark$exec","setSelectionRange","getRange","isBackwards","lead","selectToPosition","killWord","dir","selectWordLeft","selectWordRight","getSelectionRange","killRing","add","remove","killLine","line","substr","foldLine","getFoldLine","test","prevOp","append","yank","get","$data","yankRotate","undo","rotate","killRegion","getCopyText","byName","cut","marks","deselectedMarks","setTimeout","deselect","reverse","keyboardQuit","focusCommandLine","arg","shift","idx","n","unshift","m"],"sources":["/home/anasbouzid/streamlit/streamlit.io/streamlit-code-editor/code_editor/frontend/node_modules/ace-builds/src-noconflict/keybinding-emacs.js"],"sourcesContent":["ace.define(\"ace/occur\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/search\",\"ace/edit_session\",\"ace/search_highlight\",\"ace/lib/dom\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = require(\"./search\").Search;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nfunction Occur() { }\noop.inherits(Occur, Search);\n(function () {\n    this.enter = function (editor, options) {\n        if (!options.needle)\n            return false;\n        var pos = editor.getCursorPosition();\n        this.displayOccurContent(editor, options);\n        var translatedPos = this.originalToOccurPosition(editor.session, pos);\n        editor.moveCursorToPosition(translatedPos);\n        return true;\n    };\n    this.exit = function (editor, options) {\n        var pos = options.translatePosition && editor.getCursorPosition();\n        var translatedPos = pos && this.occurToOriginalPosition(editor.session, pos);\n        this.displayOriginalContent(editor);\n        if (translatedPos)\n            editor.moveCursorToPosition(translatedPos);\n        return true;\n    };\n    this.highlight = function (sess, regexp) {\n        var hl = sess.$occurHighlight = sess.$occurHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_occur-highlight\", \"text\"));\n        hl.setRegexp(regexp);\n        sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n    this.displayOccurContent = function (editor, options) {\n        this.$originalSession = editor.session;\n        var found = this.matchingLines(editor.session, options);\n        var lines = found.map(function (foundLine) { return foundLine.content; });\n        var occurSession = new EditSession(lines.join('\\n'));\n        occurSession.$occur = this;\n        occurSession.$occurMatchingLines = found;\n        editor.setSession(occurSession);\n        this.$useEmacsStyleLineStart = this.$originalSession.$useEmacsStyleLineStart;\n        occurSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n        this.highlight(occurSession, options.re);\n        occurSession._emit('changeBackMarker');\n    };\n    this.displayOriginalContent = function (editor) {\n        editor.setSession(this.$originalSession);\n        this.$originalSession.$useEmacsStyleLineStart = this.$useEmacsStyleLineStart;\n    };\n    this.originalToOccurPosition = function (session, pos) {\n        var lines = session.$occurMatchingLines;\n        var nullPos = { row: 0, column: 0 };\n        if (!lines)\n            return nullPos;\n        for (var i = 0; i < lines.length; i++) {\n            if (lines[i].row === pos.row)\n                return { row: i, column: pos.column };\n        }\n        return nullPos;\n    };\n    this.occurToOriginalPosition = function (session, pos) {\n        var lines = session.$occurMatchingLines;\n        if (!lines || !lines[pos.row])\n            return pos;\n        return { row: lines[pos.row].row, column: pos.column };\n    };\n    this.matchingLines = function (session, options) {\n        options = oop.mixin({}, options);\n        if (!session || !options.needle)\n            return [];\n        var search = new Search();\n        search.set(options);\n        return search.findAll(session).reduce(function (lines, range) {\n            var row = range.start.row;\n            var last = lines[lines.length - 1];\n            return last && last.row === row ?\n                lines :\n                lines.concat({ row: row, content: session.getLine(row) });\n        }, []);\n    };\n}).call(Occur.prototype);\nvar dom = require('./lib/dom');\ndom.importCssString(\".ace_occur-highlight {\\n\\\n    border-radius: 4px;\\n\\\n    background-color: rgba(87, 255, 8, 0.25);\\n\\\n    position: absolute;\\n\\\n    z-index: 4;\\n\\\n    box-sizing: border-box;\\n\\\n    box-shadow: 0 0 4px rgb(91, 255, 50);\\n\\\n}\\n\\\n.ace_dark .ace_occur-highlight {\\n\\\n    background-color: rgb(80, 140, 85);\\n\\\n    box-shadow: 0 0 4px rgb(60, 120, 70);\\n\\\n}\\n\", \"incremental-occur-highlighting\", false);\nexports.Occur = Occur;\n\n});\n\nace.define(\"ace/commands/occur_commands\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/occur\",\"ace/keyboard/hash_handler\",\"ace/lib/oop\"], function(require, exports, module){var config = require(\"../config\"), Occur = require(\"../occur\").Occur;\nvar occurStartCommand = {\n    name: \"occur\",\n    exec: function (editor, options) {\n        var alreadyInOccur = !!editor.session.$occur;\n        var occurSessionActive = new Occur().enter(editor, options);\n        if (occurSessionActive && !alreadyInOccur)\n            OccurKeyboardHandler.installIn(editor);\n    },\n    readOnly: true\n};\nvar occurCommands = [{\n        name: \"occurexit\",\n        bindKey: 'esc|Ctrl-G',\n        exec: function (editor) {\n            var occur = editor.session.$occur;\n            if (!occur)\n                return;\n            occur.exit(editor, {});\n            if (!editor.session.$occur)\n                OccurKeyboardHandler.uninstallFrom(editor);\n        },\n        readOnly: true\n    }, {\n        name: \"occuraccept\",\n        bindKey: 'enter',\n        exec: function (editor) {\n            var occur = editor.session.$occur;\n            if (!occur)\n                return;\n            occur.exit(editor, { translatePosition: true });\n            if (!editor.session.$occur)\n                OccurKeyboardHandler.uninstallFrom(editor);\n        },\n        readOnly: true\n    }];\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nvar oop = require(\"../lib/oop\");\nfunction OccurKeyboardHandler() { }\noop.inherits(OccurKeyboardHandler, HashHandler);\n(function () {\n    this.isOccurHandler = true;\n    this.attach = function (editor) {\n        HashHandler.call(this, occurCommands, editor.commands.platform);\n        this.$editor = editor;\n    };\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n        var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n        return (cmd && cmd.command) ? cmd : undefined;\n    };\n}).call(OccurKeyboardHandler.prototype);\nOccurKeyboardHandler.installIn = function (editor) {\n    var handler = new this();\n    editor.keyBinding.addKeyboardHandler(handler);\n    editor.commands.addCommands(occurCommands);\n};\nOccurKeyboardHandler.uninstallFrom = function (editor) {\n    editor.commands.removeCommands(occurCommands);\n    var handler = editor.getKeyboardHandler();\n    if (handler.isOccurHandler)\n        editor.keyBinding.removeKeyboardHandler(handler);\n};\nexports.occurStartCommand = occurStartCommand;\n\n});\n\nace.define(\"ace/commands/incremental_search_commands\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/commands/occur_commands\"], function(require, exports, module){var config = require(\"../config\");\nvar oop = require(\"../lib/oop\");\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nvar occurStartCommand = require(\"./occur_commands\").occurStartCommand;\nexports.iSearchStartCommands = [{\n        name: \"iSearch\",\n        bindKey: { win: \"Ctrl-F\", mac: \"Command-F\" },\n        exec: function (editor, options) {\n            config.loadModule([\"core\", \"ace/incremental_search\"], function (e) {\n                var iSearch = e.iSearch = e.iSearch || new e.IncrementalSearch();\n                iSearch.activate(editor, options.backwards);\n                if (options.jumpToFirstMatch)\n                    iSearch.next(options);\n            });\n        },\n        readOnly: true\n    }, {\n        name: \"iSearchBackwards\",\n        exec: function (editor, jumpToNext) { editor.execCommand('iSearch', { backwards: true }); },\n        readOnly: true\n    }, {\n        name: \"iSearchAndGo\",\n        bindKey: { win: \"Ctrl-K\", mac: \"Command-G\" },\n        exec: function (editor, jumpToNext) { editor.execCommand('iSearch', { jumpToFirstMatch: true, useCurrentOrPrevSearch: true }); },\n        readOnly: true\n    }, {\n        name: \"iSearchBackwardsAndGo\",\n        bindKey: { win: \"Ctrl-Shift-K\", mac: \"Command-Shift-G\" },\n        exec: function (editor) { editor.execCommand('iSearch', { jumpToFirstMatch: true, backwards: true, useCurrentOrPrevSearch: true }); },\n        readOnly: true\n    }];\nexports.iSearchCommands = [{\n        name: \"restartSearch\",\n        bindKey: { win: \"Ctrl-F\", mac: \"Command-F\" },\n        exec: function (iSearch) {\n            iSearch.cancelSearch(true);\n        }\n    }, {\n        name: \"searchForward\",\n        bindKey: { win: \"Ctrl-S|Ctrl-K\", mac: \"Ctrl-S|Command-G\" },\n        exec: function (iSearch, options) {\n            options.useCurrentOrPrevSearch = true;\n            iSearch.next(options);\n        }\n    }, {\n        name: \"searchBackward\",\n        bindKey: { win: \"Ctrl-R|Ctrl-Shift-K\", mac: \"Ctrl-R|Command-Shift-G\" },\n        exec: function (iSearch, options) {\n            options.useCurrentOrPrevSearch = true;\n            options.backwards = true;\n            iSearch.next(options);\n        }\n    }, {\n        name: \"extendSearchTerm\",\n        exec: function (iSearch, string) {\n            iSearch.addString(string);\n        }\n    }, {\n        name: \"extendSearchTermSpace\",\n        bindKey: \"space\",\n        exec: function (iSearch) { iSearch.addString(' '); }\n    }, {\n        name: \"shrinkSearchTerm\",\n        bindKey: \"backspace\",\n        exec: function (iSearch) {\n            iSearch.removeChar();\n        }\n    }, {\n        name: 'confirmSearch',\n        bindKey: 'return',\n        exec: function (iSearch) { iSearch.deactivate(); }\n    }, {\n        name: 'cancelSearch',\n        bindKey: 'esc|Ctrl-G',\n        exec: function (iSearch) { iSearch.deactivate(true); }\n    }, {\n        name: 'occurisearch',\n        bindKey: 'Ctrl-O',\n        exec: function (iSearch) {\n            var options = oop.mixin({}, iSearch.$options);\n            iSearch.deactivate();\n            occurStartCommand.exec(iSearch.$editor, options);\n        }\n    }, {\n        name: \"yankNextWord\",\n        bindKey: \"Ctrl-w\",\n        exec: function (iSearch) {\n            var ed = iSearch.$editor, range = ed.selection.getRangeOfMovements(function (sel) { sel.moveCursorWordRight(); }), string = ed.session.getTextRange(range);\n            iSearch.addString(string);\n        }\n    }, {\n        name: \"yankNextChar\",\n        bindKey: \"Ctrl-Alt-y\",\n        exec: function (iSearch) {\n            var ed = iSearch.$editor, range = ed.selection.getRangeOfMovements(function (sel) { sel.moveCursorRight(); }), string = ed.session.getTextRange(range);\n            iSearch.addString(string);\n        }\n    }, {\n        name: 'recenterTopBottom',\n        bindKey: 'Ctrl-l',\n        exec: function (iSearch) { iSearch.$editor.execCommand('recenterTopBottom'); }\n    }, {\n        name: 'selectAllMatches',\n        bindKey: 'Ctrl-space',\n        exec: function (iSearch) {\n            var ed = iSearch.$editor, hl = ed.session.$isearchHighlight, ranges = hl && hl.cache ? hl.cache\n                .reduce(function (ranges, ea) {\n                return ranges.concat(ea ? ea : []);\n            }, []) : [];\n            iSearch.deactivate(false);\n            ranges.forEach(ed.selection.addRange.bind(ed.selection));\n        }\n    }, {\n        name: 'searchAsRegExp',\n        bindKey: 'Alt-r',\n        exec: function (iSearch) {\n            iSearch.convertNeedleToRegExp();\n        }\n    }].map(function (cmd) {\n    cmd.readOnly = true;\n    cmd.isIncrementalSearchCommand = true;\n    cmd.scrollIntoView = \"animate-cursor\";\n    return cmd;\n});\nfunction IncrementalSearchKeyboardHandler(iSearch) {\n    this.$iSearch = iSearch;\n}\noop.inherits(IncrementalSearchKeyboardHandler, HashHandler);\n(function () {\n    this.attach = function (editor) {\n        var iSearch = this.$iSearch;\n        HashHandler.call(this, exports.iSearchCommands, editor.commands.platform);\n        this.$commandExecHandler = editor.commands.on('exec', function (e) {\n            if (!e.command.isIncrementalSearchCommand)\n                return iSearch.deactivate();\n            e.stopPropagation();\n            e.preventDefault();\n            var scrollTop = editor.session.getScrollTop();\n            var result = e.command.exec(iSearch, e.args || {});\n            editor.renderer.scrollCursorIntoView(null, 0.5);\n            editor.renderer.animateScrolling(scrollTop);\n            return result;\n        });\n    };\n    this.detach = function (editor) {\n        if (!this.$commandExecHandler)\n            return;\n        editor.commands.off('exec', this.$commandExecHandler);\n        delete this.$commandExecHandler;\n    };\n    var handleKeyboard$super = this.handleKeyboard;\n    this.handleKeyboard = function (data, hashId, key, keyCode) {\n        if (((hashId === 1 /*ctrl*/ || hashId === 8 /*command*/) && key === 'v')\n            || (hashId === 1 /*ctrl*/ && key === 'y'))\n            return null;\n        var cmd = handleKeyboard$super.call(this, data, hashId, key, keyCode);\n        if (cmd && cmd.command) {\n            return cmd;\n        }\n        if (hashId == -1) {\n            var extendCmd = this.commands.extendSearchTerm;\n            if (extendCmd) {\n                return { command: extendCmd, args: key };\n            }\n        }\n        return false;\n    };\n}).call(IncrementalSearchKeyboardHandler.prototype);\nexports.IncrementalSearchKeyboardHandler = IncrementalSearchKeyboardHandler;\n\n});\n\nace.define(\"ace/incremental_search\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/search\",\"ace/search_highlight\",\"ace/commands/incremental_search_commands\",\"ace/lib/dom\",\"ace/commands/command_manager\",\"ace/editor\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\nvar Search = require(\"./search\").Search;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\nvar iSearchCommandModule = require(\"./commands/incremental_search_commands\");\nvar ISearchKbd = iSearchCommandModule.IncrementalSearchKeyboardHandler;\nfunction IncrementalSearch() {\n    this.$options = { wrap: false, skipCurrent: false };\n    this.$keyboardHandler = new ISearchKbd(this);\n}\noop.inherits(IncrementalSearch, Search);\nfunction isRegExp(obj) {\n    return obj instanceof RegExp;\n}\nfunction regExpToObject(re) {\n    var string = String(re), start = string.indexOf('/'), flagStart = string.lastIndexOf('/');\n    return {\n        expression: string.slice(start + 1, flagStart),\n        flags: string.slice(flagStart + 1)\n    };\n}\nfunction stringToRegExp(string, flags) {\n    try {\n        return new RegExp(string, flags);\n    }\n    catch (e) {\n        return string;\n    }\n}\nfunction objectToRegExp(obj) {\n    return stringToRegExp(obj.expression, obj.flags);\n}\n(function () {\n    this.activate = function (editor, backwards) {\n        this.$editor = editor;\n        this.$startPos = this.$currentPos = editor.getCursorPosition();\n        this.$options.needle = '';\n        this.$options.backwards = backwards;\n        editor.keyBinding.addKeyboardHandler(this.$keyboardHandler);\n        this.$originalEditorOnPaste = editor.onPaste;\n        editor.onPaste = this.onPaste.bind(this);\n        this.$mousedownHandler = editor.on('mousedown', this.onMouseDown.bind(this));\n        this.selectionFix(editor);\n        this.statusMessage(true);\n    };\n    this.deactivate = function (reset) {\n        this.cancelSearch(reset);\n        var editor = this.$editor;\n        editor.keyBinding.removeKeyboardHandler(this.$keyboardHandler);\n        if (this.$mousedownHandler) {\n            editor.off('mousedown', this.$mousedownHandler);\n            delete this.$mousedownHandler;\n        }\n        editor.onPaste = this.$originalEditorOnPaste;\n        this.message('');\n    };\n    this.selectionFix = function (editor) {\n        if (editor.selection.isEmpty() && !editor.session.$emacsMark) {\n            editor.clearSelection();\n        }\n    };\n    this.highlight = function (regexp) {\n        var sess = this.$editor.session, hl = sess.$isearchHighlight = sess.$isearchHighlight || sess.addDynamicMarker(new SearchHighlight(null, \"ace_isearch-result\", \"text\"));\n        hl.setRegexp(regexp);\n        sess._emit(\"changeBackMarker\"); // force highlight layer redraw\n    };\n    this.cancelSearch = function (reset) {\n        var e = this.$editor;\n        this.$prevNeedle = this.$options.needle;\n        this.$options.needle = '';\n        if (reset) {\n            e.moveCursorToPosition(this.$startPos);\n            this.$currentPos = this.$startPos;\n        }\n        else {\n            e.pushEmacsMark && e.pushEmacsMark(this.$startPos, false);\n        }\n        this.highlight(null);\n        return Range.fromPoints(this.$currentPos, this.$currentPos);\n    };\n    this.highlightAndFindWithNeedle = function (moveToNext, needleUpdateFunc) {\n        if (!this.$editor)\n            return null;\n        var options = this.$options;\n        if (needleUpdateFunc) {\n            options.needle = needleUpdateFunc.call(this, options.needle || '') || '';\n        }\n        if (options.needle.length === 0) {\n            this.statusMessage(true);\n            return this.cancelSearch(true);\n        }\n        options.start = this.$currentPos;\n        var session = this.$editor.session, found = this.find(session), shouldSelect = this.$editor.emacsMark ?\n            !!this.$editor.emacsMark() : !this.$editor.selection.isEmpty();\n        if (found) {\n            if (options.backwards)\n                found = Range.fromPoints(found.end, found.start);\n            this.$editor.selection.setRange(Range.fromPoints(shouldSelect ? this.$startPos : found.end, found.end));\n            if (moveToNext)\n                this.$currentPos = found.end;\n            this.highlight(options.re);\n        }\n        this.statusMessage(found);\n        return found;\n    };\n    this.addString = function (s) {\n        return this.highlightAndFindWithNeedle(false, function (needle) {\n            if (!isRegExp(needle))\n                return needle + s;\n            var reObj = regExpToObject(needle);\n            reObj.expression += s;\n            return objectToRegExp(reObj);\n        });\n    };\n    this.removeChar = function (c) {\n        return this.highlightAndFindWithNeedle(false, function (needle) {\n            if (!isRegExp(needle))\n                return needle.substring(0, needle.length - 1);\n            var reObj = regExpToObject(needle);\n            reObj.expression = reObj.expression.substring(0, reObj.expression.length - 1);\n            return objectToRegExp(reObj);\n        });\n    };\n    this.next = function (options) {\n        options = options || {};\n        this.$options.backwards = !!options.backwards;\n        this.$currentPos = this.$editor.getCursorPosition();\n        return this.highlightAndFindWithNeedle(true, function (needle) {\n            return options.useCurrentOrPrevSearch && needle.length === 0 ?\n                this.$prevNeedle || '' : needle;\n        });\n    };\n    this.onMouseDown = function (evt) {\n        this.deactivate();\n        return true;\n    };\n    this.onPaste = function (text) {\n        this.addString(text);\n    };\n    this.convertNeedleToRegExp = function () {\n        return this.highlightAndFindWithNeedle(false, function (needle) {\n            return isRegExp(needle) ? needle : stringToRegExp(needle, 'ig');\n        });\n    };\n    this.convertNeedleToString = function () {\n        return this.highlightAndFindWithNeedle(false, function (needle) {\n            return isRegExp(needle) ? regExpToObject(needle).expression : needle;\n        });\n    };\n    this.statusMessage = function (found) {\n        var options = this.$options, msg = '';\n        msg += options.backwards ? 'reverse-' : '';\n        msg += 'isearch: ' + options.needle;\n        msg += found ? '' : ' (not found)';\n        this.message(msg);\n    };\n    this.message = function (msg) {\n        if (this.$editor.showCommandLine) {\n            this.$editor.showCommandLine(msg);\n            this.$editor.focus();\n        }\n    };\n}).call(IncrementalSearch.prototype);\nexports.IncrementalSearch = IncrementalSearch;\nvar dom = require('./lib/dom');\ndom.importCssString(\"\\n.ace_marker-layer .ace_isearch-result {\\n  position: absolute;\\n  z-index: 6;\\n  box-sizing: border-box;\\n}\\ndiv.ace_isearch-result {\\n  border-radius: 4px;\\n  background-color: rgba(255, 200, 0, 0.5);\\n  box-shadow: 0 0 4px rgb(255, 200, 0);\\n}\\n.ace_dark div.ace_isearch-result {\\n  background-color: rgb(100, 110, 160);\\n  box-shadow: 0 0 4px rgb(80, 90, 140);\\n}\", \"incremental-search-highlighting\", false);\nvar commands = require(\"./commands/command_manager\");\n(function () {\n    this.setupIncrementalSearch = function (editor, val) {\n        if (this.usesIncrementalSearch == val)\n            return;\n        this.usesIncrementalSearch = val;\n        var iSearchCommands = iSearchCommandModule.iSearchStartCommands;\n        var method = val ? 'addCommands' : 'removeCommands';\n        this[method](iSearchCommands);\n    };\n}).call(commands.CommandManager.prototype);\nvar Editor = require(\"./editor\").Editor;\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    useIncrementalSearch: {\n        set: function (val) {\n            this.keyBinding.$handlers.forEach(function (handler) {\n                if (handler.setupIncrementalSearch) {\n                    handler.setupIncrementalSearch(this, val);\n                }\n            });\n            this._emit('incrementalSearchSettingChanged', { isEnabled: val });\n        }\n    }\n});\n\n});\n\nace.define(\"ace/keyboard/emacs\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/incremental_search\",\"ace/commands/incremental_search_commands\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"../lib/dom\");\nrequire(\"../incremental_search\");\nvar iSearchCommandModule = require(\"../commands/incremental_search_commands\");\nvar HashHandler = require(\"./hash_handler\").HashHandler;\nexports.handler = new HashHandler();\nexports.handler.isEmacs = true;\nexports.handler.$id = \"ace/keyboard/emacs\";\ndom.importCssString(\"\\n.emacs-mode .ace_cursor{\\n    border: 1px rgba(50,250,50,0.8) solid!important;\\n    box-sizing: border-box!important;\\n    background-color: rgba(0,250,0,0.9);\\n    opacity: 0.5;\\n}\\n.emacs-mode .ace_hidden-cursors .ace_cursor{\\n    opacity: 1;\\n    background-color: transparent;\\n}\\n.emacs-mode .ace_overwrite-cursors .ace_cursor {\\n    opacity: 1;\\n    background-color: transparent;\\n    border-width: 0 0 2px 2px !important;\\n}\\n.emacs-mode .ace_text-layer {\\n    z-index: 4\\n}\\n.emacs-mode .ace_cursor-layer {\\n    z-index: 2\\n}\", 'emacsMode');\nvar $formerLongWords;\nvar $formerLineStart;\nexports.handler.attach = function (editor) {\n    $formerLongWords = editor.session.$selectLongWords;\n    editor.session.$selectLongWords = true;\n    $formerLineStart = editor.session.$useEmacsStyleLineStart;\n    editor.session.$useEmacsStyleLineStart = true;\n    editor.session.$emacsMark = null; // the active mark\n    editor.session.$emacsMarkRing = editor.session.$emacsMarkRing || [];\n    editor.emacsMark = function () {\n        return this.session.$emacsMark;\n    };\n    editor.setEmacsMark = function (p) {\n        this.session.$emacsMark = p;\n    };\n    editor.pushEmacsMark = function (p, activate) {\n        var prevMark = this.session.$emacsMark;\n        if (prevMark)\n            this.session.$emacsMarkRing.push(prevMark);\n        if (!p || activate)\n            this.setEmacsMark(p);\n        else\n            this.session.$emacsMarkRing.push(p);\n    };\n    editor.popEmacsMark = function () {\n        var mark = this.emacsMark();\n        if (mark) {\n            this.setEmacsMark(null);\n            return mark;\n        }\n        return this.session.$emacsMarkRing.pop();\n    };\n    editor.getLastEmacsMark = function (p) {\n        return this.session.$emacsMark || this.session.$emacsMarkRing.slice(-1)[0];\n    };\n    editor.emacsMarkForSelection = function (replacement) {\n        var sel = this.selection, multiRangeLength = this.multiSelect ?\n            this.multiSelect.getAllRanges().length : 1, selIndex = sel.index || 0, markRing = this.session.$emacsMarkRing, markIndex = markRing.length - (multiRangeLength - selIndex), lastMark = markRing[markIndex] || sel.anchor;\n        if (replacement) {\n            markRing.splice(markIndex, 1, \"row\" in replacement && \"column\" in replacement ?\n                replacement : undefined);\n        }\n        return lastMark;\n    };\n    editor.on(\"click\", $resetMarkMode);\n    editor.on(\"changeSession\", $kbSessionChange);\n    editor.renderer.$blockCursor = true;\n    editor.setStyle(\"emacs-mode\");\n    editor.commands.addCommands(commands);\n    exports.handler.platform = editor.commands.platform;\n    editor.$emacsModeHandler = this;\n    editor.on('copy', this.onCopy);\n    editor.on('paste', this.onPaste);\n};\nexports.handler.detach = function (editor) {\n    editor.renderer.$blockCursor = false;\n    editor.session.$selectLongWords = $formerLongWords;\n    editor.session.$useEmacsStyleLineStart = $formerLineStart;\n    editor.off(\"click\", $resetMarkMode);\n    editor.off(\"changeSession\", $kbSessionChange);\n    editor.unsetStyle(\"emacs-mode\");\n    editor.commands.removeCommands(commands);\n    editor.off('copy', this.onCopy);\n    editor.off('paste', this.onPaste);\n    editor.$emacsModeHandler = null;\n};\nvar $kbSessionChange = function (e) {\n    if (e.oldSession) {\n        e.oldSession.$selectLongWords = $formerLongWords;\n        e.oldSession.$useEmacsStyleLineStart = $formerLineStart;\n    }\n    $formerLongWords = e.session.$selectLongWords;\n    e.session.$selectLongWords = true;\n    $formerLineStart = e.session.$useEmacsStyleLineStart;\n    e.session.$useEmacsStyleLineStart = true;\n    if (!e.session.hasOwnProperty('$emacsMark'))\n        e.session.$emacsMark = null;\n    if (!e.session.hasOwnProperty('$emacsMarkRing'))\n        e.session.$emacsMarkRing = [];\n};\nvar $resetMarkMode = function (e) {\n    e.editor.session.$emacsMark = null;\n};\nvar keys = require(\"../lib/keys\").KEY_MODS;\nvar eMods = { C: \"ctrl\", S: \"shift\", M: \"alt\", CMD: \"command\" };\nvar combinations = [\"C-S-M-CMD\",\n    \"S-M-CMD\", \"C-M-CMD\", \"C-S-CMD\", \"C-S-M\",\n    \"M-CMD\", \"S-CMD\", \"S-M\", \"C-CMD\", \"C-M\", \"C-S\",\n    \"CMD\", \"M\", \"S\", \"C\"];\ncombinations.forEach(function (c) {\n    var hashId = 0;\n    c.split(\"-\").forEach(function (c) {\n        hashId = hashId | keys[eMods[c]];\n    });\n    eMods[hashId] = c.toLowerCase() + \"-\";\n});\nexports.handler.onCopy = function (e, editor) {\n    if (editor.$handlesEmacsOnCopy)\n        return;\n    editor.$handlesEmacsOnCopy = true;\n    exports.handler.commands.killRingSave.exec(editor);\n    editor.$handlesEmacsOnCopy = false;\n};\nexports.handler.onPaste = function (e, editor) {\n    editor.pushEmacsMark(editor.getCursorPosition());\n};\nexports.handler.bindKey = function (key, command) {\n    if (typeof key == \"object\")\n        key = key[this.platform];\n    if (!key)\n        return;\n    var ckb = this.commandKeyBinding;\n    key.split(\"|\").forEach(function (keyPart) {\n        keyPart = keyPart.toLowerCase();\n        ckb[keyPart] = command;\n        var keyParts = keyPart.split(\" \").slice(0, -1);\n        keyParts.reduce(function (keyMapKeys, keyPart, i) {\n            var prefix = keyMapKeys[i - 1] ? keyMapKeys[i - 1] + ' ' : '';\n            return keyMapKeys.concat([prefix + keyPart]);\n        }, []).forEach(function (keyPart) {\n            if (!ckb[keyPart])\n                ckb[keyPart] = \"null\";\n        });\n    }, this);\n};\nexports.handler.getStatusText = function (editor, data) {\n    var str = \"\";\n    if (data.count)\n        str += data.count;\n    if (data.keyChain)\n        str += \" \" + data.keyChain;\n    return str;\n};\nexports.handler.handleKeyboard = function (data, hashId, key, keyCode) {\n    if (keyCode === -1)\n        return undefined;\n    var editor = data.editor;\n    editor._signal(\"changeStatus\");\n    if (hashId == -1) {\n        editor.pushEmacsMark();\n        if (data.count) {\n            var str = new Array(data.count + 1).join(key);\n            data.count = null;\n            return { command: \"insertstring\", args: str };\n        }\n    }\n    var modifier = eMods[hashId];\n    if (modifier == \"c-\" || data.count) {\n        var count = parseInt(key[key.length - 1]);\n        if (typeof count === 'number' && !isNaN(count)) {\n            data.count = Math.max(data.count, 0) || 0;\n            data.count = 10 * data.count + count;\n            return { command: \"null\" };\n        }\n    }\n    if (modifier)\n        key = modifier + key;\n    if (data.keyChain)\n        key = data.keyChain += \" \" + key;\n    var command = this.commandKeyBinding[key];\n    data.keyChain = command == \"null\" ? key : \"\";\n    if (!command)\n        return undefined;\n    if (command === \"null\")\n        return { command: \"null\" };\n    if (command === \"universalArgument\") {\n        data.count = -4;\n        return { command: \"null\" };\n    }\n    var args;\n    if (typeof command !== \"string\") {\n        args = command.args;\n        if (command.command)\n            command = command.command;\n        if (command === \"goorselect\") {\n            command = editor.emacsMark() ? args[1] : args[0];\n            args = null;\n        }\n    }\n    if (typeof command === \"string\") {\n        if (command === \"insertstring\" ||\n            command === \"splitline\" ||\n            command === \"togglecomment\") {\n            editor.pushEmacsMark();\n        }\n        command = this.commands[command] || editor.commands.commands[command];\n        if (!command)\n            return undefined;\n    }\n    if (!command.readOnly && !command.isYank)\n        data.lastCommand = null;\n    if (!command.readOnly && editor.emacsMark())\n        editor.setEmacsMark(null);\n    if (data.count) {\n        var count = data.count;\n        data.count = 0;\n        if (!command || !command.handlesCount) {\n            return {\n                args: args,\n                command: {\n                    exec: function (editor, args) {\n                        for (var i = 0; i < count; i++)\n                            command.exec(editor, args);\n                    },\n                    multiSelectAction: command.multiSelectAction\n                }\n            };\n        }\n        else {\n            if (!args)\n                args = {};\n            if (typeof args === 'object')\n                args.count = count;\n        }\n    }\n    return { command: command, args: args };\n};\nexports.emacsKeys = {\n    \"Up|C-p\": { command: \"goorselect\", args: [\"golineup\", \"selectup\"] },\n    \"Down|C-n\": { command: \"goorselect\", args: [\"golinedown\", \"selectdown\"] },\n    \"Left|C-b\": { command: \"goorselect\", args: [\"gotoleft\", \"selectleft\"] },\n    \"Right|C-f\": { command: \"goorselect\", args: [\"gotoright\", \"selectright\"] },\n    \"C-Left|M-b\": { command: \"goorselect\", args: [\"gotowordleft\", \"selectwordleft\"] },\n    \"C-Right|M-f\": { command: \"goorselect\", args: [\"gotowordright\", \"selectwordright\"] },\n    \"Home|C-a\": { command: \"goorselect\", args: [\"gotolinestart\", \"selecttolinestart\"] },\n    \"End|C-e\": { command: \"goorselect\", args: [\"gotolineend\", \"selecttolineend\"] },\n    \"C-Home|S-M-,\": { command: \"goorselect\", args: [\"gotostart\", \"selecttostart\"] },\n    \"C-End|S-M-.\": { command: \"goorselect\", args: [\"gotoend\", \"selecttoend\"] },\n    \"S-Up|S-C-p\": \"selectup\",\n    \"S-Down|S-C-n\": \"selectdown\",\n    \"S-Left|S-C-b\": \"selectleft\",\n    \"S-Right|S-C-f\": \"selectright\",\n    \"S-C-Left|S-M-b\": \"selectwordleft\",\n    \"S-C-Right|S-M-f\": \"selectwordright\",\n    \"S-Home|S-C-a\": \"selecttolinestart\",\n    \"S-End|S-C-e\": \"selecttolineend\",\n    \"S-C-Home\": \"selecttostart\",\n    \"S-C-End\": \"selecttoend\",\n    \"C-l\": \"recenterTopBottom\",\n    \"M-s\": \"centerselection\",\n    \"M-g\": \"gotoline\",\n    \"C-x C-p\": \"selectall\",\n    \"C-Down\": { command: \"goorselect\", args: [\"gotopagedown\", \"selectpagedown\"] },\n    \"C-Up\": { command: \"goorselect\", args: [\"gotopageup\", \"selectpageup\"] },\n    \"PageDown|C-v\": { command: \"goorselect\", args: [\"gotopagedown\", \"selectpagedown\"] },\n    \"PageUp|M-v\": { command: \"goorselect\", args: [\"gotopageup\", \"selectpageup\"] },\n    \"S-C-Down\": \"selectpagedown\",\n    \"S-C-Up\": \"selectpageup\",\n    \"C-s\": \"iSearch\",\n    \"C-r\": \"iSearchBackwards\",\n    \"M-C-s\": \"findnext\",\n    \"M-C-r\": \"findprevious\",\n    \"S-M-5\": \"replace\",\n    \"Backspace\": \"backspace\",\n    \"Delete|C-d\": \"del\",\n    \"Return|C-m\": { command: \"insertstring\", args: \"\\n\" },\n    \"C-o\": \"splitline\",\n    \"M-d|C-Delete\": { command: \"killWord\", args: \"right\" },\n    \"C-Backspace|M-Backspace|M-Delete\": { command: \"killWord\", args: \"left\" },\n    \"C-k\": \"killLine\",\n    \"C-y|S-Delete\": \"yank\",\n    \"M-y\": \"yankRotate\",\n    \"C-g\": \"keyboardQuit\",\n    \"C-w|C-S-W\": \"killRegion\",\n    \"M-w\": \"killRingSave\",\n    \"C-Space\": \"setMark\",\n    \"C-x C-x\": \"exchangePointAndMark\",\n    \"C-t\": \"transposeletters\",\n    \"M-u\": \"touppercase\",\n    \"M-l\": \"tolowercase\",\n    \"M-/\": \"autocomplete\",\n    \"C-u\": \"universalArgument\",\n    \"M-;\": \"togglecomment\",\n    \"C-/|C-x u|S-C--|C-z\": \"undo\",\n    \"S-C-/|S-C-x u|C--|S-C-z\": \"redo\",\n    \"C-x r\": \"selectRectangularRegion\",\n    \"M-x\": { command: \"focusCommandLine\", args: \"M-x \" }\n};\nexports.handler.bindKeys(exports.emacsKeys);\nexports.handler.addCommands({\n    recenterTopBottom: function (editor) {\n        var renderer = editor.renderer;\n        var pos = renderer.$cursorLayer.getPixelPosition();\n        var h = renderer.$size.scrollerHeight - renderer.lineHeight;\n        var scrollTop = renderer.scrollTop;\n        if (Math.abs(pos.top - scrollTop) < 2) {\n            scrollTop = pos.top - h;\n        }\n        else if (Math.abs(pos.top - scrollTop - h * 0.5) < 2) {\n            scrollTop = pos.top;\n        }\n        else {\n            scrollTop = pos.top - h * 0.5;\n        }\n        editor.session.setScrollTop(scrollTop);\n    },\n    selectRectangularRegion: function (editor) {\n        editor.multiSelect.toggleBlockSelection();\n    },\n    setMark: {\n        exec: function (editor, args) {\n            if (args && args.count) {\n                if (editor.inMultiSelectMode)\n                    editor.forEachSelection(moveToMark);\n                else\n                    moveToMark();\n                moveToMark();\n                return;\n            }\n            var mark = editor.emacsMark(), ranges = editor.selection.getAllRanges(), rangePositions = ranges.map(function (r) { return { row: r.start.row, column: r.start.column }; }), transientMarkModeActive = true, hasNoSelection = ranges.every(function (range) { return range.isEmpty(); });\n            if (transientMarkModeActive && (mark || !hasNoSelection)) {\n                if (editor.inMultiSelectMode)\n                    editor.forEachSelection({ exec: editor.clearSelection.bind(editor) });\n                else\n                    editor.clearSelection();\n                if (mark)\n                    editor.pushEmacsMark(null);\n                return;\n            }\n            if (!mark) {\n                rangePositions.forEach(function (pos) { editor.pushEmacsMark(pos); });\n                editor.setEmacsMark(rangePositions[rangePositions.length - 1]);\n                return;\n            }\n            function moveToMark() {\n                var mark = editor.popEmacsMark();\n                mark && editor.moveCursorToPosition(mark);\n            }\n        },\n        readOnly: true,\n        handlesCount: true\n    },\n    exchangePointAndMark: {\n        exec: function exchangePointAndMark$exec(editor, args) {\n            var sel = editor.selection;\n            if (!args.count && !sel.isEmpty()) { // just invert selection\n                sel.setSelectionRange(sel.getRange(), !sel.isBackwards());\n                return;\n            }\n            if (args.count) { // replace mark and point\n                var pos = { row: sel.lead.row, column: sel.lead.column };\n                sel.clearSelection();\n                sel.moveCursorToPosition(editor.emacsMarkForSelection(pos));\n            }\n            else { // create selection to last mark\n                sel.selectToPosition(editor.emacsMarkForSelection());\n            }\n        },\n        readOnly: true,\n        handlesCount: true,\n        multiSelectAction: \"forEach\"\n    },\n    killWord: {\n        exec: function (editor, dir) {\n            editor.clearSelection();\n            if (dir == \"left\")\n                editor.selection.selectWordLeft();\n            else\n                editor.selection.selectWordRight();\n            var range = editor.getSelectionRange();\n            var text = editor.session.getTextRange(range);\n            exports.killRing.add(text);\n            editor.session.remove(range);\n            editor.clearSelection();\n        },\n        multiSelectAction: \"forEach\"\n    },\n    killLine: function (editor) {\n        editor.pushEmacsMark(null);\n        editor.clearSelection();\n        var range = editor.getSelectionRange();\n        var line = editor.session.getLine(range.start.row);\n        range.end.column = line.length;\n        line = line.substr(range.start.column);\n        var foldLine = editor.session.getFoldLine(range.start.row);\n        if (foldLine && range.end.row != foldLine.end.row) {\n            range.end.row = foldLine.end.row;\n            line = \"x\";\n        }\n        if (/^\\s*$/.test(line)) {\n            range.end.row++;\n            line = editor.session.getLine(range.end.row);\n            range.end.column = /^\\s*$/.test(line) ? line.length : 0;\n        }\n        var text = editor.session.getTextRange(range);\n        if (editor.prevOp.command == this)\n            exports.killRing.append(text);\n        else\n            exports.killRing.add(text);\n        editor.session.remove(range);\n        editor.clearSelection();\n    },\n    yank: function (editor) {\n        editor.onPaste(exports.killRing.get() || '');\n        editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    yankRotate: function (editor) {\n        if (editor.keyBinding.$data.lastCommand != \"yank\")\n            return;\n        editor.undo();\n        editor.session.$emacsMarkRing.pop(); // also undo recording mark\n        editor.onPaste(exports.killRing.rotate());\n        editor.keyBinding.$data.lastCommand = \"yank\";\n    },\n    killRegion: {\n        exec: function (editor) {\n            exports.killRing.add(editor.getCopyText());\n            editor.commands.byName.cut.exec(editor);\n            editor.setEmacsMark(null);\n        },\n        readOnly: true,\n        multiSelectAction: \"forEach\"\n    },\n    killRingSave: {\n        exec: function (editor) {\n            editor.$handlesEmacsOnCopy = true;\n            var marks = editor.session.$emacsMarkRing.slice(), deselectedMarks = [];\n            exports.killRing.add(editor.getCopyText());\n            setTimeout(function () {\n                function deselect() {\n                    var sel = editor.selection, range = sel.getRange(), pos = sel.isBackwards() ? range.end : range.start;\n                    deselectedMarks.push({ row: pos.row, column: pos.column });\n                    sel.clearSelection();\n                }\n                editor.$handlesEmacsOnCopy = false;\n                if (editor.inMultiSelectMode)\n                    editor.forEachSelection({ exec: deselect });\n                else\n                    deselect();\n                editor.setEmacsMark(null);\n                editor.session.$emacsMarkRing = marks.concat(deselectedMarks.reverse());\n            }, 0);\n        },\n        readOnly: true\n    },\n    keyboardQuit: function (editor) {\n        editor.selection.clearSelection();\n        editor.setEmacsMark(null);\n        editor.keyBinding.$data.count = null;\n    },\n    focusCommandLine: function (editor, arg) {\n        if (editor.showCommandLine)\n            editor.showCommandLine(arg);\n    }\n});\nexports.handler.addCommands(iSearchCommandModule.iSearchStartCommands);\nvar commands = exports.handler.commands;\ncommands.yank.isYank = true;\ncommands.yankRotate.isYank = true;\nexports.killRing = {\n    $data: [],\n    add: function (str) {\n        str && this.$data.push(str);\n        if (this.$data.length > 30)\n            this.$data.shift();\n    },\n    append: function (str) {\n        var idx = this.$data.length - 1;\n        var text = this.$data[idx] || \"\";\n        if (str)\n            text += str;\n        if (text)\n            this.$data[idx] = text;\n    },\n    get: function (n) {\n        n = n || 1;\n        return this.$data.slice(this.$data.length - n, this.$data.length).reverse().join('\\n');\n    },\n    pop: function () {\n        if (this.$data.length > 1)\n            this.$data.pop();\n        return this.get();\n    },\n    rotate: function () {\n        this.$data.unshift(this.$data.pop());\n        return this.get();\n    }\n};\n\n});                (function() {\n                    ace.require([\"ace/keyboard/emacs\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],"mappings":"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"},"metadata":{},"sourceType":"script"}