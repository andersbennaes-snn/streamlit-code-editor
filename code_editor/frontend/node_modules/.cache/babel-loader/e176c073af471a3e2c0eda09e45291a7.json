{"ast":null,"code":"ace.define(\"ace/snippets\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\", \"ace/lib/oop\", \"ace/lib/event_emitter\", \"ace/lib/lang\", \"ace/range\", \"ace/range_list\", \"ace/keyboard/hash_handler\", \"ace/tokenizer\", \"ace/clipboard\", \"ace/editor\"], function (require, exports, module) {\n  \"use strict\";\n\n  var dom = require(\"./lib/dom\");\n  var oop = require(\"./lib/oop\");\n  var EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n  var lang = require(\"./lib/lang\");\n  var Range = require(\"./range\").Range;\n  var RangeList = require(\"./range_list\").RangeList;\n  var HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\n  var Tokenizer = require(\"./tokenizer\").Tokenizer;\n  var clipboard = require(\"./clipboard\");\n  var VARIABLES = {\n    CURRENT_WORD: function (editor) {\n      return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n      var text = editor.session.getTextRange();\n      if (indentation) return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n      return text;\n    },\n    CURRENT_LINE: function (editor) {\n      return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n      return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n      return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n      return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n      return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n      return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n      return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n      return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n      return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) {\n      return \"/not implemented.txt\";\n    },\n    WORKSPACE_NAME: function () {\n      return \"Unknown\";\n    },\n    FULLNAME: function () {\n      return \"Unknown\";\n    },\n    BLOCK_COMMENT_START: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n      var mode = editor.session.$mode || {};\n      return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, {\n      year: \"numeric\"\n    }),\n    CURRENT_YEAR_SHORT: date.bind(null, {\n      year: \"2-digit\"\n    }),\n    CURRENT_MONTH: date.bind(null, {\n      month: \"numeric\"\n    }),\n    CURRENT_MONTH_NAME: date.bind(null, {\n      month: \"long\"\n    }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, {\n      month: \"short\"\n    }),\n    CURRENT_DATE: date.bind(null, {\n      day: \"2-digit\"\n    }),\n    CURRENT_DAY_NAME: date.bind(null, {\n      weekday: \"long\"\n    }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, {\n      weekday: \"short\"\n    }),\n    CURRENT_HOUR: date.bind(null, {\n      hour: \"2-digit\",\n      hour12: false\n    }),\n    CURRENT_MINUTE: date.bind(null, {\n      minute: \"2-digit\"\n    }),\n    CURRENT_SECOND: date.bind(null, {\n      second: \"2-digit\"\n    })\n  };\n  VARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\n  function date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n  }\n  var SnippetManager = function () {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n  };\n  (function () {\n    oop.implement(this, EventEmitter);\n    this.getTokenizer = function () {\n      return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    this.createTokenizer = function () {\n      function TabstopToken(str) {\n        str = str.substr(1);\n        if (/^\\d+$/.test(str)) return [{\n          tabstopId: parseInt(str, 10)\n        }];\n        return [{\n          text: str\n        }];\n      }\n      function escape(ch) {\n        return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n      }\n      var formatMatcher = {\n        regex: \"/(\" + escape(\"/\") + \"+)/\",\n        onMatch: function (val, state, stack) {\n          var ts = stack[0];\n          ts.fmtString = true;\n          ts.guard = val.slice(1, -1);\n          ts.flag = \"\";\n          return \"\";\n        },\n        next: \"formatString\"\n      };\n      SnippetManager.$tokenizer = new Tokenizer({\n        start: [{\n          regex: /\\\\./,\n          onMatch: function (val, state, stack) {\n            var ch = val[1];\n            if (ch == \"}\" && stack.length) {\n              val = ch;\n            } else if (\"`$\\\\\".indexOf(ch) != -1) {\n              val = ch;\n            }\n            return [val];\n          }\n        }, {\n          regex: /}/,\n          onMatch: function (val, state, stack) {\n            return [stack.length ? stack.shift() : val];\n          }\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: TabstopToken\n        }, {\n          regex: /\\$\\{[\\dA-Z_a-z]+/,\n          onMatch: function (str, state, stack) {\n            var t = TabstopToken(str.substr(1));\n            stack.unshift(t[0]);\n            return t;\n          },\n          next: \"snippetVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }],\n        snippetVar: [{\n          regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\",\n          onMatch: function (val, state, stack) {\n            var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n              return operator.length == 2 ? operator[1] : \"\\x00\";\n            }).split(\"\\x00\").map(function (value) {\n              return {\n                value: value\n              };\n            });\n            stack[0].choices = choices;\n            return [choices[0]];\n          },\n          next: \"start\"\n        }, formatMatcher, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"start\"\n        }],\n        formatString: [{\n          regex: /:/,\n          onMatch: function (val, state, stack) {\n            if (stack.length && stack[0].expectElse) {\n              stack[0].expectElse = false;\n              stack[0].ifEnd = {\n                elseEnd: stack[0]\n              };\n              return [stack[0].ifEnd];\n            }\n            return \":\";\n          }\n        }, {\n          regex: /\\\\./,\n          onMatch: function (val, state, stack) {\n            var ch = val[1];\n            if (ch == \"}\" && stack.length) val = ch;else if (\"`$\\\\\".indexOf(ch) != -1) val = ch;else if (ch == \"n\") val = \"\\n\";else if (ch == \"t\") val = \"\\t\";else if (\"ulULE\".indexOf(ch) != -1) val = {\n              changeCase: ch,\n              local: ch > \"a\"\n            };\n            return [val];\n          }\n        }, {\n          regex: \"/\\\\w*}\",\n          onMatch: function (val, state, stack) {\n            var next = stack.shift();\n            if (next) next.flag = val.slice(1, -1);\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }, {\n          regex: /\\$(?:\\d+|\\w+)/,\n          onMatch: function (val, state, stack) {\n            return [{\n              text: val.slice(1)\n            }];\n          }\n        }, {\n          regex: /\\${\\w+/,\n          onMatch: function (val, state, stack) {\n            var token = {\n              text: val.slice(2)\n            };\n            stack.unshift(token);\n            return [token];\n          },\n          next: \"formatStringVar\"\n        }, {\n          regex: /\\n/,\n          token: \"newline\",\n          merge: false\n        }, {\n          regex: /}/,\n          onMatch: function (val, state, stack) {\n            var next = stack.shift();\n            this.next = next && next.tabstopId ? \"start\" : \"\";\n            return [next || val];\n          },\n          next: \"start\"\n        }],\n        formatStringVar: [{\n          regex: /:\\/\\w+}/,\n          onMatch: function (val, state, stack) {\n            var ts = stack[0];\n            ts.formatFunction = val.slice(2, -1);\n            return [stack.shift()];\n          },\n          next: \"formatString\"\n        }, formatMatcher, {\n          regex: /:[\\?\\-+]?/,\n          onMatch: function (val, state, stack) {\n            if (val[1] == \"+\") stack[0].ifEnd = stack[0];\n            if (val[1] == \"?\") stack[0].expectElse = true;\n          },\n          next: \"formatString\"\n        }, {\n          regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\",\n          token: \"\",\n          next: \"formatString\"\n        }]\n      });\n      return SnippetManager.$tokenizer;\n    };\n    this.tokenizeTmSnippet = function (str, startState) {\n      return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n        return x.value || x;\n      });\n    };\n    this.getVariableValue = function (editor, name, indentation) {\n      if (/^\\d+$/.test(name)) return (this.variables.__ || {})[name] || \"\";\n      if (/^[A-Z]\\d+$/.test(name)) return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n      name = name.replace(/^TM_/, \"\");\n      if (!this.variables.hasOwnProperty(name)) return \"\";\n      var value = this.variables[name];\n      if (typeof value == \"function\") value = this.variables[name](editor, name, indentation);\n      return value == null ? \"\" : value;\n    };\n    this.variables = VARIABLES;\n    this.tmStrFormat = function (str, ch, editor) {\n      if (!ch.fmt) return str;\n      var flag = ch.flag || \"\";\n      var re = ch.guard;\n      re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n      var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n      var _self = this;\n      var formatted = str.replace(re, function () {\n        var oldArgs = _self.variables.__;\n        _self.variables.__ = [].slice.call(arguments);\n        var fmtParts = _self.resolveVariables(fmtTokens, editor);\n        var gChangeCase = \"E\";\n        for (var i = 0; i < fmtParts.length; i++) {\n          var ch = fmtParts[i];\n          if (typeof ch == \"object\") {\n            fmtParts[i] = \"\";\n            if (ch.changeCase && ch.local) {\n              var next = fmtParts[i + 1];\n              if (next && typeof next == \"string\") {\n                if (ch.changeCase == \"u\") fmtParts[i] = next[0].toUpperCase();else fmtParts[i] = next[0].toLowerCase();\n                fmtParts[i + 1] = next.substr(1);\n              }\n            } else if (ch.changeCase) {\n              gChangeCase = ch.changeCase;\n            }\n          } else if (gChangeCase == \"U\") {\n            fmtParts[i] = ch.toUpperCase();\n          } else if (gChangeCase == \"L\") {\n            fmtParts[i] = ch.toLowerCase();\n          }\n        }\n        _self.variables.__ = oldArgs;\n        return fmtParts.join(\"\");\n      });\n      return formatted;\n    };\n    this.tmFormatFunction = function (str, ch, editor) {\n      if (ch.formatFunction == \"upcase\") return str.toUpperCase();\n      if (ch.formatFunction == \"downcase\") return str.toLowerCase();\n      return str;\n    };\n    this.resolveVariables = function (snippet, editor) {\n      var result = [];\n      var indentation = \"\";\n      var afterNewLine = true;\n      for (var i = 0; i < snippet.length; i++) {\n        var ch = snippet[i];\n        if (typeof ch == \"string\") {\n          result.push(ch);\n          if (ch == \"\\n\") {\n            afterNewLine = true;\n            indentation = \"\";\n          } else if (afterNewLine) {\n            indentation = /^\\t*/.exec(ch)[0];\n            afterNewLine = /\\S/.test(ch);\n          }\n          continue;\n        }\n        if (!ch) continue;\n        afterNewLine = false;\n        if (ch.fmtString) {\n          var j = snippet.indexOf(ch, i + 1);\n          if (j == -1) j = snippet.length;\n          ch.fmt = snippet.slice(i + 1, j);\n          i = j;\n        }\n        if (ch.text) {\n          var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n          if (ch.fmtString) value = this.tmStrFormat(value, ch, editor);\n          if (ch.formatFunction) value = this.tmFormatFunction(value, ch, editor);\n          if (value && !ch.ifEnd) {\n            result.push(value);\n            gotoNext(ch);\n          } else if (!value && ch.ifEnd) {\n            gotoNext(ch.ifEnd);\n          }\n        } else if (ch.elseEnd) {\n          gotoNext(ch.elseEnd);\n        } else if (ch.tabstopId != null) {\n          result.push(ch);\n        } else if (ch.changeCase != null) {\n          result.push(ch);\n        }\n      }\n      function gotoNext(ch) {\n        var i1 = snippet.indexOf(ch, i + 1);\n        if (i1 != -1) i = i1;\n      }\n      return result;\n    };\n    this.insertSnippetForSelection = function (editor, snippetText) {\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var tabString = editor.session.getTabString();\n      var indentString = line.match(/^\\s*/)[0];\n      if (cursor.column < indentString.length) indentString = indentString.slice(0, cursor.column);\n      snippetText = snippetText.replace(/\\r/g, \"\");\n      var tokens = this.tokenizeTmSnippet(snippetText);\n      tokens = this.resolveVariables(tokens, editor);\n      tokens = tokens.map(function (x) {\n        if (x == \"\\n\") return x + indentString;\n        if (typeof x == \"string\") return x.replace(/\\t/g, tabString);\n        return x;\n      });\n      var tabstops = [];\n      tokens.forEach(function (p, i) {\n        if (typeof p != \"object\") return;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        if (!ts) {\n          ts = tabstops[id] = [];\n          ts.index = id;\n          ts.value = \"\";\n          ts.parents = {};\n        }\n        if (ts.indexOf(p) !== -1) return;\n        if (p.choices && !ts.choices) ts.choices = p.choices;\n        ts.push(p);\n        var i1 = tokens.indexOf(p, i + 1);\n        if (i1 === -1) return;\n        var value = tokens.slice(i + 1, i1);\n        var isNested = value.some(function (t) {\n          return typeof t === \"object\";\n        });\n        if (isNested && !ts.value) {\n          ts.value = value;\n        } else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n          ts.value = value.join(\"\");\n        }\n      });\n      tabstops.forEach(function (ts) {\n        ts.length = 0;\n      });\n      var expanding = {};\n      function copyValue(val) {\n        var copy = [];\n        for (var i = 0; i < val.length; i++) {\n          var p = val[i];\n          if (typeof p == \"object\") {\n            if (expanding[p.tabstopId]) continue;\n            var j = val.lastIndexOf(p, i - 1);\n            p = copy[j] || {\n              tabstopId: p.tabstopId\n            };\n          }\n          copy[i] = p;\n        }\n        return copy;\n      }\n      for (var i = 0; i < tokens.length; i++) {\n        var p = tokens[i];\n        if (typeof p != \"object\") continue;\n        var id = p.tabstopId;\n        var ts = tabstops[id];\n        var i1 = tokens.indexOf(p, i + 1);\n        if (expanding[id]) {\n          if (expanding[id] === p) {\n            delete expanding[id];\n            Object.keys(expanding).forEach(function (parentId) {\n              ts.parents[parentId] = true;\n            });\n          }\n          continue;\n        }\n        expanding[id] = p;\n        var value = ts.value;\n        if (typeof value !== \"string\") value = copyValue(value);else if (p.fmt) value = this.tmStrFormat(value, p, editor);\n        tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n        if (ts.indexOf(p) === -1) ts.push(p);\n      }\n      var row = 0,\n        column = 0;\n      var text = \"\";\n      tokens.forEach(function (t) {\n        if (typeof t === \"string\") {\n          var lines = t.split(\"\\n\");\n          if (lines.length > 1) {\n            column = lines[lines.length - 1].length;\n            row += lines.length - 1;\n          } else column += t.length;\n          text += t;\n        } else if (t) {\n          if (!t.start) t.start = {\n            row: row,\n            column: column\n          };else t.end = {\n            row: row,\n            column: column\n          };\n        }\n      });\n      var range = editor.getSelectionRange();\n      var end = editor.session.replace(range, text);\n      var tabstopManager = new TabstopManager(editor);\n      var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n      tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    this.insertSnippet = function (editor, snippetText) {\n      var self = this;\n      if (editor.inVirtualSelectionMode) return self.insertSnippetForSelection(editor, snippetText);\n      editor.forEachSelection(function () {\n        self.insertSnippetForSelection(editor, snippetText);\n      }, null, {\n        keepOrder: true\n      });\n      if (editor.tabstopManager) editor.tabstopManager.tabNext();\n    };\n    this.$getScope = function (editor) {\n      var scope = editor.session.$mode.$id || \"\";\n      scope = scope.split(\"/\").pop();\n      if (scope === \"html\" || scope === \"php\") {\n        if (scope === \"php\" && !editor.session.$mode.inlinePhp) scope = \"html\";\n        var c = editor.getCursorPosition();\n        var state = editor.session.getState(c.row);\n        if (typeof state === \"object\") {\n          state = state[0];\n        }\n        if (state.substring) {\n          if (state.substring(0, 3) == \"js-\") scope = \"javascript\";else if (state.substring(0, 4) == \"css-\") scope = \"css\";else if (state.substring(0, 4) == \"php-\") scope = \"php\";\n        }\n      }\n      return scope;\n    };\n    this.getActiveScopes = function (editor) {\n      var scope = this.$getScope(editor);\n      var scopes = [scope];\n      var snippetMap = this.snippetMap;\n      if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n        scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n      }\n      scopes.push(\"_\");\n      return scopes;\n    };\n    this.expandWithTab = function (editor, options) {\n      var self = this;\n      var result = editor.forEachSelection(function () {\n        return self.expandSnippetForSelection(editor, options);\n      }, null, {\n        keepOrder: true\n      });\n      if (result && editor.tabstopManager) editor.tabstopManager.tabNext();\n      return result;\n    };\n    this.expandSnippetForSelection = function (editor, options) {\n      var cursor = editor.getCursorPosition();\n      var line = editor.session.getLine(cursor.row);\n      var before = line.substring(0, cursor.column);\n      var after = line.substr(cursor.column);\n      var snippetMap = this.snippetMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = this.findMatchingSnippet(snippets, before, after);\n        return !!snippet;\n      }, this);\n      if (!snippet) return false;\n      if (options && options.dryRun) return true;\n      editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n      this.variables.M__ = snippet.matchBefore;\n      this.variables.T__ = snippet.matchAfter;\n      this.insertSnippetForSelection(editor, snippet.content);\n      this.variables.M__ = this.variables.T__ = null;\n      return true;\n    };\n    this.findMatchingSnippet = function (snippetList, before, after) {\n      for (var i = snippetList.length; i--;) {\n        var s = snippetList[i];\n        if (s.startRe && !s.startRe.test(before)) continue;\n        if (s.endRe && !s.endRe.test(after)) continue;\n        if (!s.startRe && !s.endRe) continue;\n        s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n        s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n        s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n        s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n        return s;\n      }\n    };\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n      var self = this;\n      if (!snippets) snippets = [];\n      function wrapRegexp(src) {\n        if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src)) src = \"(?:\" + src + \")\";\n        return src || \"\";\n      }\n      function guardedRegexp(re, guard, opening) {\n        re = wrapRegexp(re);\n        guard = wrapRegexp(guard);\n        if (opening) {\n          re = guard + re;\n          if (re && re[re.length - 1] != \"$\") re = re + \"$\";\n        } else {\n          re = re + guard;\n          if (re && re[0] != \"^\") re = \"^\" + re;\n        }\n        return new RegExp(re);\n      }\n      function addSnippet(s) {\n        if (!s.scope) s.scope = scope || \"_\";\n        scope = s.scope;\n        if (!snippetMap[scope]) {\n          snippetMap[scope] = [];\n          snippetNameMap[scope] = {};\n        }\n        var map = snippetNameMap[scope];\n        if (s.name) {\n          var old = map[s.name];\n          if (old) self.unregister(old);\n          map[s.name] = s;\n        }\n        snippetMap[scope].push(s);\n        if (s.prefix) s.tabTrigger = s.prefix;\n        if (!s.content && s.body) s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n        if (s.tabTrigger && !s.trigger) {\n          if (!s.guard && /^\\w/.test(s.tabTrigger)) s.guard = \"\\\\b\";\n          s.trigger = lang.escapeRegExp(s.tabTrigger);\n        }\n        if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard) return;\n        s.startRe = guardedRegexp(s.trigger, s.guard, true);\n        s.triggerRe = new RegExp(s.trigger);\n        s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n        s.endTriggerRe = new RegExp(s.endTrigger);\n      }\n      if (Array.isArray(snippets)) {\n        snippets.forEach(addSnippet);\n      } else {\n        Object.keys(snippets).forEach(function (key) {\n          addSnippet(snippets[key]);\n        });\n      }\n      this._signal(\"registerSnippets\", {\n        scope: scope\n      });\n    };\n    this.unregister = function (snippets, scope) {\n      var snippetMap = this.snippetMap;\n      var snippetNameMap = this.snippetNameMap;\n      function removeSnippet(s) {\n        var nameMap = snippetNameMap[s.scope || scope];\n        if (nameMap && nameMap[s.name]) {\n          delete nameMap[s.name];\n          var map = snippetMap[s.scope || scope];\n          var i = map && map.indexOf(s);\n          if (i >= 0) map.splice(i, 1);\n        }\n      }\n      if (snippets.content) removeSnippet(snippets);else if (Array.isArray(snippets)) snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function (str) {\n      str = str.replace(/\\r/g, \"\");\n      var list = [],\n        snippet = {};\n      var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n      var m;\n      while (m = re.exec(str)) {\n        if (m[1]) {\n          try {\n            snippet = JSON.parse(m[1]);\n            list.push(snippet);\n          } catch (e) {}\n        }\n        if (m[4]) {\n          snippet.content = m[4].replace(/^\\t/gm, \"\");\n          list.push(snippet);\n          snippet = {};\n        } else {\n          var key = m[2],\n            val = m[3];\n          if (key == \"regex\") {\n            var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n            snippet.guard = guardRe.exec(val)[1];\n            snippet.trigger = guardRe.exec(val)[1];\n            snippet.endTrigger = guardRe.exec(val)[1];\n            snippet.endGuard = guardRe.exec(val)[1];\n          } else if (key == \"snippet\") {\n            snippet.tabTrigger = val.match(/^\\S*/)[0];\n            if (!snippet.name) snippet.name = val;\n          } else if (key) {\n            snippet[key] = val;\n          }\n        }\n      }\n      return list;\n    };\n    this.getSnippetByName = function (name, editor) {\n      var snippetMap = this.snippetNameMap;\n      var snippet;\n      this.getActiveScopes(editor).some(function (scope) {\n        var snippets = snippetMap[scope];\n        if (snippets) snippet = snippets[name];\n        return !!snippet;\n      }, this);\n      return snippet;\n    };\n  }).call(SnippetManager.prototype);\n  var TabstopManager = function (editor) {\n    if (editor.tabstopManager) return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n  };\n  (function () {\n    this.attach = function (editor) {\n      this.index = 0;\n      this.ranges = [];\n      this.tabstops = [];\n      this.$openTabstops = null;\n      this.selectedTabstop = null;\n      this.editor = editor;\n      this.editor.on(\"change\", this.$onChange);\n      this.editor.on(\"changeSelection\", this.$onChangeSelection);\n      this.editor.on(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function () {\n      this.tabstops.forEach(this.removeTabstopMarkers, this);\n      this.ranges = null;\n      this.tabstops = null;\n      this.selectedTabstop = null;\n      this.editor.removeListener(\"change\", this.$onChange);\n      this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n      this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n      this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n      this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n      this.editor.tabstopManager = null;\n      this.editor = null;\n    };\n    this.onChange = function (delta) {\n      var isRemove = delta.action[0] == \"r\";\n      var selectedTabstop = this.selectedTabstop || {};\n      var parents = selectedTabstop.parents || {};\n      var tabstops = (this.tabstops || []).slice();\n      for (var i = 0; i < tabstops.length; i++) {\n        var ts = tabstops[i];\n        var active = ts == selectedTabstop || parents[ts.index];\n        ts.rangeList.$bias = active ? 0 : 1;\n        if (delta.action == \"remove\" && ts !== selectedTabstop) {\n          var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n          var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n          startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n          var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n          endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n          var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n          for (var j = 0; j < toRemove.length; j++) this.removeRange(toRemove[j]);\n        }\n        ts.rangeList.$onChange(delta);\n      }\n      var session = this.editor.session;\n      if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue()) this.detach();\n    };\n    this.updateLinkedFields = function () {\n      var ts = this.selectedTabstop;\n      if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked) return;\n      this.$inChange = true;\n      var session = this.editor.session;\n      var text = session.getTextRange(ts.firstNonLinked);\n      for (var i = 0; i < ts.length; i++) {\n        var range = ts[i];\n        if (!range.linked) continue;\n        var original = range.original;\n        var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n        session.replace(range, fmt);\n      }\n      this.$inChange = false;\n    };\n    this.onAfterExec = function (e) {\n      if (e.command && !e.command.readOnly) this.updateLinkedFields();\n    };\n    this.onChangeSelection = function () {\n      if (!this.editor) return;\n      var lead = this.editor.selection.lead;\n      var anchor = this.editor.selection.anchor;\n      var isEmpty = this.editor.selection.isEmpty();\n      for (var i = 0; i < this.ranges.length; i++) {\n        if (this.ranges[i].linked) continue;\n        var containsLead = this.ranges[i].contains(lead.row, lead.column);\n        var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n        if (containsLead && containsAnchor) return;\n      }\n      this.detach();\n    };\n    this.onChangeSession = function () {\n      this.detach();\n    };\n    this.tabNext = function (dir) {\n      var max = this.tabstops.length;\n      var index = this.index + (dir || 1);\n      index = Math.min(Math.max(index, 1), max);\n      if (index == max) index = 0;\n      this.selectTabstop(index);\n      if (index === 0) this.detach();\n    };\n    this.selectTabstop = function (index) {\n      this.$openTabstops = null;\n      var ts = this.tabstops[this.index];\n      if (ts) this.addTabstopMarkers(ts);\n      this.index = index;\n      ts = this.tabstops[this.index];\n      if (!ts || !ts.length) return;\n      this.selectedTabstop = ts;\n      var range = ts.firstNonLinked || ts;\n      if (ts.choices) range.cursor = range.start;\n      if (!this.editor.inVirtualSelectionMode) {\n        var sel = this.editor.multiSelect;\n        sel.toSingleRange(range);\n        for (var i = 0; i < ts.length; i++) {\n          if (ts.hasLinkedRanges && ts[i].linked) continue;\n          sel.addRange(ts[i].clone(), true);\n        }\n      } else {\n        this.editor.selection.fromOrientedRange(range);\n      }\n      this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n      if (this.selectedTabstop && this.selectedTabstop.choices) this.editor.execCommand(\"startAutocomplete\", {\n        matches: this.selectedTabstop.choices\n      });\n    };\n    this.addTabstops = function (tabstops, start, end) {\n      var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n      if (!this.$openTabstops) this.$openTabstops = [];\n      if (!tabstops[0]) {\n        var p = Range.fromPoints(end, end);\n        moveRelative(p.start, start);\n        moveRelative(p.end, start);\n        tabstops[0] = [p];\n        tabstops[0].index = 0;\n      }\n      var i = this.index;\n      var arg = [i + 1, 0];\n      var ranges = this.ranges;\n      tabstops.forEach(function (ts, index) {\n        var dest = this.$openTabstops[index] || ts;\n        for (var i = 0; i < ts.length; i++) {\n          var p = ts[i];\n          var range = Range.fromPoints(p.start, p.end || p.start);\n          movePoint(range.start, start);\n          movePoint(range.end, start);\n          range.original = p;\n          range.tabstop = dest;\n          ranges.push(range);\n          if (dest != ts) dest.unshift(range);else dest[i] = range;\n          if (p.fmtString || dest.firstNonLinked && useLink) {\n            range.linked = true;\n            dest.hasLinkedRanges = true;\n          } else if (!dest.firstNonLinked) dest.firstNonLinked = range;\n        }\n        if (!dest.firstNonLinked) dest.hasLinkedRanges = false;\n        if (dest === ts) {\n          arg.push(dest);\n          this.$openTabstops[index] = dest;\n        }\n        this.addTabstopMarkers(dest);\n        dest.rangeList = dest.rangeList || new RangeList();\n        dest.rangeList.$bias = 0;\n        dest.rangeList.addList(dest);\n      }, this);\n      if (arg.length > 2) {\n        if (this.tabstops.length) arg.push(arg.splice(2, 1)[0]);\n        this.tabstops.splice.apply(this.tabstops, arg);\n      }\n    };\n    this.addTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        if (!range.markerId) range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n      });\n    };\n    this.removeTabstopMarkers = function (ts) {\n      var session = this.editor.session;\n      ts.forEach(function (range) {\n        session.removeMarker(range.markerId);\n        range.markerId = null;\n      });\n    };\n    this.removeRange = function (range) {\n      var i = range.tabstop.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      i = this.ranges.indexOf(range);\n      if (i != -1) this.ranges.splice(i, 1);\n      i = range.tabstop.rangeList.ranges.indexOf(range);\n      if (i != -1) range.tabstop.splice(i, 1);\n      this.editor.session.removeMarker(range.markerId);\n      if (!range.tabstop.length) {\n        i = this.tabstops.indexOf(range.tabstop);\n        if (i != -1) this.tabstops.splice(i, 1);\n        if (!this.tabstops.length) this.detach();\n      }\n    };\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n      \"Tab\": function (editor) {\n        if (exports.snippetManager && exports.snippetManager.expandWithTab(editor)) return;\n        editor.tabstopManager.tabNext(1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Shift-Tab\": function (editor) {\n        editor.tabstopManager.tabNext(-1);\n        editor.renderer.scrollCursorIntoView();\n      },\n      \"Esc\": function (editor) {\n        editor.tabstopManager.detach();\n      }\n    });\n  }).call(TabstopManager.prototype);\n  var movePoint = function (point, diff) {\n    if (point.row == 0) point.column += diff.column;\n    point.row += diff.row;\n  };\n  var moveRelative = function (point, start) {\n    if (point.row == start.row) point.column -= start.column;\n    point.row -= start.row;\n  };\n  dom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\n  exports.snippetManager = new SnippetManager();\n  var Editor = require(\"./editor\").Editor;\n  (function () {\n    this.insertSnippet = function (content, options) {\n      return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n      return exports.snippetManager.expandWithTab(this, options);\n    };\n  }).call(Editor.prototype);\n});\nace.define(\"ace/ext/emmet\", [\"require\", \"exports\", \"module\", \"ace/keyboard/hash_handler\", \"ace/editor\", \"ace/snippets\", \"ace/range\", \"ace/config\", \"resources\", \"resources\", \"tabStops\", \"resources\", \"utils\", \"actions\"], function (require, exports, module) {\n  \"use strict\";\n\n  var HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\n  var Editor = require(\"../editor\").Editor;\n  var snippetManager = require(\"../snippets\").snippetManager;\n  var Range = require(\"../range\").Range;\n  var config = require(\"../config\");\n  var emmet, emmetPath;\n  function AceEmmetEditor() {}\n  AceEmmetEditor.prototype = {\n    setupContext: function (editor) {\n      this.ace = editor;\n      this.indentation = editor.session.getTabString();\n      if (!emmet) emmet = window.emmet;\n      var resources = emmet.resources || emmet.require(\"resources\");\n      resources.setVariable(\"indentation\", this.indentation);\n      this.$syntax = null;\n      this.$syntax = this.getSyntax();\n    },\n    getSelectionRange: function () {\n      var range = this.ace.getSelectionRange();\n      var doc = this.ace.session.doc;\n      return {\n        start: doc.positionToIndex(range.start),\n        end: doc.positionToIndex(range.end)\n      };\n    },\n    createSelection: function (start, end) {\n      var doc = this.ace.session.doc;\n      this.ace.selection.setRange({\n        start: doc.indexToPosition(start),\n        end: doc.indexToPosition(end)\n      });\n    },\n    getCurrentLineRange: function () {\n      var ace = this.ace;\n      var row = ace.getCursorPosition().row;\n      var lineLength = ace.session.getLine(row).length;\n      var index = ace.session.doc.positionToIndex({\n        row: row,\n        column: 0\n      });\n      return {\n        start: index,\n        end: index + lineLength\n      };\n    },\n    getCaretPos: function () {\n      var pos = this.ace.getCursorPosition();\n      return this.ace.session.doc.positionToIndex(pos);\n    },\n    setCaretPos: function (index) {\n      var pos = this.ace.session.doc.indexToPosition(index);\n      this.ace.selection.moveToPosition(pos);\n    },\n    getCurrentLine: function () {\n      var row = this.ace.getCursorPosition().row;\n      return this.ace.session.getLine(row);\n    },\n    replaceContent: function (value, start, end, noIndent) {\n      if (end == null) end = start == null ? this.getContent().length : start;\n      if (start == null) start = 0;\n      var editor = this.ace;\n      var doc = editor.session.doc;\n      var range = Range.fromPoints(doc.indexToPosition(start), doc.indexToPosition(end));\n      editor.session.remove(range);\n      range.end = range.start;\n      value = this.$updateTabstops(value);\n      snippetManager.insertSnippet(editor, value);\n    },\n    getContent: function () {\n      return this.ace.getValue();\n    },\n    getSyntax: function () {\n      if (this.$syntax) return this.$syntax;\n      var syntax = this.ace.session.$modeId.split(\"/\").pop();\n      if (syntax == \"html\" || syntax == \"php\") {\n        var cursor = this.ace.getCursorPosition();\n        var state = this.ace.session.getState(cursor.row);\n        if (typeof state != \"string\") state = state[0];\n        if (state) {\n          state = state.split(\"-\");\n          if (state.length > 1) syntax = state[0];else if (syntax == \"php\") syntax = \"html\";\n        }\n      }\n      return syntax;\n    },\n    getProfileName: function () {\n      var resources = emmet.resources || emmet.require(\"resources\");\n      switch (this.getSyntax()) {\n        case \"css\":\n          return \"css\";\n        case \"xml\":\n        case \"xsl\":\n          return \"xml\";\n        case \"html\":\n          var profile = resources.getVariable(\"profile\");\n          if (!profile) profile = this.ace.session.getLines(0, 2).join(\"\").search(/<!DOCTYPE[^>]+XHTML/i) != -1 ? \"xhtml\" : \"html\";\n          return profile;\n        default:\n          var mode = this.ace.session.$mode;\n          return mode.emmetConfig && mode.emmetConfig.profile || \"xhtml\";\n      }\n    },\n    prompt: function (title) {\n      return prompt(title); // eslint-disable-line no-alert\n    },\n\n    getSelection: function () {\n      return this.ace.session.getTextRange();\n    },\n    getFilePath: function () {\n      return \"\";\n    },\n    $updateTabstops: function (value) {\n      var base = 1000;\n      var zeroBase = 0;\n      var lastZero = null;\n      var ts = emmet.tabStops || emmet.require('tabStops');\n      var resources = emmet.resources || emmet.require(\"resources\");\n      var settings = resources.getVocabulary(\"user\");\n      var tabstopOptions = {\n        tabstop: function (data) {\n          var group = parseInt(data.group, 10);\n          var isZero = group === 0;\n          if (isZero) group = ++zeroBase;else group += base;\n          var placeholder = data.placeholder;\n          if (placeholder) {\n            placeholder = ts.processText(placeholder, tabstopOptions);\n          }\n          var result = '${' + group + (placeholder ? ':' + placeholder : '') + '}';\n          if (isZero) {\n            lastZero = [data.start, result];\n          }\n          return result;\n        },\n        escape: function (ch) {\n          if (ch == '$') return '\\\\$';\n          if (ch == '\\\\') return '\\\\\\\\';\n          return ch;\n        }\n      };\n      value = ts.processText(value, tabstopOptions);\n      if (settings.variables['insert_final_tabstop'] && !/\\$\\{0\\}$/.test(value)) {\n        value += '${0}';\n      } else if (lastZero) {\n        var common = emmet.utils ? emmet.utils.common : emmet.require('utils');\n        value = common.replaceSubstring(value, '${0}', lastZero[0], lastZero[1]);\n      }\n      return value;\n    }\n  };\n  var keymap = {\n    expand_abbreviation: {\n      \"mac\": \"ctrl+alt+e\",\n      \"win\": \"alt+e\"\n    },\n    match_pair_outward: {\n      \"mac\": \"ctrl+d\",\n      \"win\": \"ctrl+,\"\n    },\n    match_pair_inward: {\n      \"mac\": \"ctrl+j\",\n      \"win\": \"ctrl+shift+0\"\n    },\n    matching_pair: {\n      \"mac\": \"ctrl+alt+j\",\n      \"win\": \"alt+j\"\n    },\n    next_edit_point: \"alt+right\",\n    prev_edit_point: \"alt+left\",\n    toggle_comment: {\n      \"mac\": \"command+/\",\n      \"win\": \"ctrl+/\"\n    },\n    split_join_tag: {\n      \"mac\": \"shift+command+'\",\n      \"win\": \"shift+ctrl+`\"\n    },\n    remove_tag: {\n      \"mac\": \"command+'\",\n      \"win\": \"shift+ctrl+;\"\n    },\n    evaluate_math_expression: {\n      \"mac\": \"shift+command+y\",\n      \"win\": \"shift+ctrl+y\"\n    },\n    increment_number_by_1: \"ctrl+up\",\n    decrement_number_by_1: \"ctrl+down\",\n    increment_number_by_01: \"alt+up\",\n    decrement_number_by_01: \"alt+down\",\n    increment_number_by_10: {\n      \"mac\": \"alt+command+up\",\n      \"win\": \"shift+alt+up\"\n    },\n    decrement_number_by_10: {\n      \"mac\": \"alt+command+down\",\n      \"win\": \"shift+alt+down\"\n    },\n    select_next_item: {\n      \"mac\": \"shift+command+.\",\n      \"win\": \"shift+ctrl+.\"\n    },\n    select_previous_item: {\n      \"mac\": \"shift+command+,\",\n      \"win\": \"shift+ctrl+,\"\n    },\n    reflect_css_value: {\n      \"mac\": \"shift+command+r\",\n      \"win\": \"shift+ctrl+r\"\n    },\n    encode_decode_data_url: {\n      \"mac\": \"shift+ctrl+d\",\n      \"win\": \"ctrl+'\"\n    },\n    expand_abbreviation_with_tab: \"Tab\",\n    wrap_with_abbreviation: {\n      \"mac\": \"shift+ctrl+a\",\n      \"win\": \"shift+ctrl+a\"\n    }\n  };\n  var editorProxy = new AceEmmetEditor();\n  exports.commands = new HashHandler();\n  exports.runEmmetCommand = function runEmmetCommand(editor) {\n    if (this.action == \"expand_abbreviation_with_tab\") {\n      if (!editor.selection.isEmpty()) return false;\n      var pos = editor.selection.lead;\n      var token = editor.session.getTokenAt(pos.row, pos.column);\n      if (token && /\\btag\\b/.test(token.type)) return false;\n    }\n    try {\n      editorProxy.setupContext(editor);\n      var actions = emmet.actions || emmet.require(\"actions\");\n      if (this.action == \"wrap_with_abbreviation\") {\n        return setTimeout(function () {\n          actions.run(\"wrap_with_abbreviation\", editorProxy);\n        }, 0);\n      }\n      var result = actions.run(this.action, editorProxy);\n    } catch (e) {\n      if (!emmet) {\n        var loading = exports.load(runEmmetCommand.bind(this, editor));\n        if (this.action == \"expand_abbreviation_with_tab\") return false;\n        return loading;\n      }\n      editor._signal(\"changeStatus\", typeof e == \"string\" ? e : e.message);\n      config.warn(e);\n      result = false;\n    }\n    return result;\n  };\n  for (var command in keymap) {\n    exports.commands.addCommand({\n      name: \"emmet:\" + command,\n      action: command,\n      bindKey: keymap[command],\n      exec: exports.runEmmetCommand,\n      multiSelectAction: \"forEach\"\n    });\n  }\n  exports.updateCommands = function (editor, enabled) {\n    if (enabled) {\n      editor.keyBinding.addKeyboardHandler(exports.commands);\n    } else {\n      editor.keyBinding.removeKeyboardHandler(exports.commands);\n    }\n  };\n  exports.isSupportedMode = function (mode) {\n    if (!mode) return false;\n    if (mode.emmetConfig) return true;\n    var id = mode.$id || mode;\n    return /css|less|scss|sass|stylus|html|php|twig|ejs|handlebars/.test(id);\n  };\n  exports.isAvailable = function (editor, command) {\n    if (/(evaluate_math_expression|expand_abbreviation)$/.test(command)) return true;\n    var mode = editor.session.$mode;\n    var isSupported = exports.isSupportedMode(mode);\n    if (isSupported && mode.$modes) {\n      try {\n        editorProxy.setupContext(editor);\n        if (/js|php/.test(editorProxy.getSyntax())) isSupported = false;\n      } catch (e) {}\n    }\n    return isSupported;\n  };\n  var onChangeMode = function (e, target) {\n    var editor = target;\n    if (!editor) return;\n    var enabled = exports.isSupportedMode(editor.session.$mode);\n    if (e.enableEmmet === false) enabled = false;\n    if (enabled) exports.load();\n    exports.updateCommands(editor, enabled);\n  };\n  exports.load = function (cb) {\n    if (typeof emmetPath !== \"string\") {\n      config.warn(\"script for emmet-core is not loaded\");\n      return false;\n    }\n    config.loadModule(emmetPath, function () {\n      emmetPath = null;\n      cb && cb();\n    });\n    return true;\n  };\n  exports.AceEmmetEditor = AceEmmetEditor;\n  config.defineOptions(Editor.prototype, \"editor\", {\n    enableEmmet: {\n      set: function (val) {\n        this[val ? \"on\" : \"removeListener\"](\"changeMode\", onChangeMode);\n        onChangeMode({\n          enableEmmet: !!val\n        }, this);\n      },\n      value: true\n    }\n  });\n  exports.setCore = function (e) {\n    if (typeof e == \"string\") emmetPath = e;else emmet = e;\n  };\n});\n(function () {\n  ace.require([\"ace/ext/emmet\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"names":["ace","define","require","exports","module","dom","oop","EventEmitter","lang","Range","RangeList","HashHandler","Tokenizer","clipboard","VARIABLES","CURRENT_WORD","editor","session","getTextRange","getWordRange","SELECTION","name","indentation","text","replace","CURRENT_LINE","getLine","getCursorPosition","row","PREV_LINE","LINE_INDEX","LINE_NUMBER","SOFT_TABS","getUseSoftTabs","TAB_SIZE","getTabSize","CLIPBOARD","getText","FILENAME","exec","FILEPATH","FILENAME_BASE","DIRECTORY","WORKSPACE_NAME","FULLNAME","BLOCK_COMMENT_START","mode","$mode","blockComment","start","BLOCK_COMMENT_END","end","LINE_COMMENT","lineCommentStart","CURRENT_YEAR","date","bind","year","CURRENT_YEAR_SHORT","CURRENT_MONTH","month","CURRENT_MONTH_NAME","CURRENT_MONTH_NAME_SHORT","CURRENT_DATE","day","CURRENT_DAY_NAME","weekday","CURRENT_DAY_NAME_SHORT","CURRENT_HOUR","hour","hour12","CURRENT_MINUTE","minute","CURRENT_SECOND","second","SELECTED_TEXT","dateFormat","str","Date","toLocaleString","length","SnippetManager","snippetMap","snippetNameMap","implement","getTokenizer","$tokenizer","createTokenizer","TabstopToken","substr","test","tabstopId","parseInt","escape","ch","formatMatcher","regex","onMatch","val","state","stack","ts","fmtString","guard","slice","flag","next","indexOf","shift","t","unshift","token","merge","snippetVar","choices","operator","split","map","value","formatString","expectElse","ifEnd","elseEnd","changeCase","local","formatStringVar","formatFunction","tokenizeTmSnippet","startState","getLineTokens","tokens","x","getVariableValue","variables","__","hasOwnProperty","tmStrFormat","fmt","re","RegExp","fmtTokens","_self","formatted","oldArgs","call","arguments","fmtParts","resolveVariables","gChangeCase","i","toUpperCase","toLowerCase","join","tmFormatFunction","snippet","result","afterNewLine","push","j","gotoNext","i1","insertSnippetForSelection","snippetText","cursor","line","tabString","getTabString","indentString","match","column","tabstops","forEach","p","id","index","parents","isNested","some","expanding","copyValue","copy","lastIndexOf","Object","keys","parentId","splice","apply","Math","max","concat","lines","range","getSelectionRange","tabstopManager","TabstopManager","selectionId","inVirtualSelectionMode","selection","addTabstops","insertSnippet","self","forEachSelection","keepOrder","tabNext","$getScope","scope","$id","pop","inlinePhp","c","getState","substring","getActiveScopes","scopes","includeScopes","expandWithTab","options","expandSnippetForSelection","before","after","snippets","findMatchingSnippet","dryRun","doc","removeInLine","replaceBefore","replaceAfter","M__","matchBefore","T__","matchAfter","content","snippetList","s","startRe","endRe","triggerRe","endTriggerRe","register","wrapRegexp","src","guardedRegexp","opening","addSnippet","old","unregister","prefix","tabTrigger","body","Array","isArray","trigger","escapeRegExp","endTrigger","endGuard","key","_signal","removeSnippet","nameMap","parseSnippetFile","list","m","JSON","parse","e","guardRe","getSnippetByName","prototype","$onChange","onChange","$onChangeSelection","delayedCall","onChangeSelection","schedule","$onChangeSession","onChangeSession","$onAfterExec","onAfterExec","attach","ranges","$openTabstops","selectedTabstop","on","commands","keyBinding","addKeyboardHandler","keyboardHandler","detach","removeTabstopMarkers","removeListener","removeKeyboardHandler","delta","isRemove","action","active","rangeList","$bias","parentActive","startIndex","pointIndex","endIndex","toRemove","removeRange","$inChange","getLength","getValue","updateLinkedFields","hasLinkedRanges","firstNonLinked","linked","original","snippetManager","command","readOnly","lead","anchor","isEmpty","containsLead","contains","containsAnchor","dir","min","selectTabstop","addTabstopMarkers","sel","multiSelect","toSingleRange","addRange","clone","fromOrientedRange","execCommand","matches","useLink","getOption","fromPoints","moveRelative","arg","dest","movePoint","tabstop","addList","markerId","addMarker","removeMarker","bindKeys","renderer","scrollCursorIntoView","point","diff","importCssString","Editor","expandSnippet","config","emmet","emmetPath","AceEmmetEditor","setupContext","window","resources","setVariable","$syntax","getSyntax","positionToIndex","createSelection","setRange","indexToPosition","getCurrentLineRange","lineLength","getCaretPos","pos","setCaretPos","moveToPosition","getCurrentLine","replaceContent","noIndent","getContent","remove","$updateTabstops","syntax","$modeId","getProfileName","profile","getVariable","getLines","search","emmetConfig","prompt","title","getSelection","getFilePath","base","zeroBase","lastZero","tabStops","settings","getVocabulary","tabstopOptions","data","group","isZero","placeholder","processText","common","utils","replaceSubstring","keymap","expand_abbreviation","match_pair_outward","match_pair_inward","matching_pair","next_edit_point","prev_edit_point","toggle_comment","split_join_tag","remove_tag","evaluate_math_expression","increment_number_by_1","decrement_number_by_1","increment_number_by_01","decrement_number_by_01","increment_number_by_10","decrement_number_by_10","select_next_item","select_previous_item","reflect_css_value","encode_decode_data_url","expand_abbreviation_with_tab","wrap_with_abbreviation","editorProxy","runEmmetCommand","getTokenAt","type","actions","setTimeout","run","loading","load","message","warn","addCommand","bindKey","multiSelectAction","updateCommands","enabled","isSupportedMode","isAvailable","isSupported","$modes","onChangeMode","target","enableEmmet","cb","loadModule","defineOptions","set","setCore"],"sources":["/mnt/c/Users/anasb/Google Drive/Colab Notebooks/streamlit/custom-components/CodeEditor/code_editor/frontend/node_modules/ace-builds/src-noconflict/ext-emmet.js"],"sourcesContent":["ace.define(\"ace/snippets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/lang\",\"ace/range\",\"ace/range_list\",\"ace/keyboard/hash_handler\",\"ace/tokenizer\",\"ace/clipboard\",\"ace/editor\"], function(require, exports, module){\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\nvar VARIABLES = {\n    CURRENT_WORD: function (editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function (editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function (editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function (editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function (editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function (editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function (editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function (editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function (editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function (editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function (editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function () { return \"Unknown\"; },\n    FULLNAME: function () { return \"Unknown\"; },\n    BLOCK_COMMENT_START: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function (editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, { year: \"numeric\" }),\n    CURRENT_YEAR_SHORT: date.bind(null, { year: \"2-digit\" }),\n    CURRENT_MONTH: date.bind(null, { month: \"numeric\" }),\n    CURRENT_MONTH_NAME: date.bind(null, { month: \"long\" }),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, { month: \"short\" }),\n    CURRENT_DATE: date.bind(null, { day: \"2-digit\" }),\n    CURRENT_DAY_NAME: date.bind(null, { weekday: \"long\" }),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, { weekday: \"short\" }),\n    CURRENT_HOUR: date.bind(null, { hour: \"2-digit\", hour12: false }),\n    CURRENT_MINUTE: date.bind(null, { minute: \"2-digit\" }),\n    CURRENT_SECOND: date.bind(null, { second: \"2-digit\" })\n};\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\nvar SnippetManager = function () {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n};\n(function () {\n    oop.implement(this, EventEmitter);\n    this.getTokenizer = function () {\n        return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    this.createTokenizer = function () {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{ tabstopId: parseInt(str, 10) }];\n            return [{ text: str }];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\",\n            onMatch: function (val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        SnippetManager.$tokenizer = new Tokenizer({\n            start: [\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length) {\n                            val = ch;\n                        }\n                        else if (\"`$\\\\\".indexOf(ch) != -1) {\n                            val = ch;\n                        }\n                        return [val];\n                    } },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        return [stack.length ? stack.shift() : val];\n                    } },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken },\n                { regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function (str, state, stack) {\n                        var t = TabstopToken(str.substr(1));\n                        stack.unshift(t[0]);\n                        return t;\n                    }, next: \"snippetVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false }\n            ],\n            snippetVar: [\n                { regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function (val, state, stack) {\n                        var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function (operator) {\n                            return operator.length == 2 ? operator[1] : \"\\x00\";\n                        }).split(\"\\x00\").map(function (value) {\n                            return { value: value };\n                        });\n                        stack[0].choices = choices;\n                        return [choices[0]];\n                    }, next: \"start\" },\n                formatMatcher,\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\" }\n            ],\n            formatString: [\n                { regex: /:/, onMatch: function (val, state, stack) {\n                        if (stack.length && stack[0].expectElse) {\n                            stack[0].expectElse = false;\n                            stack[0].ifEnd = { elseEnd: stack[0] };\n                            return [stack[0].ifEnd];\n                        }\n                        return \":\";\n                    } },\n                { regex: /\\\\./, onMatch: function (val, state, stack) {\n                        var ch = val[1];\n                        if (ch == \"}\" && stack.length)\n                            val = ch;\n                        else if (\"`$\\\\\".indexOf(ch) != -1)\n                            val = ch;\n                        else if (ch == \"n\")\n                            val = \"\\n\";\n                        else if (ch == \"t\")\n                            val = \"\\t\";\n                        else if (\"ulULE\".indexOf(ch) != -1)\n                            val = { changeCase: ch, local: ch > \"a\" };\n                        return [val];\n                    } },\n                { regex: \"/\\\\w*}\", onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        if (next)\n                            next.flag = val.slice(1, -1);\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" },\n                { regex: /\\$(?:\\d+|\\w+)/, onMatch: function (val, state, stack) {\n                        return [{ text: val.slice(1) }];\n                    } },\n                { regex: /\\${\\w+/, onMatch: function (val, state, stack) {\n                        var token = { text: val.slice(2) };\n                        stack.unshift(token);\n                        return [token];\n                    }, next: \"formatStringVar\" },\n                { regex: /\\n/, token: \"newline\", merge: false },\n                { regex: /}/, onMatch: function (val, state, stack) {\n                        var next = stack.shift();\n                        this.next = next && next.tabstopId ? \"start\" : \"\";\n                        return [next || val];\n                    }, next: \"start\" }\n            ],\n            formatStringVar: [\n                { regex: /:\\/\\w+}/, onMatch: function (val, state, stack) {\n                        var ts = stack[0];\n                        ts.formatFunction = val.slice(2, -1);\n                        return [stack.shift()];\n                    }, next: \"formatString\" },\n                formatMatcher,\n                { regex: /:[\\?\\-+]?/, onMatch: function (val, state, stack) {\n                        if (val[1] == \"+\")\n                            stack[0].ifEnd = stack[0];\n                        if (val[1] == \"?\")\n                            stack[0].expectElse = true;\n                    }, next: \"formatString\" },\n                { regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\" }\n            ]\n        });\n        return SnippetManager.$tokenizer;\n    };\n    this.tokenizeTmSnippet = function (str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function (x) {\n            return x.value || x;\n        });\n    };\n    this.getVariableValue = function (editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    this.variables = VARIABLES;\n    this.tmStrFormat = function (str, ch, editor) {\n        if (!ch.fmt)\n            return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function () {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    }\n                    else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                }\n                else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                }\n                else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    this.tmFormatFunction = function (str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n    this.resolveVariables = function (snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)\n                continue;\n            afterNewLine = false;\n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1)\n                    j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                }\n                else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            }\n            else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            }\n            else if (ch.tabstopId != null) {\n                result.push(ch);\n            }\n            else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n    this.insertSnippetForSelection = function (editor, snippetText) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var tabString = editor.session.getTabString();\n        var indentString = line.match(/^\\s*/)[0];\n        if (cursor.column < indentString.length)\n            indentString = indentString.slice(0, cursor.column);\n        snippetText = snippetText.replace(/\\r/g, \"\");\n        var tokens = this.tokenizeTmSnippet(snippetText);\n        tokens = this.resolveVariables(tokens, editor);\n        tokens = tokens.map(function (x) {\n            if (x == \"\\n\")\n                return x + indentString;\n            if (typeof x == \"string\")\n                return x.replace(/\\t/g, tabString);\n            return x;\n        });\n        var tabstops = [];\n        tokens.forEach(function (p, i) {\n            if (typeof p != \"object\")\n                return;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            if (!ts) {\n                ts = tabstops[id] = [];\n                ts.index = id;\n                ts.value = \"\";\n                ts.parents = {};\n            }\n            if (ts.indexOf(p) !== -1)\n                return;\n            if (p.choices && !ts.choices)\n                ts.choices = p.choices;\n            ts.push(p);\n            var i1 = tokens.indexOf(p, i + 1);\n            if (i1 === -1)\n                return;\n            var value = tokens.slice(i + 1, i1);\n            var isNested = value.some(function (t) { return typeof t === \"object\"; });\n            if (isNested && !ts.value) {\n                ts.value = value;\n            }\n            else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n                ts.value = value.join(\"\");\n            }\n        });\n        tabstops.forEach(function (ts) { ts.length = 0; });\n        var expanding = {};\n        function copyValue(val) {\n            var copy = [];\n            for (var i = 0; i < val.length; i++) {\n                var p = val[i];\n                if (typeof p == \"object\") {\n                    if (expanding[p.tabstopId])\n                        continue;\n                    var j = val.lastIndexOf(p, i - 1);\n                    p = copy[j] || { tabstopId: p.tabstopId };\n                }\n                copy[i] = p;\n            }\n            return copy;\n        }\n        for (var i = 0; i < tokens.length; i++) {\n            var p = tokens[i];\n            if (typeof p != \"object\")\n                continue;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            var i1 = tokens.indexOf(p, i + 1);\n            if (expanding[id]) {\n                if (expanding[id] === p) {\n                    delete expanding[id];\n                    Object.keys(expanding).forEach(function (parentId) {\n                        ts.parents[parentId] = true;\n                    });\n                }\n                continue;\n            }\n            expanding[id] = p;\n            var value = ts.value;\n            if (typeof value !== \"string\")\n                value = copyValue(value);\n            else if (p.fmt)\n                value = this.tmStrFormat(value, p, editor);\n            tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n            if (ts.indexOf(p) === -1)\n                ts.push(p);\n        }\n        var row = 0, column = 0;\n        var text = \"\";\n        tokens.forEach(function (t) {\n            if (typeof t === \"string\") {\n                var lines = t.split(\"\\n\");\n                if (lines.length > 1) {\n                    column = lines[lines.length - 1].length;\n                    row += lines.length - 1;\n                }\n                else\n                    column += t.length;\n                text += t;\n            }\n            else if (t) {\n                if (!t.start)\n                    t.start = { row: row, column: column };\n                else\n                    t.end = { row: row, column: column };\n            }\n        });\n        var range = editor.getSelectionRange();\n        var end = editor.session.replace(range, text);\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    this.insertSnippet = function (editor, snippetText) {\n        var self = this;\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText);\n        editor.forEachSelection(function () {\n            self.insertSnippetForSelection(editor, snippetText);\n        }, null, { keepOrder: true });\n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n    this.$getScope = function (editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp)\n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        return scope;\n    };\n    this.getActiveScopes = function (editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n    this.expandWithTab = function (editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function () {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, { keepOrder: true });\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    this.expandSnippetForSelection = function (editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row, cursor.column - snippet.replaceBefore.length, cursor.column + snippet.replaceAfter.length);\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n    this.findMatchingSnippet = function (snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        if (!snippets)\n            snippets = [];\n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            }\n            else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        }\n        else {\n            Object.keys(snippets).forEach(function (key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        this._signal(\"registerSnippets\", { scope: scope });\n    };\n    this.unregister = function (snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope || scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope || scope];\n                var i = map && map.indexOf(s);\n                if (i >= 0)\n                    map.splice(i, 1);\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function (str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                }\n                catch (e) { }\n            }\n            if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            }\n            else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                }\n                else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                }\n                else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    this.getSnippetByName = function (name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function (scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n}).call(SnippetManager.prototype);\nvar TabstopManager = function (editor) {\n    if (editor.tabstopManager)\n        return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n};\n(function () {\n    this.attach = function (editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n        this.editor = editor;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function () {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges = null;\n        this.tabstops = null;\n        this.selectedTabstop = null;\n        this.editor.removeListener(\"change\", this.$onChange);\n        this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n        this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.editor = null;\n    };\n    this.onChange = function (delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = (this.tabstops || []).slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.editor.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    this.updateLinkedFields = function () {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.editor.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    this.onAfterExec = function (e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    this.onChangeSelection = function () {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    this.onChangeSession = function () {\n        this.detach();\n    };\n    this.tabNext = function (dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        if (index === 0)\n            this.detach();\n    };\n    this.selectTabstop = function (index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices)\n            range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        }\n        else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", { matches: this.selectedTabstop.choices });\n    };\n    this.addTabstops = function (tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        tabstops.forEach(function (ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                }\n                else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        if (arg.length > 2) {\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n    this.addTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            if (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    this.removeTabstopMarkers = function (ts) {\n        var session = this.editor.session;\n        ts.forEach(function (range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    this.removeRange = function (range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1)\n            this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1)\n            range.tabstop.splice(i, 1);\n        this.editor.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n        \"Tab\": function (editor) {\n            if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n                return;\n            editor.tabstopManager.tabNext(1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Shift-Tab\": function (editor) {\n            editor.tabstopManager.tabNext(-1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Esc\": function (editor) {\n            editor.tabstopManager.detach();\n        }\n    });\n}).call(TabstopManager.prototype);\nvar movePoint = function (point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\nvar moveRelative = function (point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\ndom.importCssString(\"\\n.ace_snippet-marker {\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box;\\n    background: rgba(194, 193, 208, 0.09);\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\n    position: absolute;\\n}\", \"snippets.css\", false);\nexports.snippetManager = new SnippetManager();\nvar Editor = require(\"./editor\").Editor;\n(function () {\n    this.insertSnippet = function (content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function (options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n\n});\n\nace.define(\"ace/ext/emmet\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\",\"ace/editor\",\"ace/snippets\",\"ace/range\",\"ace/config\",\"resources\",\"resources\",\"tabStops\",\"resources\",\"utils\",\"actions\"], function(require, exports, module){\"use strict\";\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nvar Editor = require(\"../editor\").Editor;\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Range = require(\"../range\").Range;\nvar config = require(\"../config\");\nvar emmet, emmetPath;\nfunction AceEmmetEditor() { }\nAceEmmetEditor.prototype = {\n    setupContext: function (editor) {\n        this.ace = editor;\n        this.indentation = editor.session.getTabString();\n        if (!emmet)\n            emmet = window.emmet;\n        var resources = emmet.resources || emmet.require(\"resources\");\n        resources.setVariable(\"indentation\", this.indentation);\n        this.$syntax = null;\n        this.$syntax = this.getSyntax();\n    },\n    getSelectionRange: function () {\n        var range = this.ace.getSelectionRange();\n        var doc = this.ace.session.doc;\n        return {\n            start: doc.positionToIndex(range.start),\n            end: doc.positionToIndex(range.end)\n        };\n    },\n    createSelection: function (start, end) {\n        var doc = this.ace.session.doc;\n        this.ace.selection.setRange({\n            start: doc.indexToPosition(start),\n            end: doc.indexToPosition(end)\n        });\n    },\n    getCurrentLineRange: function () {\n        var ace = this.ace;\n        var row = ace.getCursorPosition().row;\n        var lineLength = ace.session.getLine(row).length;\n        var index = ace.session.doc.positionToIndex({ row: row, column: 0 });\n        return {\n            start: index,\n            end: index + lineLength\n        };\n    },\n    getCaretPos: function () {\n        var pos = this.ace.getCursorPosition();\n        return this.ace.session.doc.positionToIndex(pos);\n    },\n    setCaretPos: function (index) {\n        var pos = this.ace.session.doc.indexToPosition(index);\n        this.ace.selection.moveToPosition(pos);\n    },\n    getCurrentLine: function () {\n        var row = this.ace.getCursorPosition().row;\n        return this.ace.session.getLine(row);\n    },\n    replaceContent: function (value, start, end, noIndent) {\n        if (end == null)\n            end = start == null ? this.getContent().length : start;\n        if (start == null)\n            start = 0;\n        var editor = this.ace;\n        var doc = editor.session.doc;\n        var range = Range.fromPoints(doc.indexToPosition(start), doc.indexToPosition(end));\n        editor.session.remove(range);\n        range.end = range.start;\n        value = this.$updateTabstops(value);\n        snippetManager.insertSnippet(editor, value);\n    },\n    getContent: function () {\n        return this.ace.getValue();\n    },\n    getSyntax: function () {\n        if (this.$syntax)\n            return this.$syntax;\n        var syntax = this.ace.session.$modeId.split(\"/\").pop();\n        if (syntax == \"html\" || syntax == \"php\") {\n            var cursor = this.ace.getCursorPosition();\n            var state = this.ace.session.getState(cursor.row);\n            if (typeof state != \"string\")\n                state = state[0];\n            if (state) {\n                state = state.split(\"-\");\n                if (state.length > 1)\n                    syntax = state[0];\n                else if (syntax == \"php\")\n                    syntax = \"html\";\n            }\n        }\n        return syntax;\n    },\n    getProfileName: function () {\n        var resources = emmet.resources || emmet.require(\"resources\");\n        switch (this.getSyntax()) {\n            case \"css\": return \"css\";\n            case \"xml\":\n            case \"xsl\":\n                return \"xml\";\n            case \"html\":\n                var profile = resources.getVariable(\"profile\");\n                if (!profile)\n                    profile = this.ace.session.getLines(0, 2).join(\"\").search(/<!DOCTYPE[^>]+XHTML/i) != -1 ? \"xhtml\" : \"html\";\n                return profile;\n            default:\n                var mode = this.ace.session.$mode;\n                return mode.emmetConfig && mode.emmetConfig.profile || \"xhtml\";\n        }\n    },\n    prompt: function (title) {\n        return prompt(title); // eslint-disable-line no-alert\n    },\n    getSelection: function () {\n        return this.ace.session.getTextRange();\n    },\n    getFilePath: function () {\n        return \"\";\n    },\n    $updateTabstops: function (value) {\n        var base = 1000;\n        var zeroBase = 0;\n        var lastZero = null;\n        var ts = emmet.tabStops || emmet.require('tabStops');\n        var resources = emmet.resources || emmet.require(\"resources\");\n        var settings = resources.getVocabulary(\"user\");\n        var tabstopOptions = {\n            tabstop: function (data) {\n                var group = parseInt(data.group, 10);\n                var isZero = group === 0;\n                if (isZero)\n                    group = ++zeroBase;\n                else\n                    group += base;\n                var placeholder = data.placeholder;\n                if (placeholder) {\n                    placeholder = ts.processText(placeholder, tabstopOptions);\n                }\n                var result = '${' + group + (placeholder ? ':' + placeholder : '') + '}';\n                if (isZero) {\n                    lastZero = [data.start, result];\n                }\n                return result;\n            },\n            escape: function (ch) {\n                if (ch == '$')\n                    return '\\\\$';\n                if (ch == '\\\\')\n                    return '\\\\\\\\';\n                return ch;\n            }\n        };\n        value = ts.processText(value, tabstopOptions);\n        if (settings.variables['insert_final_tabstop'] && !/\\$\\{0\\}$/.test(value)) {\n            value += '${0}';\n        }\n        else if (lastZero) {\n            var common = emmet.utils ? emmet.utils.common : emmet.require('utils');\n            value = common.replaceSubstring(value, '${0}', lastZero[0], lastZero[1]);\n        }\n        return value;\n    }\n};\nvar keymap = {\n    expand_abbreviation: { \"mac\": \"ctrl+alt+e\", \"win\": \"alt+e\" },\n    match_pair_outward: { \"mac\": \"ctrl+d\", \"win\": \"ctrl+,\" },\n    match_pair_inward: { \"mac\": \"ctrl+j\", \"win\": \"ctrl+shift+0\" },\n    matching_pair: { \"mac\": \"ctrl+alt+j\", \"win\": \"alt+j\" },\n    next_edit_point: \"alt+right\",\n    prev_edit_point: \"alt+left\",\n    toggle_comment: { \"mac\": \"command+/\", \"win\": \"ctrl+/\" },\n    split_join_tag: { \"mac\": \"shift+command+'\", \"win\": \"shift+ctrl+`\" },\n    remove_tag: { \"mac\": \"command+'\", \"win\": \"shift+ctrl+;\" },\n    evaluate_math_expression: { \"mac\": \"shift+command+y\", \"win\": \"shift+ctrl+y\" },\n    increment_number_by_1: \"ctrl+up\",\n    decrement_number_by_1: \"ctrl+down\",\n    increment_number_by_01: \"alt+up\",\n    decrement_number_by_01: \"alt+down\",\n    increment_number_by_10: { \"mac\": \"alt+command+up\", \"win\": \"shift+alt+up\" },\n    decrement_number_by_10: { \"mac\": \"alt+command+down\", \"win\": \"shift+alt+down\" },\n    select_next_item: { \"mac\": \"shift+command+.\", \"win\": \"shift+ctrl+.\" },\n    select_previous_item: { \"mac\": \"shift+command+,\", \"win\": \"shift+ctrl+,\" },\n    reflect_css_value: { \"mac\": \"shift+command+r\", \"win\": \"shift+ctrl+r\" },\n    encode_decode_data_url: { \"mac\": \"shift+ctrl+d\", \"win\": \"ctrl+'\" },\n    expand_abbreviation_with_tab: \"Tab\",\n    wrap_with_abbreviation: { \"mac\": \"shift+ctrl+a\", \"win\": \"shift+ctrl+a\" }\n};\nvar editorProxy = new AceEmmetEditor();\nexports.commands = new HashHandler();\nexports.runEmmetCommand = function runEmmetCommand(editor) {\n    if (this.action == \"expand_abbreviation_with_tab\") {\n        if (!editor.selection.isEmpty())\n            return false;\n        var pos = editor.selection.lead;\n        var token = editor.session.getTokenAt(pos.row, pos.column);\n        if (token && /\\btag\\b/.test(token.type))\n            return false;\n    }\n    try {\n        editorProxy.setupContext(editor);\n        var actions = emmet.actions || emmet.require(\"actions\");\n        if (this.action == \"wrap_with_abbreviation\") {\n            return setTimeout(function () {\n                actions.run(\"wrap_with_abbreviation\", editorProxy);\n            }, 0);\n        }\n        var result = actions.run(this.action, editorProxy);\n    }\n    catch (e) {\n        if (!emmet) {\n            var loading = exports.load(runEmmetCommand.bind(this, editor));\n            if (this.action == \"expand_abbreviation_with_tab\")\n                return false;\n            return loading;\n        }\n        editor._signal(\"changeStatus\", typeof e == \"string\" ? e : e.message);\n        config.warn(e);\n        result = false;\n    }\n    return result;\n};\nfor (var command in keymap) {\n    exports.commands.addCommand({\n        name: \"emmet:\" + command,\n        action: command,\n        bindKey: keymap[command],\n        exec: exports.runEmmetCommand,\n        multiSelectAction: \"forEach\"\n    });\n}\nexports.updateCommands = function (editor, enabled) {\n    if (enabled) {\n        editor.keyBinding.addKeyboardHandler(exports.commands);\n    }\n    else {\n        editor.keyBinding.removeKeyboardHandler(exports.commands);\n    }\n};\nexports.isSupportedMode = function (mode) {\n    if (!mode)\n        return false;\n    if (mode.emmetConfig)\n        return true;\n    var id = mode.$id || mode;\n    return /css|less|scss|sass|stylus|html|php|twig|ejs|handlebars/.test(id);\n};\nexports.isAvailable = function (editor, command) {\n    if (/(evaluate_math_expression|expand_abbreviation)$/.test(command))\n        return true;\n    var mode = editor.session.$mode;\n    var isSupported = exports.isSupportedMode(mode);\n    if (isSupported && mode.$modes) {\n        try {\n            editorProxy.setupContext(editor);\n            if (/js|php/.test(editorProxy.getSyntax()))\n                isSupported = false;\n        }\n        catch (e) { }\n    }\n    return isSupported;\n};\nvar onChangeMode = function (e, target) {\n    var editor = target;\n    if (!editor)\n        return;\n    var enabled = exports.isSupportedMode(editor.session.$mode);\n    if (e.enableEmmet === false)\n        enabled = false;\n    if (enabled)\n        exports.load();\n    exports.updateCommands(editor, enabled);\n};\nexports.load = function (cb) {\n    if (typeof emmetPath !== \"string\") {\n        config.warn(\"script for emmet-core is not loaded\");\n        return false;\n    }\n    config.loadModule(emmetPath, function () {\n        emmetPath = null;\n        cb && cb();\n    });\n    return true;\n};\nexports.AceEmmetEditor = AceEmmetEditor;\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    enableEmmet: {\n        set: function (val) {\n            this[val ? \"on\" : \"removeListener\"](\"changeMode\", onChangeMode);\n            onChangeMode({ enableEmmet: !!val }, this);\n        },\n        value: true\n    }\n});\nexports.setCore = function (e) {\n    if (typeof e == \"string\")\n        emmetPath = e;\n    else\n        emmet = e;\n};\n\n});                (function() {\n                    ace.require([\"ace/ext/emmet\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],"mappings":"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"},"metadata":{},"sourceType":"script"}